<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; User Guide - Overview</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
  

<div class="section">
<h2><a name="Overview"></a>Overview</h2>


<div class="section">
<h3><a name="a0.1_About_The_User_Guide"></a>0.1 About The User Guide</h3>
    
<p>
    This guide is intended to help programmers quickly find what they need to develop
    solutions using Commons Math.  It also provides a supplement to the javadoc API documentation,
    providing a little more explanation of the mathematical objects and functions included
    in the package.    
    </p>
</div>


<div class="section">
<h3><a name="a0.2_Whats_in_commons-math"></a>0.2 What's in commons-math</h3>
    
<p>
    Commons Math is made up of a small set of math/stat utilities addressing 
    programming problems like the ones in the list below.  This list is not exhaustive, 
    it's just meant to give a feel for the kinds of things that Commons Math provides.  
    </p>
<ul>
        
<li>Computing means, variances and other summary statistics for a list of numbers</li>
        
<li>Fitting a line to a set of data points using linear regression</li>
        
<li>Fitting a curve to a set of data points</li>
        
<li>Finding a smooth curve that passes through a collection of points (interpolation)</li>
        
<li>Fitting a parametric model to a set of measurements using least-squares methods</li>
        
<li>Solving equations involving real-valued functions (i.e. root-finding)</li> 
        
<li>Solving systems of linear equations</li>
        
<li>Solving Ordinary Differential Equations</li>
        
<li>Minimizing multi-dimensional functions</li>
        
<li>Generating random numbers with more restrictions (e.g distribution, range) than what
            is possible using the JDK</li>
        
<li>Generating random samples and/or datasets that are &quot;like&quot; the data in an input file</li>
        
<li>Performing statistical significance tests</li>
        
<li>Miscellaneous mathematical functions such as factorials, binomial
            coefficients and &quot;special functions&quot; (e.g. gamma, beta functions)</li>
    </ul> 
    
<p>
    We are actively seeking ideas for additional components that fit into the 
    <a href="../index.html#summary">Commons Math vision</a> of a set of lightweight, 
    self-contained math/stat components useful for solving common programming problems.
    Suggestions for new components or enhancements to existing functionality are always welcome! 
    All feedback/suggestions for improvement should be sent to the 
    <a class="externalLink" href="http://commons.apache.org/mail-lists.html">commons-dev mailing list</a> with
    [math] at the beginning of the subject line.
    </p>
</div>


<div class="section">
<h3><a name="a0.3_How_commons-math_is_organized"></a>0.3 How commons-math is organized</h3>
    
<p>
    Commons Math is divided into sixteen subpackages, based on functionality provided.
    </p>
<ul>
      
<li><a href="stat.html">org.apache.commons.math3.stat</a> - statistics, statistical tests</li>
      
<li><a href="analysis.html">org.apache.commons.math3.analysis</a> - rootfinding, integration, interpolation, polynomials</li>
      
<li><a href="random.html">org.apache.commons.math3.random</a> - random numbers, strings and data generation</li>
      
<li><a href="special.html">org.apache.commons.math3.special</a> - special functions (Gamma, Beta) </li>
      
<li><a href="linear.html">org.apache.commons.math3.linear</a> - matrices, solving linear systems </li>
      
<li><a href="utilities.html">org.apache.commons.math3.util</a> - common math/stat functions extending java.lang.Math </li>
      
<li><a href="complex.html">org.apache.commons.math3.complex</a> - complex numbers</li>
      
<li><a href="distribution.html">org.apache.commons.math3.distribution</a> - probability distributions</li>
      
<li><a href="fraction.html">org.apache.commons.math3.fraction</a> - rational numbers</li>
      
<li><a href="transform.html">org.apache.commons.math3.transform</a> - transform methods (Fast Fourier)</li>
      
<li><a href="geometry.html">org.apache.commons.math3.geometry</a> - geometry (Euclidean spaces and Binary Space Partitioning)</li>
      
<li><a href="optimization.html">org.apache.commons.math3.optim</a> - function maximization or minimization</li>
      
<li><a href="ode.html">org.apache.commons.math3.ode</a> - Ordinary Differential Equations integration</li>
      
<li><a href="genetics.html">org.apache.commons.math3.genetics</a> - Genetic Algorithms</li>
      
<li><a href="fitting.html">org.apache.commons.math3.fitting</a> - Curve Fitting</li>
      
<li><a href="ml.html">org.apache.commons.math3.ml</a> - Machine Learning</li>
    </ul>
    Package javadocs are <a href="../apidocs/index.html">here</a>
    
</div>


<div class="section">
<h3><a name="a0.4_How_interface_contracts_are_specified_in_commons-math_javadoc"></a>0.4 How interface contracts are specified in commons-math javadoc</h3>
  
<p>
    You should always read the javadoc class and method comments carefully when using 
    Commons Math components in your programs.  The javadoc provides references to the algorithms
    that are used, usage notes about limitations, performance, etc. as well as interface contracts.
    Interface contracts are specified in terms of preconditions (what has to be true in order
    for the method to return valid results), special values returned (e.g. Double.NaN) 
    or exceptions that may be thrown if the preconditions are not met, and definitions for returned
    values/objects or state changes.</p>
  
<p>
    When the actual parameters provided to a method or the internal state of an object 
    make a computation meaningless, a
    <a href="../apidocs/org/apache/commons/math3/exception/MathIllegalArgumentException.html">
      MathIllegalArgumentException</a> or
    <a href="../apidocs/org/apache/commons/math3/exception/MathIllegalStateException.html">
    MathIllegalStateException</a> may be thrown. Exact conditions under which runtime
    exceptions (and any other exceptions) are thrown are specified in the javadoc method
    comments.
    In some cases, to be consistent with the <a class="externalLink" href="http://grouper.ieee.org/groups/754/">
    IEEE 754 standard</a> for floating point arithmetic and with java.lang.Math, Commons Math
    methods return <tt>Double.NaN</tt> values. Conditions under which <tt>Double.NaN</tt>
    or other special values are returned are fully specified in the javadoc method comments.
  </p>
  
<p>
    As of version 2.2, the policy for dealing with null references is as
    follows: When an argument is unexpectedly null, a
    <a href="../apidocs/org/apache/commons/math3/exception/NullArgumentException.html">
    NullArgumentException</a> is raised to signal the illegal argument. Note that this
    class does not inherit from the standard <tt>NullPointerException</tt> but is a subclass
    of <tt>MathIllegalArgumentException</tt>.
  </p>
</div>


<div class="section">
<h3><a name="a0.5_Dependencies"></a>0.5 Dependencies</h3>
    
<p>
    Commons Math requires JDK 1.5+ and has no runtime dependencies.
    </p>
</div>


<div class="section">
<h3><a name="a0.6_License"></a>0.6 License</h3>
    
<p>
    Commons Math is distributed under the terms of the Apache License, Version 2.0:
    <a class="externalLink" href="http://www.apache.org/licenses/LICENSE-2.0"></a>.
    </p>

    
<p>
    This product includes software developed by other third parties and
    distributed under licenses terms compatible with Apache License, Version 2.0.
    All the licenses of such third parties products are available in the distribution
    in the LICENSE.txt file. Some products require additional attribution, these
    attributions can be found in the NOTICE.txt file. These files are available
    both in the source packages and in the binaries distribution jar files.
    </p>

</div>

</div>



					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Statistics</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
  
    <div class="section">
<h2><a name="a1_Statistics"></a>1 Statistics</h2>
      
<div class="section">
<h3><a name="a1.1_Overview"></a>1.1 Overview</h3>
        
<p>
          The statistics package provides frameworks and implementations for
          basic Descriptive statistics, frequency distributions, bivariate regression,
          and t-, chi-square and ANOVA test statistics.
        </p>
        
<p>
         <a href="#a1.2_Descriptive_statistics">Descriptive statistics</a><br />
         <a href="#a1.3_Frequency_distributions">Frequency distributions</a><br />
         <a href="#a1.4_Simple_regression">Simple Regression</a><br />
         <a href="#a1.5_Multiple_linear_regression">Multiple Regression</a><br />
         <a href="#a1.6_Rank_transformations">Rank transformations</a><br />
         <a href="#a1.7_Covariance_and_correlation">Covariance and correlation</a><br />
         <a href="#a1.8_Statistical_tests">Statistical Tests</a><br />
        </p>
      </div>
      
<div class="section">
<h3><a name="a1.2_Descriptive_statistics"></a>1.2 Descriptive statistics</h3>
        
<p>
          The stat package includes a framework and default implementations for
           the following Descriptive statistics:
          </p>
<ul>
            
<li>arithmetic and geometric means</li>
            
<li>variance and standard deviation</li>
            
<li>sum, product, log sum, sum of squared values</li>
            
<li>minimum, maximum, median, and percentiles</li>
            
<li>skewness and kurtosis</li>
            
<li>first, second, third and fourth moments</li>
          </ul>
        
        
<p>
          With the exception of percentiles and the median, all of these
          statistics can be computed without maintaining the full list of input
          data values in memory.  The stat package provides interfaces and
          implementations that do not require value storage as well as
          implementations that operate on arrays of stored values.
        </p>
        
<p>
          The top level interface is
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/UnivariateStatistic.html">
          UnivariateStatistic</a>.
          This interface, implemented by all statistics, consists of
          <tt>evaluate()</tt> methods that take double[] arrays as arguments
          and return the value of the statistic.   This interface is extended by
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/StorelessUnivariateStatistic.html">
          StorelessUnivariateStatistic</a>, which adds <tt>increment(),</tt>
          <tt>getResult()</tt> and associated methods to support
          &quot;storageless&quot; implementations that maintain counters, sums or other
          state information as values are added using the <tt>increment()</tt>
          method.
        </p>
        
<p>
          Abstract implementations of the top level interfaces are provided in
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/AbstractUnivariateStatistic.html">
          AbstractUnivariateStatistic</a> and
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/AbstractStorelessUnivariateStatistic.html">
          AbstractStorelessUnivariateStatistic</a> respectively.
        </p>
        
<p>
          Each statistic is implemented as a separate class, in one of the
          subpackages (moment, rank, summary) and each extends one of the abstract
          classes above (depending on whether or not value storage is required to
          compute the statistic). There are several ways to instantiate and use statistics.
          Statistics can be instantiated and used directly,  but it is generally more convenient
          (and efficient) to access them using the provided aggregates,
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html">
           DescriptiveStatistics</a> and
           <a href="../apidocs/org/apache/commons/math3/stat/descriptive/SummaryStatistics.html">
           SummaryStatistics.</a>
        </p>
        
<p>
           <tt>DescriptiveStatistics</tt> maintains the input data in memory
           and has the capability of producing &quot;rolling&quot; statistics computed from a
           &quot;window&quot; consisting of the most recently added values.
        </p>
        
<p>
           <tt>SummaryStatistics</tt> does not store the input data values
           in memory, so the statistics included in this aggregate are limited to those
           that can be computed in one pass through the data without access to
           the full array of values.
        </p>
        
<p>
          </p>
<table border="0" class="bodyTable">
            
<tr class="a">
<th>Aggregate</th>
<th>Statistics Included</th>
<th>Values stored?</th>
            
<th>&quot;Rolling&quot; capability?</th></tr>
<tr class="b">
<td>
            <a href="../apidocs/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html">
            DescriptiveStatistics</a></td>
<td>min, max, mean, geometric mean, n,
            sum, sum of squares, standard deviation, variance, percentiles, skewness,
            kurtosis, median</td>
<td>Yes</td>
<td>Yes</td></tr>
<tr class="a">
<td>
            <a href="../apidocs/org/apache/commons/math3/stat/descriptive/SummaryStatistics.html">
            SummaryStatistics</a></td>
<td>min, max, mean, geometric mean, n,
            sum, sum of squares, standard deviation, variance</td>
<td>No</td>
<td>No</td></tr>
          </table>
        
        
<p>
          <tt>SummaryStatistics</tt> can be aggregated using 
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/AggregateSummaryStatistics.html">
          AggregateSummaryStatistics.</a>  This class can be used to concurrently
          gather statistics for multiple datasets as well as for a combined sample
          including all of the data.
       </p>
        
<p>
           <tt>MultivariateSummaryStatistics</tt> is similar to
           <tt>SummaryStatistics</tt> but handles n-tuple values instead of
           scalar values. It can also compute the full covariance matrix for the
           input data.
        </p>
        
<p>
           Neither <tt>DescriptiveStatistics</tt> nor <tt>SummaryStatistics</tt>
           is thread-safe.
           <a href="../apidocs/org/apache/commons/math3/stat/descriptive/SynchronizedDescriptiveStatistics.html">
           SynchronizedDescriptiveStatistics</a> and
           <a href="../apidocs/org/apache/commons/math3/stat/descriptive/SynchronizedSummaryStatistics.html"> 
           SynchronizedSummaryStatistics</a>, respectively, provide thread-safe
           versions for applications that require concurrent access to statistical
           aggregates by multiple threads.
           <a href="../apidocs/org/apache/commons/math3/stat/descriptive/SynchronizedMultiVariateSummaryStatistics.html"> 
           SynchronizedMultivariateSummaryStatistics</a> provides thread-safe
           <tt>MultivariateSummaryStatistics.</tt>
        </p>
        
<p>
          There is also a utility class,
          <a href="../apidocs/org/apache/commons/math3/stat/StatUtils.html">
          StatUtils</a>, that provides static methods for computing statistics
          directly from double[] arrays.
        </p>
        
<p>
          Here are some examples showing how to compute Descriptive statistics.
          </p>
<dl>
          
<dt>Compute summary statistics for a list of double values</dt>
          <br />
          
<dd>Using the <tt>DescriptiveStatistics</tt> aggregate
          (values are stored in memory):
        
<div class="source">
<pre>
// Get a DescriptiveStatistics instance
DescriptiveStatistics stats = new DescriptiveStatistics();

// Add the data from the array
for( int i = 0; i &lt; inputArray.length; i++) {
        stats.addValue(inputArray[i]);
}

// Compute some statistics
double mean = stats.getMean();
double std = stats.getStandardDeviation();
double median = stats.getPercentile(50);
        </pre></div>
        </dd>
        
<dd>Using the <tt>SummaryStatistics</tt> aggregate (values are
        <b>not</b> stored in memory):
       
<div class="source">
<pre>
// Get a SummaryStatistics instance
SummaryStatistics stats = new SummaryStatistics();

// Read data from an input stream,
// adding values and updating sums, counters, etc.
while (line != null) {
        line = in.readLine();
        stats.addValue(Double.parseDouble(line.trim()));
}
in.close();

// Compute the statistics
double mean = stats.getMean();
double std = stats.getStandardDeviation();
//double median = stats.getMedian(); &lt;-- NOT AVAILABLE
        </pre></div>
        </dd>
         
<dd>Using the <tt>StatUtils</tt> utility class:
       
<div class="source">
<pre>
// Compute statistics directly from the array
// assume values is a double[] array
double mean = StatUtils.mean(values);
double std = FastMath.sqrt(StatUtils.variance(values));
double median = StatUtils.percentile(values, 50);

// Compute the mean of the first three values in the array
mean = StatUtils.mean(values, 0, 3);
        </pre></div>
        </dd>
        
<dt>Maintain a &quot;rolling mean&quot; of the most recent 100 values from
        an input stream</dt>
        <br />
        
<dd>Use a <tt>DescriptiveStatistics</tt> instance with
        window size set to 100
        
<div class="source">
<pre>
// Create a DescriptiveStats instance and set the window size to 100
DescriptiveStatistics stats = new DescriptiveStatistics();
stats.setWindowSize(100);

// Read data from an input stream,
// displaying the mean of the most recent 100 observations
// after every 100 observations
long nLines = 0;
while (line != null) {
        line = in.readLine();
        stats.addValue(Double.parseDouble(line.trim()));
        if (nLines == 100) {
                nLines = 0;
                System.out.println(stats.getMean());
       }
}
in.close();
        </pre></div>
        </dd>
        
<dt>Compute statistics in a thread-safe manner</dt>
        <br />
        
<dd>Use a <tt>SynchronizedDescriptiveStatistics</tt> instance
        
<div class="source">
<pre>
// Create a SynchronizedDescriptiveStatistics instance and
// use as any other DescriptiveStatistics instance
DescriptiveStatistics stats = new SynchronizedDescriptiveStatistics();
        </pre></div>
        </dd>
        
<dt>Compute statistics for multiple samples and overall statistics concurrently</dt>
        <br />
        
<dd>There are two ways to do this using <tt>AggregateSummaryStatistics.</tt> 
        The first is to use an <tt>AggregateSummaryStatistics</tt> instance
        to accumulate overall statistics contributed by <tt>SummaryStatistics</tt>
        instances created using
        <a href="../apidocs/org/apache/commons/math3/stat/descriptive/AggregateSummaryStatistics.html#createContributingStatistics">
        AggregateSummaryStatistics.createContributingStatistics()</a>:
        
<div class="source">
<pre>
// Create a AggregateSummaryStatistics instance to accumulate the overall statistics 
// and AggregatingSummaryStatistics for the subsamples
AggregateSummaryStatistics aggregate = new AggregateSummaryStatistics();
SummaryStatistics setOneStats = aggregate.createContributingStatistics();
SummaryStatistics setTwoStats = aggregate.createContributingStatistics();
// Add values to the subsample aggregates
setOneStats.addValue(2);
setOneStats.addValue(3);
setTwoStats.addValue(2);
setTwoStats.addValue(4);
...
// Full sample data is reported by the aggregate
double totalSampleSum = aggregate.getSum();
        </pre></div>
        The above approach has the disadvantages that the <tt>addValue</tt> calls must be synchronized on the
        <tt>SummaryStatistics</tt> instance maintained by the aggregate and each value addition updates the
        aggregate as well as the subsample. For applications that can wait to do the aggregation until all values
        have been added, a static
        <a href="../apidocs/org/apache/commons/math3/stat/descriptive/AggregateSummaryStatistics.html#aggregatejava.util.Collection">
          aggregate</a> method is available, as shown in the following example.
        This method should be used when aggregation needs to be done across threads.
        
<div class="source">
<pre>
// Create SummaryStatistics instances for the subsample data
SummaryStatistics setOneStats = new SummaryStatistics();
SummaryStatistics setTwoStats = new SummaryStatistics();
// Add values to the subsample SummaryStatistics instances
setOneStats.addValue(2);
setOneStats.addValue(3);
setTwoStats.addValue(2);
setTwoStats.addValue(4);
...
// Aggregate the subsample statistics
Collection&lt;SummaryStatistics&gt; aggregate = new ArrayList&lt;SummaryStatistics&gt;();
aggregate.add(setOneStats);
aggregate.add(setTwoStats);
StatisticalSummary aggregatedStats = AggregateSummaryStatistics.aggregate(aggregate);

// Full sample data is reported by aggregatedStats
double totalSampleSum = aggregatedStats.getSum();
        </pre></div>
        </dd>
        </dl>
       
      </div>
      
<div class="section">
<h3><a name="a1.3_Frequency_distributions"></a>1.3 Frequency distributions</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/stat/Frequency.html">
          Frequency</a>
          provides a simple interface for maintaining counts and percentages of discrete
          values.
        </p>
        
<p>
          Strings, integers, longs and chars are all supported as value types,
          as well as instances of any class that implements <tt>Comparable.</tt>
          The ordering of values used in computing cumulative frequencies is by
          default the <i>natural ordering,</i> but this can be overridden by supplying a
          <tt>Comparator</tt> to the constructor. Adding values that are not
          comparable to those that have already been added results in an
          <tt>IllegalArgumentException.</tt>
        </p>
        
<p>
          Here are some examples.
          </p>
<dl>
          
<dt>Compute a frequency distribution based on integer values</dt>
          <br />
          
<dd>Mixing integers, longs, Integers and Longs:
          
<div class="source">
<pre>
 Frequency f = new Frequency();
 f.addValue(1);
 f.addValue(new Integer(1));
 f.addValue(new Long(1));
 f.addValue(2);
 f.addValue(new Integer(-1));
 System.out.prinltn(f.getCount(1));   // displays 3
 System.out.println(f.getCumPct(0));  // displays 0.2
 System.out.println(f.getPct(new Integer(1)));  // displays 0.6
 System.out.println(f.getCumPct(-2));   // displays 0
 System.out.println(f.getCumPct(10));  // displays 1
          </pre></div>
          </dd>
          
<dt>Count string frequencies</dt>
          <br />
          
<dd>Using case-sensitive comparison, alpha sort order (natural comparator):
          
<div class="source">
<pre>
Frequency f = new Frequency();
f.addValue(&quot;one&quot;);
f.addValue(&quot;One&quot;);
f.addValue(&quot;oNe&quot;);
f.addValue(&quot;Z&quot;);
System.out.println(f.getCount(&quot;one&quot;)); // displays 1
System.out.println(f.getCumPct(&quot;Z&quot;));  // displays 0.5
System.out.println(f.getCumPct(&quot;Ot&quot;)); // displays 0.25
          </pre></div>
          </dd>
          
<dd>Using case-insensitive comparator:
          
<div class="source">
<pre>
Frequency f = new Frequency(String.CASE_INSENSITIVE_ORDER);
f.addValue(&quot;one&quot;);
f.addValue(&quot;One&quot;);
f.addValue(&quot;oNe&quot;);
f.addValue(&quot;Z&quot;);
System.out.println(f.getCount(&quot;one&quot;));  // displays 3
System.out.println(f.getCumPct(&quot;z&quot;));  // displays 1
          </pre></div>
         </dd>
       </dl>
      
      </div>
      
<div class="section">
<h3><a name="a1.4_Simple_regression"></a>1.4 Simple regression</h3>
        
<p>
         <a href="../apidocs/org/apache/commons/math3/stat/regression/SimpleRegression.html">
          SimpleRegression</a> provides ordinary least squares regression with
         one independent variable estimating the linear model:
         </p>
         
<p>
           <tt> y = intercept + slope * x  </tt>
         </p>
         
<p>
           or
         </p>
         
<p>
           <tt> y = slope * x </tt>
         </p>
         
<p>
           Standard errors for <tt>intercept</tt> and <tt>slope</tt> are
           available as well as ANOVA, r-square and Pearson's r statistics.
         </p>
         
<p>
           Observations (x,y pairs) can be added to the model one at a time or they
           can be provided in a 2-dimensional array.  The observations are not stored
           in memory, so there is no limit to the number of observations that can be
           added to the model.
         </p>
         
<p>
           <b>Usage Notes</b>: </p>
<ul>
           
<li> When there are fewer than two observations in the model, or when
            there is no variation in the x values (i.e. all x values are the same)
            all statistics return <tt>NaN</tt>.  At least two observations with
            different x coordinates are required to estimate a bivariate regression
            model.</li>
           
<li> getters for the statistics always compute values based on the current
           set of observations -- i.e., you can get statistics, then add more data
           and get updated statistics without using a new instance.  There is no
           &quot;compute&quot; method that updates all statistics.  Each of the getters performs
           the necessary computations to return the requested statistic.</li>
           
<li> The intercept term may be suppressed by passing <tt>false</tt> to the
           <a href="../apidocs/org/apache/commons/math3/stat/regression/SimpleRegression.html#SimpleRegressionboolean">
           SimpleRegression(boolean)</a> constructor.  When the <tt>hasIntercept</tt>
           property is false, the model is estimated without a constant term and
           <tt>getIntercept()</tt> returns <tt>0</tt>.</li>
          </ul>
        
        
<p>
           <b>Implementation Notes</b>: </p>
<ul>
           
<li> As observations are added to the model, the sum of x values, y values,
           cross products (x times y), and squared deviations of x and y from their
           respective means are updated using updating formulas defined in
           &quot;Algorithms for Computing the Sample Variance: Analysis and
           Recommendations&quot;, Chan, T.F., Golub, G.H., and LeVeque, R.J.
           1983, American Statistician, vol. 37, pp. 242-247, referenced in
           Weisberg, S. &quot;Applied Linear Regression&quot;. 2nd Ed. 1985.  All regression
           statistics are computed from these sums.</li>
           
<li> Inference statistics (confidence intervals, parameter significance levels)
           are based on on the assumption that the observations included in the model are
           drawn from a <a class="externalLink" href="http://mathworld.wolfram.com/BivariateNormalDistribution.html">
           Bivariate Normal Distribution</a></li>
          </ul>
        
        
<p>
        Here are some examples.
        </p>
<dl>
          
<dt>Estimate a model based on observations added one at a time</dt>
          
<dd>Instantiate a regression instance and add data points
          
<div class="source">
<pre>
regression = new SimpleRegression();
regression.addData(1d, 2d);
// At this point, with only one observation,
// all regression statistics will return NaN

regression.addData(3d, 3d);
// With only two observations,
// slope and intercept can be computed
// but inference statistics will return NaN

regression.addData(3d, 3d);
// Now all statistics are defined.
         </pre></div>
         </dd>
         
<dd>Compute some statistics based on observations added so far
         
<div class="source">
<pre>
System.out.println(regression.getIntercept());
// displays intercept of regression line

System.out.println(regression.getSlope());
// displays slope of regression line

System.out.println(regression.getSlopeStdErr());
// displays slope standard error
         </pre></div>
         </dd>
         
<dd>Use the regression model to predict the y value for a new x value
         
<div class="source">
<pre>
System.out.println(regression.predict(1.5d)
// displays predicted y value for x = 1.5
         </pre></div>
         More data points can be added and subsequent getXxx calls will incorporate
         additional data in statistics.
         </dd>
         <br />
         
<dt>Estimate a model from a double[][] array of data points</dt>
          
<dd>Instantiate a regression object and load dataset
          
<div class="source">
<pre>
double[][] data = { { 1, 3 }, {2, 5 }, {3, 7 }, {4, 14 }, {5, 11 }};
SimpleRegression regression = new SimpleRegression();
regression.addData(data);
          </pre></div>
          </dd>
          
<dd>Estimate regression model based on data
         
<div class="source">
<pre>
System.out.println(regression.getIntercept());
// displays intercept of regression line

System.out.println(regression.getSlope());
// displays slope of regression line

System.out.println(regression.getSlopeStdErr());
// displays slope standard error
         </pre></div>
         More data points -- even another double[][] array -- can be added and subsequent
         getXxx calls will incorporate additional data in statistics.
         </dd>
<br />
         
<dt>Estimate a model from a double[][] array of data points, <i>excluding</i> the intercept</dt>
          
<dd>Instantiate a regression object and load dataset
          
<div class="source">
<pre>
double[][] data = { { 1, 3 }, {2, 5 }, {3, 7 }, {4, 14 }, {5, 11 }};
SimpleRegression regression = new SimpleRegression(false);
//the argument, false, tells the class not to include a constant
regression.addData(data);
          </pre></div>
          </dd>
          
<dd>Estimate regression model based on data
         
<div class="source">
<pre>
System.out.println(regression.getIntercept());
// displays intercept of regression line, since we have constrained the constant, 0.0 is returned

System.out.println(regression.getSlope());
// displays slope of regression line

System.out.println(regression.getSlopeStdErr());
// displays slope standard error

System.out.println(regression.getInterceptStdErr() );
// will return Double.NaN, since we constrained the parameter to zero
         </pre></div>
         Caution must be exercised when interpreting the slope when no constant is being estimated. The slope 
         may be biased.
         </dd>

         </dl>
        
      </div>
      
<div class="section">
<h3><a name="a1.5_Multiple_linear_regression"></a>1.5 Multiple linear regression</h3>
        
<p>
         <a href="../apidocs/org/apache/commons/math3/stat/regression/OLSMultipleLinearRegression.html">
         OLSMultipleLinearRegression</a> and
         <a href="../apidocs/org/apache/commons/math3/stat/regression/GLSMultipleLinearRegression.html">
         GLSMultipleLinearRegression</a> provide least squares regression to fit the linear model:
         </p>
         
<p>
           <tt> Y=X*b+u </tt>
         </p>
         
<p>
         where Y is an n-vector <b>regressand</b>, X is a [n,k] matrix whose k columns are called
         <b>regressors</b>, b is k-vector of <b>regression parameters</b> and u is an n-vector 
         of <b>error terms</b> or <b>residuals</b>.
         </p>
         
<p>
          <a href="../apidocs/org/apache/commons/math3/stat/regression/OLSMultipleLinearRegression.html">
          OLSMultipleLinearRegression</a> provides Ordinary Least Squares Regression, and 
          <a href="../apidocs/org/apache/commons/math3/stat/regression/GLSMultipleLinearRegression.html">
          GLSMultipleLinearRegression</a> implements Generalized Least Squares.  See the javadoc for these
          classes for details on the algorithms and formulas used.
         </p>
         
<p>
           Data for OLS models can be loaded in a single double[] array, consisting of concatenated rows of data, each containing
           the regressand (Y) value, followed by regressor values; or using a double[][] array with rows corresponding to
           observations. GLS models also require a double[][] array representing the covariance matrix of the error terms.  See
           <a href="../apidocs/org/apache/commons/math3/stat/regression/AbstractMultipleLinearRegression.html#newSampleDatadouble_int_int">
           AbstractMultipleLinearRegression#newSampleData(double[],int,int)</a>,  
           <a href="../apidocs/org/apache/commons/math3/stat/regression/OLSMultipleLinearRegression.html#newSampleDatadouble_double">
           OLSMultipleLinearRegression#newSampleData(double[], double[][])</a> and 
           <a href="../apidocs/org/apache/commons/math3/stat/regression/GLSMultipleLinearRegression.html#newSampleDatadouble_double_double">
           GLSMultipleLinearRegression#newSampleData(double[],double[][],double[][])</a> for details.
         </p>
         
<p>
           <b>Usage Notes</b>: </p>
<ul>
           
<li> Data are validated when invoking any of the newSample, newX, newY or newCovariance methods and
           <tt>IllegalArgumentException</tt> is thrown when input data arrays do not have matching dimensions
           or do not contain sufficient data to estimate the model. 
           </li>
           
<li> By default, regression models are estimated with intercept terms.  In the notation above, this implies that the
           X matrix contains an initial row identically equal to 1.  X data supplied to the newX or newSample methods should not
           include this column - the data loading methods will create it automatically.  To estimate a model without an intercept
           term, set the <tt>noIntercept</tt> property to <tt>true.</tt></li>
          </ul>
        
        
<p>
        Here are some examples.
        </p>
<dl>
         
<dt>OLS regression</dt>
          <br />
          
<dd>Instantiate an OLS regression object and load a dataset:
          
<div class="source">
<pre>
OLSMultipleLinearRegression regression = new OLSMultipleLinearRegression();
double[] y = new double[]{11.0, 12.0, 13.0, 14.0, 15.0, 16.0};
double[][] x = new double[6][];
x[0] = new double[]{0, 0, 0, 0, 0};
x[1] = new double[]{2.0, 0, 0, 0, 0};
x[2] = new double[]{0, 3.0, 0, 0, 0};
x[3] = new double[]{0, 0, 4.0, 0, 0};
x[4] = new double[]{0, 0, 0, 5.0, 0};
x[5] = new double[]{0, 0, 0, 0, 6.0};          
regression.newSampleData(y, x);
          </pre></div>
          </dd>
          
<dd>Get regression parameters and diagnostics:
         
<div class="source">
<pre>
double[] beta = regression.estimateRegressionParameters();       

double[] residuals = regression.estimateResiduals();

double[][] parametersVariance = regression.estimateRegressionParametersVariance();

double regressandVariance = regression.estimateRegressandVariance();

double rSquared = regression.calculateRSquared();

double sigma = regression.estimateRegressionStandardError();
         </pre></div>
         </dd>
         
<dt>GLS regression</dt>
          <br />
          
<dd>Instantiate a GLS regression object and load a dataset:
          
<div class="source">
<pre>
GLSMultipleLinearRegression regression = new GLSMultipleLinearRegression();
double[] y = new double[]{11.0, 12.0, 13.0, 14.0, 15.0, 16.0};
double[][] x = new double[6][];
x[0] = new double[]{0, 0, 0, 0, 0};
x[1] = new double[]{2.0, 0, 0, 0, 0};
x[2] = new double[]{0, 3.0, 0, 0, 0};
x[3] = new double[]{0, 0, 4.0, 0, 0};
x[4] = new double[]{0, 0, 0, 5.0, 0};
x[5] = new double[]{0, 0, 0, 0, 6.0};          
double[][] omega = new double[6][];
omega[0] = new double[]{1.1, 0, 0, 0, 0, 0};
omega[1] = new double[]{0, 2.2, 0, 0, 0, 0};
omega[2] = new double[]{0, 0, 3.3, 0, 0, 0};
omega[3] = new double[]{0, 0, 0, 4.4, 0, 0};
omega[4] = new double[]{0, 0, 0, 0, 5.5, 0};
omega[5] = new double[]{0, 0, 0, 0, 0, 6.6};
regression.newSampleData(y, x, omega); 
          </pre></div>
          </dd>
         </dl>
        
      </div>    
      
<div class="section">
<h3><a name="a1.6_Rank_transformations"></a>1.6 Rank transformations</h3>
      
<p>
         Some statistical algorithms require that input data be replaced by ranks.
         The <a href="../apidocs/org/apache/commons/math3/stat/ranking/package-summary.html">
         org.apache.commons.math3.stat.ranking</a> package provides rank transformation.
         <a href="../apidocs/org/apache/commons/math3/stat/ranking/RankingAlgorithm.html">
         RankingAlgorithm</a> defines the interface for ranking.  
         <a href="../apidocs/org/apache/commons/math3/stat/ranking/NaturalRanking.html">
         NaturalRanking</a> provides an implementation that has two configuration options.
         </p>
<ul>
         
<li><a href="../apidocs/org/apache/commons/math3/stat/ranking/TiesStrategy.html">
         Ties strategy</a> deterimines how ties in the source data are handled by the ranking</li>
         
<li><a href="../apidocs/org/apache/commons/math3/stat/ranking/NaNStrategy.html">
         NaN strategy</a> determines how NaN values in the source data are handled.</li>
         </ul>
      
      
<p>
         Examples:
         </p>
<div class="source">
<pre>
NaturalRanking ranking = new NaturalRanking(NaNStrategy.MINIMAL,
TiesStrategy.MAXIMUM);
double[] data = { 20, 17, 30, 42.3, 17, 50,
                  Double.NaN, Double.NEGATIVE_INFINITY, 17 };
double[] ranks = ranking.rank(exampleData);
         </pre></div>
         results in <tt>ranks</tt> containing <tt>{6, 5, 7, 8, 5, 9, 2, 2, 5}.</tt>
         
<div class="source">
<pre>
new NaturalRanking(NaNStrategy.REMOVED,TiesStrategy.SEQUENTIAL).rank(exampleData);   
         </pre></div>
         returns <tt>{5, 2, 6, 7, 3, 8, 1, 4}.</tt>
      
      
<p>
        The default <tt>NaNStrategy</tt> is NaNStrategy.MAXIMAL.  This makes <tt>NaN</tt>
        values larger than any other value (including <tt>Double.POSITIVE_INFINITY</tt>). The
        default <tt>TiesStrategy</tt> is <tt>TiesStrategy.AVERAGE,</tt> which assigns tied
        values the average of the ranks applicable to the sequence of ties.  See the 
        <a href="../apidocs/org/apache/commons/math3/stat/ranking/NaturalRanking.html">
        NaturalRanking</a> for more examples and <a href="../apidocs/org/apache/commons/math3/stat/ranking/TiesStrategy.html">
        TiesStrategy</a> and <a href="../apidocs/org/apache/commons/math3/stat/ranking/NaNStrategy.html">NaNStrategy</a>
        for details on these configuration options.
       </p>
      </div>  
      
<div class="section">
<h3><a name="a1.7_Covariance_and_correlation"></a>1.7 Covariance and correlation</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/stat/correlation/package-summary.html">
          org.apache.commons.math3.stat.correlation</a> package computes covariances
          and correlations for pairs of arrays or columns of a matrix.
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/Covariance.html">
          Covariance</a> computes covariances, 
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/PearsonsCorrelation.html">
          PearsonsCorrelation</a> provides Pearson's Product-Moment correlation coefficients,
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/SpearmansCorrelation.html">
          SpearmansCorrelation</a> computes Spearman's rank correlation and
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/KendallsCorrelation.html">
          KendallsCorrelation</a> computes Kendall's tau rank correlation.
        </p>
        
<p>
          <b>Implementation Notes</b>
          </p>
<ul>
          
<li>
           Unbiased covariances are given by the formula <br />
           <tt>cov(X, Y) = sum [(x<sub>i</sub> - E(X))(y<sub>i</sub> - E(Y))] / (n - 1)</tt>
           where <tt>E(X)</tt> is the mean of <tt>X</tt> and <tt>E(Y)</tt>
           is the mean of the <tt>Y</tt> values. Non-bias-corrected estimates use 
           <tt>n</tt> in place of <tt>n - 1.</tt>  Whether or not covariances are
           bias-corrected is determined by the optional parameter, &quot;biasCorrected,&quot; which
           defaults to <tt>true.</tt>      
          </li>
          
<li>
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/PearsonsCorrelation.html">
          PearsonsCorrelation</a> computes correlations defined by the formula <br />
          <tt>cor(X, Y) = sum[(x<sub>i</sub> - E(X))(y<sub>i</sub> - E(Y))] / [(n - 1)s(X)s(Y)]</tt><br />
          where <tt>E(X)</tt> and <tt>E(Y)</tt> are means of <tt>X</tt> and <tt>Y</tt>
          and <tt>s(X)</tt>, <tt>s(Y)</tt> are standard deviations.
          </li>
          
<li>
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/SpearmansCorrelation.html">
          SpearmansCorrelation</a> applies a rank transformation to the input data and computes Pearson's
          correlation on the ranked data.  The ranking algorithm is configurable. By default, 
          <a href="../apidocs/org/apache/commons/math3/stat/ranking/NaturalRanking.html">
          NaturalRanking</a> with default strategies for handling ties and NaN values is used.
          </li>
          
<li>
          <a href="../apidocs/org/apache/commons/math3/stat/correlation/KendallsCorrelation.html">
          KendallsCorrelation</a> computes the association between two measured quantities. A tau test
          is a non-parametric hypothesis test for statistical dependence based on the tau coefficient.
          </li> 
          </ul>
        
        
<p>
        <b>Examples:</b>
        </p>
<dl>
          
<dt><b>Covariance of 2 arrays</b></dt>
          <br />
          
<dd>To compute the unbiased covariance between 2 double arrays,
          <tt>x</tt> and <tt>y</tt>, use:
          
<div class="source">
<pre>
new Covariance().covariance(x, y)
          </pre></div>
          For non-bias-corrected covariances, use
          
<div class="source">
<pre>
covariance(x, y, false)
          </pre></div>
          </dd>
          <br />
          
<dt><b>Covariance matrix</b></dt>
          <br />
          
<dd> A covariance matrix over the columns of a source matrix <tt>data</tt>
          can be computed using
          
<div class="source">
<pre>
new Covariance().computeCovarianceMatrix(data)
          </pre></div>
          The i-jth entry of the returned matrix is the unbiased covariance of the ith and jth
          columns of <tt>data.</tt> As above, to get non-bias-corrected covariances,
          use 
         
<div class="source">
<pre>
computeCovarianceMatrix(data, false)
         </pre></div>
          </dd>
           <br />
          
<dt><b>Pearson's correlation of 2 arrays</b></dt>
          <br />
          
<dd>To compute the Pearson's product-moment correlation between two double arrays
          <tt>x</tt> and <tt>y</tt>, use:
          
<div class="source">
<pre>
new PearsonsCorrelation().correlation(x, y)
          </pre></div>
          </dd>
          <br />
          
<dt><b>Pearson's correlation matrix</b></dt>
          <br />
          
<dd> A (Pearson's) correlation matrix over the columns of a source matrix <tt>data</tt>
          can be computed using
          
<div class="source">
<pre>
new PearsonsCorrelation().computeCorrelationMatrix(data)
          </pre></div>
          The i-jth entry of the returned matrix is the Pearson's product-moment correlation between the
          ith and jth columns of <tt>data.</tt> 
          </dd>
          <br />
          
<dt><b>Pearson's correlation significance and standard errors</b></dt>
          <br />
          
<dd> To compute standard errors and/or significances of correlation coefficients
          associated with Pearson's correlation coefficients, start by creating a
          <tt>PearsonsCorrelation</tt> instance
          
<div class="source">
<pre>
PearsonsCorrelation correlation = new PearsonsCorrelation(data);
          </pre></div>
          where <tt>data</tt> is either a rectangular array or a <tt>RealMatrix.</tt>
          Then the matrix of standard errors is
          
<div class="source">
<pre>
correlation.getCorrelationStandardErrors();
          </pre></div>
          The formula used to compute the standard error is <br />
          <tt>SE<sub>r</sub> = ((1 - r<sup>2</sup>) / (n - 2))<sup>1/2</sup></tt><br />
           where <tt>r</tt> is the estimated correlation coefficient and 
          <tt>n</tt> is the number of observations in the source dataset.<br /><br />
          <b>p-values</b> for the (2-sided) null hypotheses that elements of
          a correlation matrix are zero populate the RealMatrix returned by
          
<div class="source">
<pre>
correlation.getCorrelationPValues()
          </pre></div>
          <tt>getCorrelationPValues().getEntry(i,j)</tt> is the
          probability that a random variable distributed as <tt>t<sub>n-2</sub></tt> takes
          a value with absolute value greater than or equal to <br />
          <tt>|r<sub>ij</sub>|((n - 2) / (1 - r<sub>ij</sub><sup>2</sup>))<sup>1/2</sup></tt>,
          where <tt>r<sub>ij</sub></tt> is the estimated correlation between the ith and jth
          columns of the source array or RealMatrix. This is sometimes referred to as the 
          <i>significance</i> of the coefficient.<br /><br />
          For example, if <tt>data</tt> is a RealMatrix with 2 columns and 10 rows, then 
          
<div class="source">
<pre>
new PearsonsCorrelation(data).getCorrelationPValues().getEntry(0,1)
          </pre></div>
          is the significance of the Pearson's correlation coefficient between the two columns
          of <tt>data</tt>.  If this value is less than .01, we can say that the correlation
          between the two columns of data is significant at the 99% level.
          </dd>
          <br />
          
<dt><b>Spearman's rank correlation coefficient</b></dt>
          <br />
          
<dd>To compute the Spearman's rank-moment correlation between two double arrays
          <tt>x</tt> and <tt>y</tt>:
          
<div class="source">
<pre>
new SpearmansCorrelation().correlation(x, y)
          </pre></div>
          This is equivalent to 
          
<div class="source">
<pre>
RankingAlgorithm ranking = new NaturalRanking();
new PearsonsCorrelation().correlation(ranking.rank(x), ranking.rank(y))
          </pre></div>
          </dd>
          <br />     
          
<dt><b>Kendalls's tau rank correlation coefficient</b></dt>
          <br />
          
<dd>To compute the Kendall's tau rank correlation between two double arrays
          <tt>x</tt> and <tt>y</tt>:
          
<div class="source">
<pre>
new KendallsCorrelation().correlation(x, y)
          </pre></div>
          </dd>
        </dl>
        
      </div>
            
<div class="section">
<h3><a name="a1.8_Statistical_tests"></a>1.8 Statistical tests</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/stat/inference/">
          org.apache.commons.math3.stat.inference</a> package provides implementations for
          <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/prc/section2/prc22.htm">
          Student's t</a>,
          <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm">
          Chi-Square</a>, 
          <a class="externalLink" href="http://en.wikipedia.org/wiki/G-test">G Test</a>,
          <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/prc/section4/prc43.htm">
          One-Way ANOVA</a>,
          <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/prc/section3/prc35.htm">
          Mann-Whitney U</a>,
          <a class="externalLink" href="http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test">
          Wilcoxon signed rank</a> and
          <a class="externalLink" href="http://en.wikipedia.org/wiki/Binomial_test">
          Binomial</a> test statistics as well as
          <a class="externalLink" href="http://www.cas.lancs.ac.uk/glossary_v1.1/hyptest.html#pvalue">
          p-values</a> associated with <tt>t-</tt>,
          <tt>Chi-Square</tt>, <tt>G</tt>, <tt>One-Way ANOVA</tt>, <tt>Mann-Whitney U</tt>
          <tt>Wilcoxon signed rank</tt>, and <tt>Kolmogorov-Smirnov</tt> tests.
          The respective test classes are
          <a href="../apidocs/org/apache/commons/math3/stat/inference/TTest.html">
          TTest</a>,
          <a href="../apidocs/org/apache/commons/math3/stat/inference/ChiSquareTest.html">
          ChiSquareTest</a>,
          <a href="../apidocs/org/apache/commons/math3/stat/inference/GTest.html">
          GTest</a>,
          <a href="../apidocs/org/apache/commons/math3/stat/inference/OneWayAnova.html">
          OneWayAnova</a>,
          <a href="../apidocs/org/apache/commons/math3/stat/inference/MannWhitneyUTest.html">
          MannWhitneyUTest</a>,
          <a href="../apidocs/org/apache/commons/math3/stat/inference/WilcoxonSignedRankTest.html">
          WilcoxonSignedRankTest</a>,
          <a href="../apidocs/org/apache/commons/math3/stat/inference/BinomialTest.html">
          BinomialTest</a> and
          <a href="../apidocs/org/apache/commons/math3/stat/inference/KolmogorovSmirnovTest.html">
          KolmogorovSmirnovTest</a>.                  
          The <a href="../apidocs/org/apache/commons/math3/stat/inference/TestUtils.html">
          TestUtils</a> class provides static methods to get test instances or
          to compute test statistics directly.  The examples below all use the
          static methods in <tt>TestUtils</tt> to execute tests.  To get
          test object instances, either use e.g., <tt>TestUtils.getTTest()</tt>
          or use the implementation constructors directly, e.g. <tt>new TTest()</tt>.
       </p>
        
<p>
          <b>Implementation Notes</b>
          </p>
<ul>
          
<li>Both one- and two-sample t-tests are supported.  Two sample tests
          can be either paired or unpaired and the unpaired two-sample tests can
          be conducted under the assumption of equal subpopulation variances or
          without this assumption.  When equal variances is assumed, a pooled
          variance estimate is used to compute the t-statistic and the degrees
          of freedom used in the t-test equals the sum of the sample sizes minus 2.
          When equal variances is not assumed, the t-statistic uses both sample
          variances and the
          <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/prc/section3/gifs/nu3.gif">
          Welch-Satterwaite approximation</a> is used to compute the degrees
          of freedom.  Methods to return t-statistics and p-values are provided in each
          case, as well as boolean-valued methods to perform fixed significance
          level tests.  The names of methods or methods that assume equal
          subpopulation variances always start with &quot;homoscedastic.&quot;  Test or
          test-statistic methods that just start with &quot;t&quot; do not assume equal
          variances. See the examples below and the API documentation for
          more details.</li>
          
<li>The validity of the p-values returned by the t-test depends on the
          assumptions of the parametric t-test procedure, as discussed
          <a class="externalLink" href="http://www.basic.nwu.edu/statguidefiles/ttest_unpaired_ass_viol.html">
          here</a></li>
          
<li>p-values returned by t-, chi-square and ANOVA tests are exact, based
           on numerical approximations to the t-, chi-square and F distributions in the
           <tt>distributions</tt> package. </li>
          
<li>The G test implementation provides two p-values:
           <tt>gTest(expected, observed)</tt>, which is the tail probability beyond
           <tt>g(expected, observed)</tt> in the ChiSquare distribution with degrees
           of freedom one less than the common length of input arrays and 
           <tt>gTestIntrinsic(expected, observed)</tt> which is the same tail
           probability computed using a ChiSquare distribution with one less degeree
           of freedom. </li>
          
<li>p-values returned by t-tests are for two-sided tests and the boolean-valued
           methods supporting fixed significance level tests assume that the hypotheses
           are two-sided.  One sided tests can be performed by dividing returned p-values
           (resp. critical values) by 2.</li>
           
<li>Degrees of freedom for G- and chi-square tests are integral values, based on the
           number of observed or expected counts (number of observed counts - 1).</li>
           
<li> The KolmogorovSmirnov test uses a statistic based on the maximum deviation of
           the empirical distribution of sample data points from the distribution expected
           under the null hypothesis. Specifically, what is computed is
           \(D_n=\sup_x |F_n(x)-F(x)|\), where \(F\) is the expected distribution and
           \(F_n\) is the empirical distribution of the \(n\) sample data points.  Both
           one-sample tests against a <tt>RealDistribution</tt> and two-sample tests
           (comparing two empirical distributions) are supported.  For one-sample tests,
           the distribution of \(D_n\) is estimated using the method in 
           <a class="externalLink" href="http://www.jstatsoft.org/v08/i18/">Evaluating Kolmogorov's Distribution</a> by
           George Marsaglia, Wai Wan Tsang, and Jingbo Wang, with quick decisions in some cases 
           for extreme values using the method described in
           <a class="externalLink" href="http://www.jstatsoft.org/v39/i11/"> Computing the Two-Sided Kolmogorov-Smirnov
           Distribution</a> by Richard Simard and Pierre L'Ecuyer.  In the 2-sample case, estimation
           by default depends on the number of data points.  For small samples, the distribution
           is computed exactly and for large samples a numerical approximation of the Kolmogorov
           distribution is used. Methods to perform each type of p-value estimation are also exposed
           directly.  See the class javadoc for details.</li>
          </ul>
          
          
<p>
        <b>Examples:</b>
        </p>
<dl>
          
<dt><b>One-sample <tt>t</tt> tests</b></dt>
          <br />
          
<dd>To compare the mean of a double[] array to a fixed value:
          
<div class="source">
<pre>
double[] observed = {1d, 2d, 3d};
double mu = 2.5d;
System.out.println(TestUtils.t(mu, observed));
          </pre></div>
          The code above will display the t-statistic associated with a one-sample
           t-test comparing the mean of the <tt>observed</tt> values against
           <tt>mu.</tt>
          </dd>
          
<dd>To compare the mean of a dataset described by a
          <a href="../apidocs/org/apache/commons/math3/stat/descriptive/StatisticalSummary.html">
          StatisticalSummary</a>  to a fixed value:
          
<div class="source">
<pre>
double[] observed ={1d, 2d, 3d};
double mu = 2.5d;
SummaryStatistics sampleStats = new SummaryStatistics();
for (int i = 0; i &lt; observed.length; i++) {
    sampleStats.addValue(observed[i]);
}
System.out.println(TestUtils.t(mu, observed));
</pre></div>
           </dd>
           
<dd>To compute the p-value associated with the null hypothesis that the mean
            of a set of values equals a point estimate, against the two-sided alternative that
            the mean is different from the target value:
            
<div class="source">
<pre>
double[] observed = {1d, 2d, 3d};
double mu = 2.5d;
System.out.println(TestUtils.tTest(mu, observed));
           </pre></div>
          The snippet above will display the p-value associated with the null
          hypothesis that the mean of the population from which the
          <tt>observed</tt> values are drawn equals <tt>mu.</tt>
          </dd>
          
<dd>To perform the test using a fixed significance level, use:
          
<div class="source">
<pre>
TestUtils.tTest(mu, observed, alpha);
          </pre></div>
          where <tt>0 &lt; alpha &lt; 0.5</tt> is the significance level of
          the test.  The boolean value returned will be <tt>true</tt> iff the
          null hypothesis can be rejected with confidence <tt>1 - alpha</tt>.
          To test, for example at the 95% level of confidence, use
          <tt>alpha = 0.05</tt>
          </dd>
          <br />
          
<dt><b>Two-Sample t-tests</b></dt>
          <br />
          
<dd><b>Example 1:</b> Paired test evaluating
          the null hypothesis that the mean difference between corresponding
          (paired) elements of the <tt>double[]</tt> arrays
          <tt>sample1</tt> and <tt>sample2</tt> is zero.
          
<p>
          To compute the t-statistic:
          </p>
<div class="source">
<pre>
TestUtils.pairedT(sample1, sample2);
          </pre></div>
           
           
<p>
           To compute the p-value:
           </p>
<div class="source">
<pre>
TestUtils.pairedTTest(sample1, sample2);
           </pre></div>
           
           
<p>
           To perform a fixed significance level test with alpha = .05:
           </p>
<div class="source">
<pre>
TestUtils.pairedTTest(sample1, sample2, .05);
           </pre></div>
           
           The last example will return <tt>true</tt> iff the p-value
           returned by <tt>TestUtils.pairedTTest(sample1, sample2)</tt>
           is less than <tt>.05</tt>
           </dd>
           
<dd><b>Example 2: </b> unpaired, two-sided, two-sample t-test using
           <tt>StatisticalSummary</tt> instances, without assuming that
           subpopulation variances are equal.
           
<p>
           First create the <tt>StatisticalSummary</tt> instances.  Both
           <tt>DescriptiveStatistics</tt> and <tt>SummaryStatistics</tt>
           implement this interface.  Assume that <tt>summary1</tt> and
           <tt>summary2</tt> are <tt>SummaryStatistics</tt> instances,
           each of which has had at least 2 values added to the (virtual) dataset that
           it describes.  The sample sizes do not have to be the same -- all that is required
           is that both samples have at least 2 elements.
           </p>
           
<p><b>Note:</b> The <tt>SummaryStatistics</tt> class does
           not store the dataset that it describes in memory, but it does compute all
           statistics necessary to perform t-tests, so this method can be used to
           conduct t-tests with very large samples.  One-sample tests can also be
           performed this way.
           (See <a href="#a1.2_Descriptive_statistics">Descriptive statistics</a> for details
           on the <tt>SummaryStatistics</tt> class.)
           </p>
           
<p>
          To compute the t-statistic:
          </p>
<div class="source">
<pre>
TestUtils.t(summary1, summary2);
          </pre></div>
           
           
<p>
           To compute the p-value:
           </p>
<div class="source">
<pre>
TestUtils.tTest(sample1, sample2);
           </pre></div>
           
           
<p>
           To perform a fixed significance level test with alpha = .05:
           </p>
<div class="source">
<pre>
TestUtils.tTest(sample1, sample2, .05);
           </pre></div>
           
           
<p>
           In each case above, the test does not assume that the subpopulation
           variances are equal.  To perform the tests under this assumption,
           replace &quot;t&quot; at the beginning of the method name with &quot;homoscedasticT&quot;
           </p>
           </dd>
           <br />
          
<dt><b>Chi-square tests</b></dt>
          <br />
          
<dd>To compute a chi-square statistic measuring the agreement between a
          <tt>long[]</tt> array of observed counts and a <tt>double[]</tt>
          array of expected counts, use:
          
<div class="source">
<pre>
long[] observed = {10, 9, 11};
double[] expected = {10.1, 9.8, 10.3};
System.out.println(TestUtils.chiSquare(expected, observed));
          </pre></div>
          the value displayed will be
          <tt>sum((expected[i] - observed[i])^2 / expected[i])</tt>
          </dd>
          
<dd> To get the p-value associated with the null hypothesis that
          <tt>observed</tt> conforms to <tt>expected</tt> use:
          
<div class="source">
<pre>
TestUtils.chiSquareTest(expected, observed);
          </pre></div>
          </dd>
          
<dd> To test the null hypothesis that <tt>observed</tt> conforms to
          <tt>expected</tt> with <tt>alpha</tt> significance level
          (equiv. <tt>100 * (1-alpha)%</tt> confidence) where <tt>
          0 &lt; alpha &lt; 1 </tt> use:
          
<div class="source">
<pre>
TestUtils.chiSquareTest(expected, observed, alpha);
          </pre></div>
          The boolean value returned will be <tt>true</tt> iff the null hypothesis
          can be rejected with confidence <tt>1 - alpha</tt>.
          </dd>
          
<dd>To compute a chi-square statistic statistic associated with a
          <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/prc/section4/prc45.htm">
          chi-square test of independence</a> based on a two-dimensional (long[][])
          <tt>counts</tt> array viewed as a two-way table, use:
          
<div class="source">
<pre>
TestUtils.chiSquareTest(counts);
          </pre></div>
          The rows of the 2-way table are
          <tt>count[0], ... , count[count.length - 1]. </tt><br />
          The chi-square statistic returned is
          <tt>sum((counts[i][j] - expected[i][j])^2/expected[i][j])</tt>
          where the sum is taken over all table entries and
          <tt>expected[i][j]</tt> is the product of the row and column sums at
          row <tt>i</tt>, column <tt>j</tt> divided by the total count.
          </dd>
          
<dd>To compute the p-value associated with the null hypothesis that
          the classifications represented by the counts in the columns of the input 2-way
          table are independent of the rows, use:
          
<div class="source">
<pre>
 TestUtils.chiSquareTest(counts);
          </pre></div>
          </dd>
          
<dd>To perform a chi-square test of independence with <tt>alpha</tt>
          significance level (equiv. <tt>100 * (1-alpha)%</tt> confidence)
          where <tt>0 &lt; alpha &lt; 1 </tt> use:
          
<div class="source">
<pre>
TestUtils.chiSquareTest(counts, alpha);
          </pre></div>
          The boolean value returned will be <tt>true</tt> iff the null
          hypothesis can be rejected with confidence <tt>1 - alpha</tt>.
          </dd>
          <br />
          
<dt><b>G tests</b></dt>
          <br />
          
<dd>G tests are an alternative to chi-square tests that are recommended
          when observed counts are small and / or incidence probabilities for
          some cells are small. See Ted Dunning's paper,
          <a class="externalLink" href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.14.5962">
          Accurate Methods for the Statistics of Surprise and Coincidence</a> for
          background and an empirical analysis showing now chi-square
          statistics can be misleading in the presence of low incidence probabilities.
          This paper also derives the formulas used in computing G statistics and the
          root log likelihood ratio provided by the <tt>GTest</tt> class.
          </dd>
          
<dd>To compute a G-test statistic measuring the agreement between a
          <tt>long[]</tt> array of observed counts and a <tt>double[]</tt>
          array of expected counts, use:
          
<div class="source">
<pre>
double[] expected = new double[]{0.54d, 0.40d, 0.05d, 0.01d};
long[] observed = new long[]{70, 79, 3, 4};
System.out.println(TestUtils.g(expected, observed));
          </pre></div>
          the value displayed will be
          <tt>2 * sum(observed[i]) * log(observed[i]/expected[i])</tt>
          </dd>
          
<dd>To get the p-value associated with the null hypothesis that
          <tt>observed</tt> conforms to <tt>expected</tt> use:
          
<div class="source">
<pre>
TestUtils.gTest(expected, observed);
          </pre></div>
          </dd>
          
<dd>To test the null hypothesis that <tt>observed</tt> conforms to
          <tt>expected</tt> with <tt>alpha</tt> siginficance level
          (equiv. <tt>100 * (1-alpha)%</tt> confidence) where <tt>
          0 &lt; alpha &lt; 1 </tt> use:
          
<div class="source">
<pre>
TestUtils.gTest(expected, observed, alpha);
          </pre></div>
          The boolean value returned will be <tt>true</tt> iff the null hypothesis
          can be rejected with confidence <tt>1 - alpha</tt>.
          </dd>
          
<dd>To evaluate the hypothesis that two sets of counts come from the
          same underlying distribution, use long[] arrays for the counts and
          <tt>gDataSetsComparison</tt> for the test statistic
          
<div class="source">
<pre>
long[] obs1 = new long[]{268, 199, 42};
long[] obs2 = new long[]{807, 759, 184};
System.out.println(TestUtils.gDataSetsComparison(obs1, obs2)); // G statistic
System.out.println(TestUtils.gTestDataSetsComparison(obs1, obs2)); // p-value
          </pre></div>
          </dd>
          
<dd>For 2 x 2 designs, the <tt>rootLogLikelihoodRatio</tt> method
          computes the
          <a class="externalLink" href="http://tdunning.blogspot.com/2008/03/surprise-and-coincidence.html">
          signed root log likelihood ratio.</a>  For example, suppose that for two events
          A and B, the observed count of AB (both occurring) is 5, not A and B (B without A)
          is 1995, A not B is 0; and neither A nor B is 10000.  Then
          
<div class="source">
<pre>
new GTest().rootLogLikelihoodRatio(5, 1995, 0, 100000);
          </pre></div>
          returns the root log likelihood associated with the null hypothesis that A 
          and B are independent.
          </dd>
          <br />
          
<dt><b>One-Way ANOVA tests</b></dt>
          <br />
          
<dd>
          
<div class="source">
<pre>
double[] classA =
   {93.0, 103.0, 95.0, 101.0, 91.0, 105.0, 96.0, 94.0, 101.0 };
double[] classB =
   {99.0, 92.0, 102.0, 100.0, 102.0, 89.0 };
double[] classC =
   {110.0, 115.0, 111.0, 117.0, 128.0, 117.0 };
List classes = new ArrayList();
classes.add(classA);
classes.add(classB);
classes.add(classC);
          </pre></div>
          Then you can compute ANOVA F- or p-values associated with the
          null hypothesis that the class means are all the same
          using a <tt>OneWayAnova</tt> instance or <tt>TestUtils</tt>
          methods:
          
<div class="source">
<pre>
double fStatistic = TestUtils.oneWayAnovaFValue(classes); // F-value
double pValue = TestUtils.oneWayAnovaPValue(classes);     // P-value
          </pre></div>
          To test perform a One-Way ANOVA test with significance level set at 0.01
          (so the test will, assuming assumptions are met, reject the null
          hypothesis incorrectly only about one in 100 times), use
          
<div class="source">
<pre>
TestUtils.oneWayAnovaTest(classes, 0.01); // returns a boolean
                                          // true means reject null hypothesis
          </pre></div>
          </dd>
          <br />
          
<dt><b>Kolmogorov-Smirnov tests</b></dt>
          <br />
          
<dd>Given a double[] array <tt>data</tt> of values, to evaluate the
          null hypothesis that the values are drawn from a unit normal distribution
          
<div class="source">
<pre>
final NormalDistribution unitNormal = new NormalDistribution(0d, 1d);
TestUtils.kolmogorovSmirnovTest(unitNormal, sample, false)
          </pre></div>
          returns the p-value and
          
<div class="source">
<pre>
TestUtils.kolmogorovSmirnovStatistic(unitNormal, sample)
          </pre></div>
          returns the D-statistic.
          <br />
          If <tt>y</tt> is a double array, to evaluate the null hypothesis that
          <tt>x</tt> and <tt>y</tt> are drawn from the same underlying distribution,
          use
          
<div class="source">
<pre>
TestUtils.kolmogorovSmirnovStatistic(x, y)
          </pre></div>
          to compute the D-statistic and 
          
<div class="source">
<pre>
TestUtils.kolmogorovSmirnovTest(x, y)
          </pre></div>
          for the p-value associated with the null hypothesis that <tt>x</tt> and
          <tt>y</tt> come from the same distribution. By default, here and above strict
          inequality is used in the null hypothesis - i.e., we evaluate \(H_0 : D_{n,m} &gt; d \).
          To make the inequality above non-strict, add <tt>false</tt> as an actual parameter
          above. For large samples, this parameter makes no difference.
          <br />
          To force exact computation of the p-value (overriding the selection of estimation
          method), first compute the d-statistic and then use the <tt>exactP</tt> method
          
<div class="source">
<pre>
final double d = TestUtils.kolmogorovSmirnovStatistic(x, y);
TestUtils.exactP(d, x.length, y.length, false)
          </pre></div>
          assuming that the non-strict form of the null hypothesis is desired. Note, however,
          that exact computation for large samples takes a long time.
          </dd>
        </dl>
        
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Data Generation</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->



<div class="section">
<h2><a name="a2_Data_Generation"></a>2 Data Generation</h2>


<div class="section">
<h3><a name="a2.1_Overview"></a>2.1 Overview</h3>
    
<p>
    The Commons Math random package includes utilities for
    </p>
<ul>
        
<li>generating random numbers</li>
        
<li>generating random vectors</li>
        
<li>generating random strings</li>
        
<li>generating cryptographically secure sequences of random numbers or
         strings</li>
        
<li>generating random samples and permutations</li>
        
<li>analyzing distributions of values in an input file and generating
         values &quot;like&quot; the values in the file</li>
        
<li>generating data for grouped frequency distributions or
         histograms</li>
    </ul>
    
<p>
     The source of random data used by the data generation utilities is
     pluggable.  By default, the JDK-supplied PseudoRandom Number Generator
     (PRNG) is used, but alternative generators can be &quot;plugged in&quot; using an
     adaptor framework, which provides a generic facility for replacing 
     <tt>java.util.Random</tt> with an alternative PRNG. Other very
     good PRNG suitable for Monte-Carlo analysis (but <b>not</b>
     for cryptography) provided by the library are the Mersenne twister from
     Makoto Matsumoto and Takuji Nishimura and the more recent WELL generators
     (Well Equidistributed Long-period Linear) from Fran&#xe7;ois Panneton, Pierre
     L'Ecuyer and Makoto Matsumoto.
    </p>
    
<p>
     Sections 2.2-2.6 below show how to use the commons math API to generate
     different kinds of random data.  The examples all use the default
     JDK-supplied PRNG.  PRNG pluggability is covered in 2.7.  The only 
     modification required to the examples to use alternative PRNGs is to
     replace the argumentless constructor calls with invocations including
     a <tt>RandomGenerator</tt> instance as a parameter.
    </p>  
</div>


<div class="section">
<h3><a name="a2.2_Random_numbers"></a>2.2 Random numbers</h3>
    
<p>
    The <a href="../apidocs/org/apache/commons/math3/random/RandomDataGenerator.html">
    RandomDataGenerator</a> class implements methods for generating random sequences
    of numbers. The API contracts of these methods use the following concepts:
    </p>
<dl>
    
<dt>Random sequence of numbers from a probability distribution</dt>
    
<dd>There is no such thing as a single &quot;random number.&quot;  What can be
    generated  are <i>sequences</i> of numbers that appear to be random.  When
    using the built-in JDK function <tt>Math.random(),</tt> sequences of 
    values generated follow the 
    <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/eda/section3/eda3662.htm">
    Uniform Distribution</a>, which means that the values are evenly spread
    over the interval  between 0 and 1, with no sub-interval having a greater
    probability of containing generated values than any other interval of the
    same length.  The mathematical concept of a
    <a class="externalLink" href="http://www.itl.nist.gov/div898/handbook/eda/section3/eda36.htm">
    probability distribution</a> basically amounts to asserting that different
    ranges in the set  of possible values of a random variable have
    different probabilities of containing the value.  Commons Math supports
    generating random sequences from each of the distributions in the
    <a href="../apidocs/org/apache/commons/math3/distribution/package-summary.html">
    distributions</a> package.
    The javadoc for the <tt>nextXxx</tt> methods in 
    <a href="../apidocs/org/apache/commons/math3/random/RandomDataGenerator.html">
    RandomDataGenerator</a> describes the algorithms used to generate
    random deviates.   
    </dd>
    
<dt>Cryptographically secure random sequences</dt>
    
<dd>It is possible for a sequence of numbers to appear random, but
    nonetheless to be predictable based on the algorithm used to generate the
    sequence. If in addition to randomness, strong unpredictability is
    required, it is best to use a  
    <a class="externalLink" href="http://www.wikipedia.org/wiki/Cryptographically_secure_pseudo-random_number_generator">
    secure random number generator</a> to generate values (or strings). The
    nextSecureXxx methods implemented by <tt>RandomDataGenerator</tt>
    use the JDK <tt>SecureRandom</tt> PRNG to generate cryptographically
    secure sequences. The <tt>setSecureAlgorithm</tt> method allows you to
    change the underlying PRNG. These methods are <b>much slower</b> than
    the corresponding &quot;non-secure&quot; versions, so they should only be used when cryptographic
    security is required.  The <tt>ISAACRandom</tt> class implements a fast
    cryptographically secure pseudorandom number generator.</dd>
    
<dt>Seeding pseudo-random number generators</dt>
    
<dd>By default, the implementation provided in <tt>RandomDataGenerator</tt>
    uses the JDK-provided PRNG.  Like most other PRNGs, the JDK generator
    generates sequences of random numbers based on an initial &quot;seed value.&quot;
    For the non-secure methods, starting with the same seed always produces the
    same sequence of values.  Secure sequences started with the same seeds will
    diverge. When a new <tt>RandomDataGenerator</tt> is created, the underlying
    random number generators are <b>not</b> initialized.  The first
    call to a data generation method, or to a <tt>reSeed()</tt> method
    initializes the appropriate generator.  If you do not explicitly seed the
    generator, it is by default seeded with the current time in milliseconds.
    Therefore, to generate sequences of random data values, you should always
    instantiate <b>one</b> <tt> RandomDataGenerator</tt> and use it
    repeatedly instead of creating new instances for subsequent values in the
    sequence.  For example, the following will generate a random sequence of 50
    long integers between 1 and 1,000,000, using the current time in
    milliseconds as the seed for the JDK PRNG:
    
<div class="source">
<pre>
RandomDataGenerator randomData = new RandomDataGenerator(); 
for (int i = 0; i &lt; 1000; i++) {
    value = randomData.nextLong(1, 1000000);
}
    </pre></div>
    The following will not in general produce a good random sequence, since the
    PRNG is reseeded each time through the loop with the current time in
    milliseconds:
    
<div class="source">
<pre>
for (int i = 0; i &lt; 1000; i++) {
    RandomDataGenerator randomData = new RandomDataGenerator(); 
    value = randomData.nextLong(1, 1000000);
}
    </pre></div>
    The following will produce the same random sequence each time it is
    executed:
    
<div class="source">
<pre>
RandomDataGenerator randomData = new RandomDataGenerator(); 
randomData.reSeed(1000);
for (int i = 0; i = 1000; i++) {
    value = randomData.nextLong(1, 1000000);
}
    </pre></div>
    The following will produce a different random sequence each time it is
     executed. 
    
<div class="source">
<pre>
RandomDataGenerator randomData = new RandomDataGenerator(); 
randomData.reSeedSecure(1000);
for (int i = 0; i &lt; 1000; i++) {
    value = randomData.nextSecureLong(1, 1000000);
}
    </pre></div>
    </dd></dl>
    
</div>


<div class="section">
<h3><a name="a2.3_Random_Vectors"></a>2.3 Random Vectors</h3>
    
<p>
    Some algorithms require random vectors instead of random scalars. When the
    components of these vectors are uncorrelated, they may be generated simply
    one at a time and packed together in the vector. The <a href="../apidocs/org/apache/commons/math3/random/UncorrelatedRandomVectorGenerator.html">
    UncorrelatedRandomVectorGenerator</a> class simplifies this
    process by setting the mean and deviation of each component once and
    generating complete vectors. When the components are correlated however,
    generating them is much more difficult. The <a href="../apidocs/org/apache/commons/math3/random/CorrelatedRandomVectorGenerator.html">
    CorrelatedRandomVectorGenerator</a> class provides this service. In this
    case, the user must set up a complete covariance matrix instead of a simple
    standard deviations vector. This matrix gathers both the variance and the
    correlation information of the probability law.
    </p>
    
<p>
    The main use for correlated random vector generation is for Monte-Carlo
    simulation of physical problems with several variables, for example to
    generate error vectors to be added to a nominal vector. A particularly
    common case is when the generated vector should be drawn from a <a class="externalLink" href="http://en.wikipedia.org/wiki/Multivariate_normal_distribution">
    Multivariate Normal Distribution</a>.
    </p>
    
<p></p>
<dl>
    
<dt>Generating random vectors from a bivariate normal distribution</dt>
<dd>
    
<div class="source">
<pre>
// Create and seed a RandomGenerator (could use any of the generators in the random package here)
RandomGenerator rg = new JDKRandomGenerator();
rg.setSeed(17399225432l);  // Fixed seed means same results every time

// Create a GassianRandomGenerator using rg as its source of randomness
GaussianRandomGenerator rawGenerator = new GaussianRandomGenerator(rg);

// Create a CorrelatedRandomVectorGenerator using rawGenerator for the components
CorrelatedRandomVectorGenerator generator = 
    new CorrelatedRandomVectorGenerator(mean, covariance, 1.0e-12 * covariance.getNorm(), rawGenerator);

// Use the generator to generate correlated vectors
double[] randomVector = generator.nextVector();
... </pre></div>
    The <tt>mean</tt> argument is a double[] array holding the means of the random vector
    components.  In the bivariate case, it must have length 2.  The <tt>covariance</tt> argument
    is a RealMatrix, which needs to be 2 x 2.  The main diagonal elements are the
    variances of the vector components and the off-diagonal elements are the covariances.
    For example, if the means are 1 and 2 respectively, and the desired standard deviations
    are 3 and 4, respectively, then we need to use
    
<div class="source">
<pre>
double[] mean = {1, 2};
double[][] cov = {{9, c}, {c, 16}};
RealMatrix covariance = MatrixUtils.createRealMatrix(cov); </pre></div>
    where c is the desired covariance. If you are starting with a desired correlation,
    you need to translate this to a covariance by multiplying it by the product of the
    standard deviations.  For example, if you want to generate data that will give Pearson's
    R of 0.5, you would use c = 3 * 4 * .5 = 6.
    </dd></dl>
    
<p>
    In addition to multivariate normal distributions, correlated vectors from multivariate uniform
    distributions can be generated by creating a
    <a href="../apidocs/org/apache/commons/math3/random/UniformRandomGenerator.html">UniformRandomGenerator</a>
    in place of the 
    <tt>GaussianRandomGenerator</tt> above.  More generally, any
    <a href="../apidocs/org/apache/commons/math3/random/NormalizedRandomGenerator.html">NormalizedRandomGenerator</a>
    may be used.
    </p>
    
<p></p>
<dl>
    
<dt>Low discrepancy sequences</dt>
    
<dd>
    There exist several quasi-random sequences with the property that for all values of N, the subsequence
    x<sub>1</sub>, ..., x<sub>N</sub> has low discrepancy, which results in equi-distributed samples.
    While their quasi-randomness makes them unsuitable for most applications (i.e. the sequence of values
    is completely deterministic), their unique properties give them an important advantage for quasi-Monte Carlo simulations.<br />
    Currently, the following low-discrepancy sequences are supported:
    
<ul>
        
<li><a href="../apidocs/org/apache/commons/math3/random/SobolSequenceGenerator.html">Sobol sequence</a> (pre-configured up to dimension 1000)</li>
        
<li><a href="../apidocs/org/apache/commons/math3/random/HaltonSequenceGenerator.html">Halton sequence</a> (pre-configured up to dimension 40)</li>
    </ul>
    
<div class="source">
<pre>
// Create a Sobol sequence generator for 2-dimensional vectors
RandomVectorGenerator generator = new SobolSequence(2);

// Use the generator to generate vectors
double[] randomVector = generator.nextVector();
... </pre></div>
    The figure below illustrates the unique properties of low-discrepancy sequences when generating N samples
    in the interval [0, 1]. Roughly speaking, such sequences &quot;fill&quot; the respective space more evenly which leads to faster convergence in
    quasi-Monte Carlo simulations.<br />
    <img src="../images/userguide/low_discrepancy_sequences.png" alt="Comparison of low-discrepancy sequences" />
    </dd></dl>
    
    
<p></p>
</div>


<div class="section">
<h3><a name="a2.4_Random_Strings"></a>2.4 Random Strings</h3>
    
<p>
    The methods <tt>nextHexString</tt> and <tt>nextSecureHexString</tt>
    can be used to generate random strings of hexadecimal characters.  Both
    of these methods produce sequences of strings with good dispersion
    properties.  The difference between the two methods is that the second is
    cryptographically secure.  Specifically, the implementation of 
    <tt>nextHexString(n)</tt> in <tt>RandomDataGenerator</tt> uses the
    following simple algorithm to generate a string of <tt>n</tt> hex digits:
    </p>
<ol style="list-style-type: decimal">
    
<li>n/2+1 binary bytes are generated using the underlying RandomGenerator</li>
    
<li>Each binary byte is translated into 2 hex digits</li></ol>
    The <tt>RandomDataGenerator</tt> implementation of the &quot;secure&quot; version, 
    <tt>nextSecureHexString</tt> generates hex characters in 40-byte
    &quot;chunks&quot; using a 3-step process:
    
<ol style="list-style-type: decimal">
    
<li>20 random bytes are generated using the underlying 
    <tt>SecureRandom.</tt></li>
    
<li>SHA-1 hash is applied to yield a 20-byte binary digest.</li>
    
<li>Each byte of the binary digest is converted to 2 hex digits</li></ol>
    Similarly to the secure random number generation methods, 
    <tt>nextSecureHexString</tt> is <b>much slower</b> than
    the non-secure version.  It should be used only for applications such as 
    generating unique session or transaction ids where predictability of
    subsequent ids based on observation of previous values is a security
    concern.  If all that is needed is an even distribution of hex characters
    in the generated strings, the non-secure method should be used.        
    
</div>


<div class="section">
<h3><a name="a2.5_Random_permutations_combinations_sampling"></a>2.5 Random permutations, combinations, sampling</h3>
    
<p>
    To select a random sample of objects in a collection, you can use the
    <tt>nextSample</tt> method implemented by <tt>RandomDataGenerator</tt>.
    Specifically,  if <tt>c</tt> is a collection containing at least 
    <tt>k</tt> objects, and <tt>randomData</tt> is a 
    <tt>RandomDataGenerator</tt> instance <tt>randomData.nextSample(c, k)</tt>
    will return an <tt>object[]</tt> array of length <tt>k</tt>
    consisting of elements randomly selected from the collection.  If 
    <tt>c</tt> contains duplicate references, there may be duplicate
    references in the returned array; otherwise returned elements will be
    unique -- i.e., the sampling is without replacement among the object
    references in the collection. </p>
    
<p>
    If <tt>randomData</tt> is a <tt>RandomDataGenerator</tt> instance, and 
    <tt>n</tt> and <tt>k</tt> are integers with 
    <tt> k &lt;= n</tt>,  then 
    <tt>randomData.nextPermutation(n, k)</tt> returns an <tt>int[]</tt>
    array of length <tt>k</tt> whose whose entries are selected randomly, 
    without repetition, from the integers <tt>0</tt> through
    <tt>n-1</tt> (inclusive), i.e., 
    <tt>randomData.nextPermutation(n, k)</tt> returns a random
    permutation of  <tt>n</tt> taken <tt>k</tt> at a time.   
    </p>
</div>


<div class="section">
<h3><a name="a2.6_Generating_data_like_an_input_file"></a>2.6 Generating data 'like' an input file</h3>
    
<p>
    Using the <tt>ValueServer</tt> class, you can generate data based on
    the values in an input file in one of two ways:
    </p>
<dl>
      
<dt>Replay Mode</dt>
      
<dd> The following code will read data from <tt>url</tt> 
      (a <tt>java.net.URL</tt> instance), cycling through the values in the 
      file in sequence, reopening and starting at the beginning again when all 
      values have been read.
      
<div class="source">
<pre>
      ValueServer vs = new ValueServer();
      vs.setValuesFileURL(url); 
      vs.setMode(ValueServer.REPLAY_MODE);
      vs.resetReplayFile();
      double value = vs.getNext();
      // ...Generate and use more values...
      vs.closeReplayFile();
      </pre></div>
      The values in the file are not stored in memory, so it does not matter
      how large the file is, but you do need to explicitly close the file
      as above.  The expected file format is \n -delimited (i.e. one per line)
      strings representing valid floating point numbers.
      </dd>
      
<dt>Digest Mode</dt>
      
<dd>When used in Digest Mode, the ValueServer reads the entire input file
      and estimates a probability density function based on data from the file.
      The estimation method is essentially the 
      <a class="externalLink" href="http://nedwww.ipac.caltech.edu/level5/March02/Silverman/Silver2_6.html">
      Variable Kernel Method</a> with Gaussian smoothing.  Once the density
      has been estimated, <tt>getNext()</tt> returns random values whose
      probability distribution matches the empirical distribution -- i.e., if
      you generate a large number of such values, their distribution should
      &quot;look like&quot; the distribution of the values in the input file.  The values
      are not stored in memory in this case either, so there is no limit to the
      size of the input file.  Here is an example:
      
<div class="source">
<pre>
      ValueServer vs = new ValueServer();
      vs.setValuesFileURL(url); 
      vs.setMode(ValueServer.DIGEST_MODE);
      vs.computeDistribution(500); //Read file and estimate distribution using 500 bins
      double value = vs.getNext();
      // ...Generate and use more values...
      </pre></div>
      See the javadoc for <tt>ValueServer</tt> and 
      <tt>EmpiricalDistribution</tt> for more details.  Note that 
      <tt>computeDistribution()</tt> opens and closes the input file
       by itself. 
      </dd>
    </dl>
  
</div>


<div class="section">
<h3><a name="a2.7_PRNG_Pluggability"></a>2.7 PRNG Pluggability</h3>
  
<p>
      To enable alternative PRNGs to be &quot;plugged in&quot; to the commons-math data
      generation utilities and to provide a generic means to replace 
      <tt>java.util.Random</tt> in applications, a random generator 
      adaptor framework has been added to commons-math.  The
      <a href="../apidocs/org/apache/commons/math3/random/RandomGenerator.html">
      RandomGenerator</a> interface abstracts the public interface of
      <tt>java.util.Random</tt> and any implementation of this
      interface can be used as the source of random data for the commons-math 
      data generation classes.  An abstract base class, 
      <a href="../apidocs/org/apache/commons/math3/random/AbstractRandomGenerator.html">
      AbstractRandomGenerator</a> is provided to make implementation easier.
      This class provides default implementations of &quot;derived&quot; data generation
      methods based on the primitive,  <tt>nextDouble()</tt>.
      To support generic replacement of <tt>java.util.Random</tt>, the 
      <a href="../apidocs/org/apache/commons/math3/random/RandomAdaptor.html">
      RandomAdaptor</a> class is provided, which extends
      <tt>java.util.Random</tt> and wraps and delegates calls to
      a <tt>RandomGenerator</tt> instance.   
  </p>

      
<p>Commons-math provides by itself several implementations of the <a href="../apidocs/org/apache/commons/math3/random/RandomGenerator.html">
      RandomGenerator</a> interface:
      </p>
<ul>
        
<li><a href="../apidocs/org/apache/commons/math3/random/JDKRandomGenerator.html">JDKRandomGenerator</a>
            that extends the JDK provided generator</li>
        
<li><a href="../apidocs/org/apache/commons/math3/random/AbstractRandomGenerator.html">
            AbstractRandomGenerator</a> as a helper for users generators</li>
        
<li><a href="../apidocs/org/apache/commons/math3/random/BitStreamGenerator.html">
            BitStreamGenerator</a> which is an abstract class for several generators and
            which in turn is extended by:
            
<ul>
              
<li><a href="../apidocs/org/apache/commons/math3/random/MersenneTwister.html">MersenneTwister</a></li>
              
<li><a href="../apidocs/org/apache/commons/math3/random/Well512a.html">Well512a</a></li>
              
<li><a href="../apidocs/org/apache/commons/math3/random/Well1024a.html">Well1024a</a></li>
              
<li><a href="../apidocs/org/apache/commons/math3/random/Well19937a.html">Well19937a</a></li>
              
<li><a href="../apidocs/org/apache/commons/math3/random/Well19937c.html">Well19937c</a></li>
              
<li><a href="../apidocs/org/apache/commons/math3/random/Well44497a.html">Well44497a</a></li>
              
<li><a href="../apidocs/org/apache/commons/math3/random/Well44497b.html">Well44497b</a></li>
            </ul>
          </li>
        </ul>
      

      
<p>
      The JDK provided generator is a simple one that can be used only for very simple needs.
      The Mersenne Twister is a fast generator with very good properties well suited for
      Monte-Carlo simulation. It is equidistributed for generating vectors up to dimension 623
      and has a huge period: 2<sup>19937</sup> - 1 (which is a Mersenne prime). This generator
      is described in a paper by Makoto Matsumoto and Takuji Nishimura in 1998: <a class="externalLink" href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/ARTICLES/mt.pdf">Mersenne Twister:
      A 623-Dimensionally Equidistributed Uniform Pseudo-Random Number Generator</a>, ACM
      Transactions on Modeling and Computer Simulation, Vol. 8, No. 1, January 1998, pp 3--30.
      The WELL generators are a family of generators with period ranging from 2<sup>512</sup> - 1
      to 2<sup>44497</sup> - 1 (this last one is also a Mersenne prime) with even better properties
      than Mersenne Twister. These generators are described in a paper by Fran&#xe7;ois Panneton,
      Pierre L'Ecuyer and Makoto Matsumoto <a class="externalLink" href="http://www.iro.umontreal.ca/~lecuyer/myftp/papers/wellrng.pdf">Improved Long-Period
      Generators Based on Linear Recurrences Modulo 2</a> ACM Transactions on Mathematical Software,
      32, 1 (2006). The errata for the paper are in <a class="externalLink" href="http://www.iro.umontreal.ca/~lecuyer/myftp/papers/wellrng-errata.txt">wellrng-errata.txt</a>.
      </p>

      
<p>
      For simple sampling, any of these generators is sufficient. For Monte-Carlo simulations the
      JDK generator does not have any of the good mathematical properties of the other generators,
      so it should be avoided. The Mersenne twister and WELL generators have equidistribution properties
      proven according to their bits pool size which is directly linked to their period (all of them
      have maximal period, i.e. a generator with size n pool has a period 2<sup>n</sup>-1). They also
      have equidistribution properties for 32 bits blocks up to s/32 dimension where s is their pool size.
      So WELL19937c for exemple is equidistributed up to dimension 623 (19937/32). This means a Monte-Carlo
      simulation generating a vector of n variables at each iteration has some guarantees on the properties
      of the vector as long as its dimension does not exceed the limit. However, since we use bits from two
      successive 32 bits generated integers to create one double, this limit is smaller when the variables are
      of type double. so for Monte-Carlo simulation where less the 16 doubles are generated at each round,
      WELL1024 may be sufficient. If a larger number of doubles are needed a generator with a larger pool
      would be useful.
      </p>

      
<p>
      The WELL generators are more modern then MersenneTwister (the paper describing than has been published
      in 2006 instead of 1998) and fix some of its (few) drawbacks. If initialization array contains many
      zero bits, MersenneTwister may take a very long time (several hundreds of thousands of iterations to
      reach a steady state with a balanced number of zero and one in its bits pool). So the WELL generators
      are better to <i>escape zeroland</i> as explained by the WELL generators creators. The Well19937a and
      Well44497a generator are not maximally equidistributed (i.e. there are some dimensions or bits blocks
      size for which they are not equidistributed). The Well512a, Well1024a, Well19937c and Well44497b are
      maximally equidistributed for blocks size up to 32 bits (they should behave correctly also for double
      based on more than 32 bits blocks, but equidistribution is not proven at these blocks sizes).
      </p>

      
<p>
      The MersenneTwister generator uses a 624 elements integer array, so it consumes less than 2.5 kilobytes.
      The WELL generators use 6 integer arrays with a size equal to the pool size, so for example the
      WELL44497b generator uses about 33 kilobytes. This may be important if a very large number of
      generator instances were used at the same time.
      </p> 

      
<p>
      All generators are quite fast. As an example, here are some comparisons, obtained on a 64 bits JVM on a
      linux computer with a 2008 processor (AMD phenom Quad 9550 at 2.2 GHz). The generation rate for
      MersenneTwister was between 25 and 27 millions doubles per second (remember we generate two 32 bits integers for
      each double). Generation rates for other PRNG, relative to MersenneTwister:
      </p>

      
<p>
        </p>
<table class="bodyTable" border="1" align="center">
          
<tr class="a">
<td colspan="2"><font size="+1">Example of performances</font></td></tr>
          
<tr class="b"><font size="+1">
<td>Name</td>
<td>generation rate (relative to MersenneTwister)</td></font></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/random/MersenneTwister.html">MersenneTwister</a></td>
<td>1</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/random/JDKRandomGenerator.html">JDKRandomGenerator</a></td>
<td>between 0.96 and 1.16</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/random/Well512a.html">Well512a</a></td>
<td>between 0.85 and 0.88</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/random/Well1024a.html">Well1024a</a></td>
<td>between 0.63 and 0.73</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/random/Well19937a.html">Well19937a</a></td>
<td>between 0.70 and 0.71</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/random/Well19937c.html">Well19937c</a></td>
<td>between 0.57 and 0.71</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/random/Well44497a.html">Well44497a</a></td>
<td>between 0.69 and 0.71</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/random/Well44497b.html">Well44497b</a></td>
<td>between 0.65 and 0.71</td></tr>
        </table>
      

      
<p>
      So for most simulation problems, the better generators like <a href="../apidocs/org/apache/commons/math3/random/Well19937c.html">Well19937c</a> and <a href="../apidocs/org/apache/commons/math3/random/Well44497b.html">Well44497b</a> are probably very good choices.
      </p>

      
<p>
      Note that <i>none</i> of these generators are suitable for cryptography. They are devoted
      to simulation, and to generate very long series with strong properties on the series as a whole
      (equidistribution, no correlation ...). They do not attempt to create small series but with
      very strong properties of unpredictability as needed in cryptography.
      </p>

  
<p>
     Examples:
     </p>
<dl>
      
<dt>Create a RandomGenerator based on RngPack's Mersenne Twister</dt>
      
<dd>To create a RandomGenerator using the RngPack Mersenne Twister PRNG
       as the source of randomness, extend <tt>AbstractRandomGenerator</tt>
       overriding the derived methods that the RngPack implementation provides:
       
<div class="source">
<pre>
import edu.cornell.lassp.houle.RngPack.RanMT;
/**
 * AbstractRandomGenerator based on RngPack RanMT generator.
 */
public class RngPackGenerator extends AbstractRandomGenerator {
    
    private RanMT random = new RanMT();
    
    public void setSeed(long seed) {
       random = new RanMT(seed);
    }
    
    public double nextDouble() {
        return random.raw();
    }
    
    public double nextGaussian() {
        return random.gaussian();
    }
    
    public int nextInt(int n) {
        return random.choose(n);
    }
    
    public boolean nextBoolean() {
        return random.coin();
    }
}
      </pre></div>
      </dd>
      
<dt>Use the Mersenne Twister RandomGenerator in place of 
      <tt>java.util.Random</tt> in <tt>RandomData</tt></dt>
      
<dd>
      
<div class="source">
<pre>
RandomData randomData = new RandomDataImpl(new RngPackGenerator());
      </pre></div>
      </dd>
      
<dt>Create an adaptor instance based on the Mersenne Twister generator
      that can be used in place of a <tt>Random</tt></dt>
      
<dd>
      
<div class="source">
<pre>
 RandomGenerator generator = new RngPackGenerator();
 Random random = RandomAdaptor.createAdaptor(generator);
 // random can now be used in place of a Random instance, data generation
 // calls will be delegated to the wrapped Mersenne Twister
      </pre></div>
      </dd>
  </dl>
 
</div>

</div>



					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Linear Algebra</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a3_Linear_Algebra"></a>3 Linear Algebra</h2>
      
<div class="section">
<h3><a name="a3.1_Overview"></a>3.1 Overview</h3>
        
<p>
           Linear algebra support in commons-math provides operations on real matrices
           (both dense and sparse matrices are supported) and vectors. It features basic
           operations (addition, subtraction ...) and decomposition algorithms that can
           be used to solve linear systems either in exact sense and in least squares sense.
        </p>
      </div>
      
<div class="section">
<h3><a name="a3.2_Real_matrices"></a>3.2 Real matrices</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/linear/RealMatrix.html">
          RealMatrix</a> interface represents a matrix with real numbers as 
          entries.  The following basic matrix operations are supported:
          </p>
<ul>
          
<li>Matrix addition, subtraction, multiplication</li>
          
<li>Scalar addition and multiplication</li>
          
<li>transpose</li>
          
<li>Norm and Trace</li>
          
<li>Operation on a vector</li>
          </ul>   
        
        
<p>
         Example:
         </p>
<div class="source">
<pre>
// Create a real matrix with two rows and three columns, using a factory
// method that selects the implementation class for us.
double[][] matrixData = { {1d,2d,3d}, {2d,5d,3d}};
RealMatrix m = MatrixUtils.createRealMatrix(matrixData);

// One more with three rows, two columns, this time instantiating the
// RealMatrix implementation class directly.
double[][] matrixData2 = { {1d,2d}, {2d,5d}, {1d, 7d}};
RealMatrix n = new Array2DRowRealMatrix(matrixData2);

// Note: The constructor copies  the input double[][] array in both cases.

// Now multiply m by n
RealMatrix p = m.multiply(n);
System.out.println(p.getRowDimension());    // 2
System.out.println(p.getColumnDimension()); // 2

// Invert p, using LU decomposition
RealMatrix pInverse = new LUDecomposition(p).getSolver().getInverse();
         </pre></div>
        
        
<p>
        The three main implementations of the interface are <a href="../apidocs/org/apache/commons/math3/linear/Array2DRowRealMatrix.html">
        Array2DRowRealMatrix</a> and <a href="../apidocs/org/apache/commons/math3/linear/BlockRealMatrix.html">
        BlockRealMatrix</a> for dense matrices (the second one being more suited to
        dimensions above 50 or 100) and <a href="../apidocs/org/apache/commons/math3/linear/SparseRealMatrix.html">
        SparseRealMatrix</a> for sparse matrices.
        </p>
      </div>
      
<div class="section">
<h3><a name="a3.3_Real_vectors"></a>3.3 Real vectors</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/linear/RealVector.html">
          RealVector</a> interface represents a vector with real numbers as 
          entries.  The following basic matrix operations are supported:
          </p>
<ul>
          
<li>Vector addition, subtraction</li>
          
<li>Element by element multiplication, division</li>
          
<li>Scalar addition, subtraction, multiplication, division and power</li>
          
<li>Mapping of mathematical functions (cos, sin ...)</li>
          
<li>Dot product, outer product</li>
          
<li>Distance and norm according to norms L1, L2 and Linf</li>
          </ul>
        
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/linear/RealVectorFormat.html">
          RealVectorFormat</a> class handles input/output of vectors in a customizable
          textual format.
        </p>
      </div>
      
<div class="section">
<h3><a name="a3.4_Solving_linear_systems"></a>3.4 Solving linear systems</h3>
        
<p>
          The <tt>solve()</tt> methods of the <a href="../apidocs/org/apache/commons/math3/linear/DecompositionSolver.html">DecompositionSolver</a>
          interface support solving linear systems of equations of the form AX=B, either
          in linear sense or in least square sense. A <tt>RealMatrix</tt> instance is
          used to represent the coefficient matrix of the system. Solving the system is a
          two phases process: first the coefficient matrix is decomposed in some way and
          then a solver built from the decomposition solves the system. This allows to
          compute the decomposition and build the solver only once if several systems have
          to be solved with the same coefficient matrix.
        </p>
        
<p>
          For example, to solve the linear system
          </p>
<div>
<pre>
           2x + 3y - 2z = 1
           -x + 7y + 6x = -2
           4x - 3y - 5z = 1
          </pre></div>
          Start by decomposing the coefficient matrix A (in this case using LU decomposition)
          and build a solver
          
<div class="source">
<pre>
RealMatrix coefficients =
    new Array2DRowRealMatrix(new double[][] { { 2, 3, -2 }, { -1, 7, 6 }, { 4, -3, -5 } },
                       false);
DecompositionSolver solver = new LUDecomposition(coefficients).getSolver();
          </pre></div>
          Next create a <tt>RealVector</tt> array to represent the constant
          vector B and use <tt>solve(RealVector)</tt> to solve the system
          
<div class="source">
<pre>
RealVector constants = new ArrayRealVector(new double[] { 1, -2, 1 }, false);
RealVector solution = solver.solve(constants);
          </pre></div>
          The <tt>solution</tt> vector will contain values for x
          (<tt>solution.getEntry(0)</tt>), y (<tt>solution.getEntry(1)</tt>), 
          and z (<tt>solution.getEntry(2)</tt>) that solve the system.
        
        
<p>
          Each type of decomposition has its specific semantics and constraints on
          the coefficient matrix as shown in the following table. For algorithms that
          solve AX=B in least squares sense the value returned for X is such that the
          residual AX-B has minimal norm. Least Square sense means a solver can be computed
          for an overdetermined system, (i.e. a system with more equations than unknowns,
          which corresponds to a tall A matrix with more rows than columns). If an exact
          solution exist (i.e. if for some X the residual AX-B is exactly 0), then this
          exact solution is also the solution in least square sense. This implies that
          algorithms suited for least squares problems can also be used to solve exact
          problems, but the reverse is not true. In any case, if the matrix is singular
          within the tolerance set at construction, an error will be triggered when
          the solve method will be called, both for algorithms that compute exact solutions
          and for algorithms that compute least square solutions.
        </p>
        
<p>
          </p>
<table class="bodyTable" border="1" align="center">
          
<tr class="a">
<td colspan="3"><font size="+1">Decomposition algorithms</font></td></tr>
          
<tr class="b"><font size="+1">
<td>Name</td>
<td>coefficients matrix</td>
<td>problem type</td></font></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/linear/LUDecomposition.html">LU</a></td>
<td>square</td>
<td>exact solution only</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/linear/CholeskyDecomposition.html">Cholesky</a></td>
<td>symmetric positive definite</td>
<td>exact solution only</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/linear/QRDecomposition.html">QR</a></td>
<td>any</td>
<td>least squares solution</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/linear/EigenDecomposition.html">eigen decomposition</a></td>
<td>square</td>
<td>exact solution only</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/linear/SingularValueDecomposition.html">SVD</a></td>
<td>any</td>
<td>least squares solution</td></tr>
          </table>
        
        
<p>
          It is possible to use a simple array of double instead of a <tt>RealVector</tt>.
          In this case, the solution will be provided also as an array of double.
        </p>
        
<p>
          It is possible to solve multiple systems with the same coefficient matrix 
          in one method call.  To do this, create a matrix whose column vectors correspond 
          to the constant vectors for the systems to be solved and use <tt>solve(RealMatrix),</tt>
          which returns a matrix with column vectors representing the solutions.
        </p>
      </div>
      
<div class="section">
<h3><a name="a3.5_Eigenvalueseigenvectors_and_singular_valuessingular_vectors"></a>3.5 Eigenvalues/eigenvectors and singular values/singular vectors</h3>
        
<p>
          Decomposition algorithms may be used for themselves and not only for linear system solving.
          This is of prime interest with eigen decomposition and singular value decomposition.
        </p>
        
<p>
          The <tt>getEigenvalue()</tt>, <tt>getEigenvalues()</tt>, <tt>getEigenVector()</tt>,
          <tt>getV()</tt>, <tt>getD()</tt> and <tt>getVT()</tt> methods of the
          <tt>EigenDecomposition</tt> interface support solving eigenproblems of the form
          AX = lambda X where lambda is a real scalar.
        </p>
        
<p>The <tt>getSingularValues()</tt>, <tt>getU()</tt>, <tt>getS()</tt> and
        <tt>getV()</tt> methods of the <tt>SingularValueDecomposition</tt> interface
        allow to solve singular values problems of the form AXi = lambda Yi where lambda is a
        real scalar, and where the Xi and Yi vectors form orthogonal bases of their respective
        vector spaces (which may have different dimensions).
        </p>
      </div>
      
<div class="section">
<h3><a name="a3.6_Non-real_fields_complex_fractions_..."></a>3.6 Non-real fields (complex, fractions ...)</h3>
        
<p>
          In addition to the real field, matrices and vectors using non-real <a href="../apidocs/org/apache/commons/math3/FieldElement.html">field elements</a> can be used.
          The fields already supported by the library are:
          </p>
<ul>
            
<li><a href="../apidocs/org/apache/commons/math3/complex/Complex.html">Complex</a></li>
            
<li><a href="../apidocs/org/apache/commons/math3/fraction/Fraction.html">Fraction</a></li>
            
<li><a href="../apidocs/org/apache/commons/math3/fraction/BigFraction.html">BigFraction</a></li>
            
<li><a href="../apidocs/org/apache/commons/math3/util/BigReal.html">BigReal</a></li>
          </ul>
        
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Numerical Analysis</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
  
    <div class="section">
<h2><a name="a4_Numerical_Analysis"></a>4 Numerical Analysis</h2>
      
<div class="section">
<h3><a name="a4.1_Overview"></a>4.1 Overview</h3>
        
<p>
         The analysis package is the parent package for algorithms dealing with
         real-valued functions of one real variable. It contains dedicated sub-packages
         providing numerical root-finding, integration, interpolation and differentiation.
         It also contains a polynomials sub-package that considers polynomials with real
         coefficients as differentiable real functions.
        </p>
        
<p>
         Functions interfaces are intended to be implemented by user code to represent
         their domain problems. The algorithms provided by the library will then operate
         on these function to find their roots, or integrate them, or ... Functions can
         be multivariate or univariate, real vectorial or matrix valued, and they can be
         differentiable or not.
        </p>
      </div>
      
<div class="section">
<h3><a name="a4.2_Error_handling"></a>4.2 Error handling</h3>
        
<p>
          For user-defined functions, when the method encounters an error
          during evaluation, users must use their <i>own</i> unchecked exceptions.
          The following example shows the recommended way to do that, using root
          solving as the example (the same construct should be used for ODE
          integrators or for optimizations).
        </p>
        
<div class="source">
<pre>private static class LocalException extends RuntimeException {

   // the x value that caused the problem
   private final double x;

   public LocalException(double x) {
     this.x = x;
   }

   public double getX() {
     return x;
   }

 }

 private static class MyFunction implements UnivariateFunction {
   public double value(double x) {
     double y = hugeFormula(x);
     if (somethingBadHappens) {
       throw new LocalException(x);
     }
     return y;
   }
 }

 public void compute() {
   try {
     solver.solve(maxEval, new MyFunction(a, b, c), min, max);
   } catch (LocalException le) {
     // retrieve the x value
   }
 }
 </pre></div>
      
<p>
        As shown in this example the exception is really something local to user code
        and there is a guarantee Apache Commons Math will not mess with it.
        The user is safe.
      </p>
      </div>
      
<div class="section">
<h3><a name="a4.3_Root-finding"></a>4.3 Root-finding</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/analysis/solvers/UnivariateSolver.html">
          UnivariateSolver</a>, <a href="../apidocs/org/apache/commons/math3/analysis/solvers/UnivariateDifferentiableSolver.html">
          UnivariateDifferentiableSolver</a> and <a href="../apidocs/org/apache/commons/math3/analysis/solvers/PolynomialSolver.html">
          PolynomialSolver</a> provide means to find roots of
          <a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a>,
          <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateDifferentiable.html">differentiable univariate real-valued functions</a>,
          and <a href="../apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialFunction.html">polynomial functions</a> respectively.
          A root is the value where the function takes the value 0.  Commons-Math
          includes implementations of the several root-finding algorithms:
        </p>
          
<table class="bodyTable" border="1" align="center">
            
<tr class="a">
<td colspan="5"><font size="+1">Root solvers</font></td></tr>
            
<tr class="b"><font size="+1">
<td>Name</td>
<td>Function type</td>
<td>Convergence</td>
<td>Needs initial bracketing</td>
<td>Bracket side selection</td></font></tr>
            
<tr class="a">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/BisectionSolver.html">Bisection</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>linear, guaranteed</td>
              
<td>yes</td>
              
<td>yes</td>
            </tr>
            
<tr class="b">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/BrentSolver.html">Brent-Dekker</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>super-linear, guaranteed</td>
              
<td>yes</td>
              
<td>no</td>
            </tr>
            
<tr class="a">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/BracketingNthOrderBrentSolver.html">bracketing n<sup>th</sup> order Brent</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>variable order, guaranteed</td>
              
<td>yes</td>
              
<td>yes</td>
            </tr>
            
<tr class="b">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/IllinoisSolver.html">Illinois Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>super-linear, guaranteed</td>
              
<td>yes</td>
              
<td>yes</td>
            </tr>
            
<tr class="a">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/LaguerreSolver.html">Laguerre's Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialFunction.html">polynomial functions</a></td>
              
<td>cubic for simple root, linear for multiple root</td>
              
<td>yes</td>
              
<td>no</td>
            </tr>
            
<tr class="b">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/MullerSolver.html">Muller's Method</a> using bracketing to deal with real-valued functions</td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>quadratic close to roots</td>
              
<td>yes</td>
              
<td>no</td>
            </tr>
            
<tr class="a">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/MullerSolver2.html">Muller's Method</a> using modulus to deal with real-valued functions</td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>quadratic close to root</td>
              
<td>yes</td>
              
<td>no</td>
            </tr>
            
<tr class="b">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/NewtonRaphsonSolver.html">Newton-Raphson's Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateDifferentiableFunction.html">differentiable univariate real-valued functions</a></td>
              
<td>quadratic, non-guaranteed</td>
              
<td>no</td>
              
<td>no</td>
            </tr>
            
<tr class="a">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/PegasusSolver.html">Pegasus Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>super-linear, guaranteed</td>
              
<td>yes</td>
              
<td>yes</td>
            </tr>
            
<tr class="b">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/RegulaFalsiSolver.html">Regula Falsi (false position) Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>linear, guaranteed</td>
              
<td>yes</td>
              
<td>yes</td>
            </tr>
            
<tr class="a">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/RiddersSolver.html">Ridder's Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>super-linear</td>
              
<td>yes</td>
              
<td>no</td>
            </tr>
            
<tr class="b">
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/solvers/SecantSolver.html">Secant Method</a></td>
              
<td><a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">univariate real-valued functions</a></td>
              
<td>super-linear, non-guaranteed</td>
              
<td>yes</td>
              
<td>no</td>
            </tr>
          </table>
        
<p>
          Some algorithms require that the initial search interval brackets the root
          (i.e. the function values at interval end points have opposite signs).  Some
          algorithms preserve bracketing throughout computation and allow user to
          specify which side of the convergence interval to select as the root.  It is
          also possible to force a side selection after a root has been found even
          for algorithms that do not provide this feature by themselves.  This is
          useful for example in sequential search, for which a new search interval is
          started after a root has been found in order to find the next root.  In this
          case, user must select a side to ensure his loop is not stuck on one root
          and always return the same solution without making any progress.
        </p>
        
<p>
          There are numerous non-obvious traps and pitfalls in root finding.
          First, the usual disclaimers due to the way real world computers
          calculate values apply.  If the computation of the function provides
          numerical instabilities, for example due to bit cancellation, the root
          finding algorithms may behave badly and fail to converge or even
          return bogus values. There will not necessarily be an indication that
          the computed root is way off the true value.  Secondly, the root finding
          problem itself may be inherently ill-conditioned.  There is a
          &quot;domain of indeterminacy&quot;, the interval for which the function has
          near zero absolute values around the true root,  which may be large.
          Even worse, small problems like roundoff error may cause the function
          value to &quot;numerically oscillate&quot; between negative and positive values.
          This may again result in roots way off the true value, without
          indication.  There is not much a generic algorithm can do if
          ill-conditioned problems are met.  A way around this is to transform
          the problem in order to get a better conditioned function.  Proper 
          selection of a root-finding algorithm and its configuration parameters
          requires knowledge of the analytical properties of the function under
          analysis and numerical analysis techniques.  Users are encouraged
          to consult a numerical analysis text (or a numerical analyst) when
          selecting and configuring a solver.
        </p>
        
<p>
          In order to use the root-finding features, first a solver object must
          be created by calling its constructor, often providing relative and absolute
          accuracy. Using a solver object, roots of functions
          are easily found using the <tt>solve</tt> methods.  These methods takes
          a maximum iteration count <tt>maxEval</tt>, a function <tt>f</tt>,
          and either two domain values, <tt>min</tt> and <tt>max</tt>, or a
          <tt>startValue</tt> as parameters. If the maximal number of iterations
          count is exceeded, non-convergence is assumed and a <tt>ConvergenceException</tt>
          exception is thrown.  A suggested value is 100, which should be plenty, given that a
          bisection algorithm can't get any more accurate after 52 iterations because of the
          number of mantissa bits in a double precision floating point number. If a number of
          ill-conditioned problems is to be solved, this number can be decreased in order
          to avoid wasting time.
          <a href="../apidocs/org/apache/commons/math3/analysis/solvers/BracketedUnivariateSolver.html">Bracketed
          solvers</a> also take an <a href="../apidocs/org/apache/commons/math3/analysis/solvers/AllowedSolution.html">allowed solution</a>
          enum parameter to specify which side of the final convergence interval should be
          selected as the root. It can be <tt>ANY_SIDE</tt>, <tt>LEFT_SIDE</tt>, <tt>RIGHT_SIDE</tt>,
          <tt>BELOW_SIDE</tt> or <tt>ABOVE_SIDE</tt>. Left and right are used to specify the root along
          the function parameter axis while below and above refer to the function value axis. The solve methods
          compute a value <tt>c</tt> such that:
          </p>
<ul>
            
<li><tt>f(c) = 0.0</tt> (see &quot;function value accuracy&quot;)</li>
            
<li><tt>min &lt;= c &lt;= max</tt> (except for the secant method, which may find a solution outside the interval)</li>
          </ul>
        
        
<p>
          Typical usage:
        </p>
        
<div class="source">
<pre>UnivariateFunction function = // some user defined function object
final double relativeAccuracy = 1.0e-12;
final double absoluteAccuracy = 1.0e-8;
final int    maxOrder         = 5;
UnivariateSolver solver   = new BracketingNthOrderBrentSolver(relativeAccuracy, absoluteAccuracy, maxOrder);
double c = solver.solve(100, function, 1.0, 5.0, AllowedSolution.LEFT_SIDE);</pre></div>
        
<p>
          Force bracketing, by refining a base solution found by a non-bracketing solver:
        </p>
        
<div class="source">
<pre>UnivariateFunction function = // some user defined function object
final double relativeAccuracy = 1.0e-12;
final double absoluteAccuracy = 1.0e-8;
UnivariateSolver nonBracketing = new BrentSolver(relativeAccuracy, absoluteAccuracy);
double baseRoot = nonBracketing.solve(100, function, 1.0, 5.0);
double c = UnivariateSolverUtils.forceSide(100, function,
                                           new PegasusSolver(relativeAccuracy, absoluteAccuracy),
                                           baseRoot, 1.0, 5.0, AllowedSolution.LEFT_SIDE);
</pre></div>
        
<p>
          The <tt>BrentSolver</tt> uses the Brent-Dekker algorithm which is
          fast and robust.  If there are multiple roots in the interval,
          or there is a large domain of indeterminacy, the
          algorithm will converge to a random root in the interval without
          indication that there are problems.  Interestingly, the examined text
          book implementations all disagree in details of the convergence
          criteria.  Also each implementation had problems for one of the test
          cases, so the expressions had to be fudged further. Don't expect to
          get exactly the same root values as for other implementations of this
          algorithm.
        </p>
        
<p>
          The <tt>BracketingNthOrderBrentSolver</tt> uses an extension of the
          Brent-Dekker algorithm which uses inverse n<sup>th</sup> order polynomial
          interpolation instead of inverse quadratic interpolation, and which allows
          selection of the side of the convergence interval for result bracketing.
          This is now the recommended algorithm for most users since it has the
          largest order, doesn't require derivatives, has guaranteed convergence
          and allows result bracket selection.
        </p>
        
<p>
          The <tt>SecantSolver</tt> uses a straightforward secant
          algorithm which does not bracket the search and therefore does not
          guarantee convergence.  It may be faster than Brent on some well-behaved
          functions.
        </p>
        
<p>
          The <tt>RegulaFalsiSolver</tt> is variation of secant preserving
          bracketing, but then it may be slow, as one end point of the search interval
          will become fixed after and only the other end point will converge to the root,
          hence resulting in a search interval size that does not decrease to zero.
        </p>
        
<p>
          The <tt>IllinoisSolver</tt> and <tt>PegasusSolver</tt> are
          well-known variations of regula falsi that fix the problem of stuck
          end points by slightly weighting one endpoint to balance the interval
          at next iteration. Pegasus is often faster than Illinois. Pegasus may
          be the algorithm of choice for selecting a specific side of the convergence
          interval.
        </p>
        
<p>
          The <tt>BisectionSolver</tt> is included for completeness and for
          establishing a fall back in cases of emergency.  The algorithm is
          simple, most likely bug free and guaranteed to converge even in very
          adverse circumstances which might cause other algorithms to
          malfunction.  The drawback is of course that it is also guaranteed
          to be slow.
        </p>
        
<p>
          The <tt>UnivariateSolver</tt> interface exposes many
          properties to control the convergence of a solver.  The accuracy properties
          are set at solver instance creation and cannot be changed afterwards,
          there are only getters to retriveve their values, no setters are available.
          </p>
<table border="0" class="bodyTable">
            
<tr class="a">
<th>Property</th>
<th>Purpose</th></tr>
            
<tr class="b">
              
<td>Absolute accuracy</td>
              
<td>
                The Absolute Accuracy is (estimated) maximal difference between
                the computed root and the true root of the function.  This is
                what most people think of as &quot;accuracy&quot; intuitively.  The default
                value is chosen as a sane value for most real world problems,
                for roots in the range from -100 to +100.  For accurate
                computation of roots near zero, in the range form -0.0001 to
                 +0.0001, the value may be decreased.  For computing roots
                much larger in absolute value than 100, the default absolute
                accuracy may never be reached because the given relative
                accuracy is reached first.  
              </td>
            </tr>
              
<tr class="a">
              
<td>Relative accuracy</td>
              
<td>
                The Relative Accuracy is the maximal difference between the
                computed root and the true root, divided by the maximum of the
                absolute values of the numbers. This accuracy measurement is
                better suited for numerical calculations with computers, due to
                the way floating point numbers are represented.  The default
                value is chosen so that algorithms will get a result even for
                roots with large absolute values, even while it may be
                impossible to reach the given absolute accuracy.
              </td>
            </tr>
            
<tr class="b">
              
<td>Function value accuracy</td>
              
<td>
                This value is used by some algorithms in order to prevent
                numerical instabilities. If the function is evaluated to an
                absolute value smaller than the Function Value Accuracy, the
                algorithms assume they hit a root and return the value
                immediately.  The default value is a &quot;very small value&quot;.  If the
                goal is to get a near zero function value rather than an accurate
                root, computation may be sped up by setting this value
                appropriately.
              </td>
            </tr>
          </table>
        
      </div>
      
<div class="section">
<h3><a name="a4.4_Interpolation"></a>4.4 Interpolation</h3>
        
<p>
          A <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/UnivariateInterpolator.html">
          UnivariateInterpolator</a> is used to find a univariate real-valued
          function <tt>f</tt> which for a given set of ordered pairs 
          (<tt>x<sub>i</sub></tt>,<tt>y<sub>i</sub></tt>) yields
          <tt>f(x<sub>i</sub>)=y<sub>i</sub></tt> to the best accuracy possible. The result
          is provided as an object implementing the <a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">
          UnivariateFunction</a> interface. It can therefore be evaluated at any point,
          including point not belonging to the original set.
          Currently, only an interpolator for generating natural cubic splines and a polynomial
          interpolator are available.  There is no interpolator factory, mainly because the
          interpolation algorithm is more determined by the kind of the interpolated function
          rather than the set of points to interpolate.
          There aren't currently any accuracy controls either, as interpolation
          accuracy is in general determined by the algorithm. 
        </p>
        
<p>Typical usage:</p>
        
<div class="source">
<pre>double x[] = { 0.0, 1.0, 2.0 };
double y[] = { 1.0, -1.0, 2.0};
UnivariateInterpolator interpolator = new SplineInterpolator();
UnivariateFunction function = interpolator.interpolate(x, y);
double interpolationX = 0.5;
double interpolatedY = function.value(x);
System.out println(&quot;f(&quot; + interpolationX + &quot;) = &quot; + interpolatedY);</pre></div>
        
<p>
          A natural cubic spline is a function consisting of a polynomial of
          third degree for each subinterval determined by the x-coordinates of the
          interpolated points.  A function interpolating <tt>N</tt>
          value pairs consists of <tt>N-1</tt> polynomials. The function
          is continuous, smooth and can be differentiated twice.  The second
          derivative is continuous but not smooth.  The x values passed to the
          interpolator must be ordered in ascending order.  It is not valid to
          evaluate the function for values outside the range 
          <tt>x<sub>0</sub></tt>..<tt>x<sub>N</sub></tt>.
        </p>
        
<p>
          The polynomial function returned by the Neville's algorithm is a single
          polynomial guaranteed to pass exactly through the interpolation points.
          The degree of the polynomial is the number of points minus 1 (i.e. the
          interpolation polynomial for a three points set will be a quadratic
          polynomial). Despite the fact the interpolating polynomials is a perfect
          approximation of a function at interpolation points, it may be a loose
          approximation between the points. Due to <a class="externalLink" href="http://en.wikipedia.org/wiki/Runge&apos;s_phenomenon">Runge's phenomenom</a>
          the error can get worse as the degree of the polynomial increases, so
          adding more points does not always lead to a better interpolation.
        </p>
        
<p>
          Loess (or Lowess) interpolation is a robust interpolation useful for
          smoothing univariate scaterplots. It has been described by William
          Cleveland in his 1979 seminal paper <a class="externalLink" href="http://www.math.tau.ac.il/~yekutiel/MA%20seminar/Cleveland%201979.pdf">Robust
          Locally Weighted Regression and Smoothing Scatterplots</a>. This kind of
          interpolation is computationally intensive but robust.
        </p>
        
<p>
          Microsphere interpolation is a robust multidimensional interpolation algorithm.
          It has been described in William Dudziak's <a class="externalLink" href="http://www.dudziak.com/microsphere.pdf">MS thesis</a>.
        </p>
        
<p>
          <a class="externalLink" href="http://en.wikipedia.org/wiki/Hermite_interpolation">Hermite interpolation</a>
          is an interpolation method that can use derivatives in addition to function values at sample points. The <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/HermiteInterpolator.html">HermiteInterpolator</a>
          class implements this method for vector-valued functions. The sampling points can have any spacing (there are
          no requirements for a regular grid) and some points may provide derivatives while others don't provide them
          (or provide derivatives to a smaller order). Points are added one at a time, as shown in the following example:
        </p>
        
<div class="source">
<pre>HermiteInterpolator interpolator = new HermiteInterpolator;
// at x = 0, we provide both value and first derivative
interpolator.addSamplePoint(0.0, new double[] { 1.0 }, new double[] { 2.0 });
// at x = 1, we provide only function value
interpolator.addSamplePoint(1.0, new double[] { 4.0 });
// at x = 2, we provide both value and first derivative
interpolator.addSamplePoint(2.0, new double[] { 5.0 }, new double[] { 2.0 });
// should print &quot;value at x = 0.5: 2.5625&quot;
System.out.println(&quot;value at x = 0.5: &quot; + interpolator.value(0.5)[0]);
// should print &quot;derivative at x = 0.5: 3.5&quot;
System.out.println(&quot;derivative at x = 0.5: &quot; + interpolator.derivative(0.5)[0]);
// should print &quot;interpolation polynomial: 1 + 2 x + 4 x^2 - 4 x^3 + x^4&quot;
System.out.println(&quot;interpolation polynomial: &quot; + interpolator.getPolynomials()[0]);</pre></div>
        
<p>
          A <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/BivariateGridInterpolator.html">
          BivariateGridInterpolator</a> is used to find a bivariate real-valued
          function <tt>f</tt> which for a given set of tuples
          (<tt>x<sub>i</sub></tt>,<tt>y<sub>j</sub></tt>,<tt>f<sub>ij</sub></tt>)
          yields <tt>f(x<sub>i</sub>,y<sub>j</sub>)=f<sub>ij</sub></tt> to the best accuracy
          possible. The result is provided as an object implementing the
          <a href="../apidocs/org/apache/commons/math3/analysis/BivariateFunction.html">
          BivariateFunction</a> interface. It can therefore be evaluated at any point,
          including a point not belonging to the original set.
          The arrays <tt>x<sub>i</sub></tt> and <tt>y<sub>j</sub></tt> must be
          sorted in increasing order in order to define a two-dimensional grid.
        </p>
        
<p>
          In <a class="externalLink" href="http://en.wikipedia.org/wiki/Bicubic_interpolation">bicubic interpolation</a>,
          the interpolation function is a 3rd-degree polynomial of two variables. The coefficients
          are computed from the function values sampled on a grid, as well as the values of the
          partial derivatives of the function at those grid points.
          From two-dimensional data sampled on a grid, the
          <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/BicubicSplineInterpolator.html">
          BicubicSplineInterpolator</a> computes a
          <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/BicubicSplineInterpolatingFunction.html">
          bicubic interpolating function</a>.
          Prior to computing an interpolating function, the
          <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/SmoothingPolynomialBicubicSplineInterpolator.html">
          SmoothingPolynomialBicubicSplineInterpolator</a> class performs smoothing of
          the data by computing the polynomial that best fits each of the one-dimensional
          curves along each of the coordinate axes.
        </p>
        
<p>
          A <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/TrivariateGridInterpolator.html">
          TrivariateGridInterpolator</a> is used to find a trivariate real-valued
          function <tt>f</tt> which for a given set of tuples
          (<tt>x<sub>i</sub></tt>,<tt>y<sub>j</sub></tt>,<tt>z<sub>k</sub></tt>,
          <tt>f<sub>ijk</sub></tt>)
          yields <tt>f(x<sub>i</sub>,y<sub>j</sub>,z<sub>k</sub>)=f<sub>ijk</sub></tt>
          to the best accuracy possible. The result is provided as an object implementing the
          <a href="../apidocs/org/apache/commons/math3/analysis/TrivariateFunction.html">
          TrivariateFunction</a> interface. It can therefore be evaluated at any point,
          including a point not belonging to the original set.
          The arrays <tt>x<sub>i</sub></tt>, <tt>y<sub>j</sub></tt> and
          <tt>z<sub>k</sub></tt> must be sorted in increasing order in order to define
          a three-dimensional grid.
        </p>
        
<p>
          In <a class="externalLink" href="http://en.wikipedia.org/wiki/Tricubic_interpolation">tricubic interpolation</a>,
          the interpolation function is a 3rd-degree polynomial of three variables. The coefficients
          are computed from the function values sampled on a grid, as well as the values of the
          partial derivatives of the function at those grid points.
          From three-dimensional data sampled on a grid, the
          <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/TricubicSplineInterpolator.html">
          TricubicSplineInterpolator</a> computes a
          <a href="../apidocs/org/apache/commons/math3/analysis/interpolation/TricubicSplineInterpolatingFunction.html">
          tricubic interpolating function</a>.
        </p>
      </div>
      
<div class="section">
<h3><a name="a4.5_Integration"></a>4.5 Integration</h3>
        
<p>
          A <a href="../apidocs/org/apache/commons/math3/analysis/integration/UnivariateIntegrator.html">
          UnivariateIntegrator</a> provides the means to numerically integrate
          <a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">
          univariate real-valued functions</a>.
          Commons-Math includes implementations of the following integration algorithms: </p>
<ul>
          
<li><a href="../apidocs/org/apache/commons/math3/analysis/integration/RombergIntegrator.html">
          Romberg's method</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/analysis/integration/SimpsonIntegrator.html">
          Simpson's method</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/analysis/integration/TrapezoidIntegrator.html">
          trapezoid method</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/analysis/integration/LegendreGaussIntegrator.html">
          Legendre-Gauss method</a></li>
          </ul>      
        
      </div>
      
<div class="section">
<h3><a name="a4.6_Polynomials"></a>4.6 Polynomials</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/analysis/polynomials/package-summary.html">
          org.apache.commons.math3.analysis.polynomials</a> package provides real
          coefficients polynomials.
        </p>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialFunction.html">
          PolynomialFunction</a> class is the most general one, using traditional
          coefficients arrays. The
          <a href="../apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialsUtils.html">
          PolynomialsUtils</a> utility class provides static factory methods to build
          Chebyshev, Hermite, Jacobi, Laguerre and Legendre polynomials. Coefficients are
          computed using exact fractions so these factory methods can build polynomials
          up to any degree.
        </p>
      </div>
      
<div class="section">
<h3><a name="a4.7_Differentiation"></a>4.7 Differentiation</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/package-summary.html">
          org.apache.commons.math3.analysis.differentiation</a> package provides a general-purpose
          differentiation framework.
        </p>
        
<p>
          The core class is <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/DerivativeStructure.html">
          DerivativeStructure</a> which holds the value and the differentials of a function. This class
          handles some arbitrary number of free parameters and arbitrary derivation order. It is used
          both as the input and the output type for the <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateDifferentiableFunction.html">
          UnivariateDifferentiableFunction</a> interface. Any differentiable function should implement this
          interface.
        </p>
        
<p>
          The main idea behind the <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/DerivativeStructure.html">
          DerivativeStructure</a> class is that it can be used almost as a number (i.e. it can be added,
          multiplied, its square root can be extracted or its cosine computed... However, in addition to
          computed the value itself when doing these computations, the partial derivatives are also computed
          alongside. This is an extension of what is sometimes called Rall's numbers. This extension is
          described in Dan Kalman's paper <a class="externalLink" href="http://www1.american.edu/cas/mathstat/People/kalman/pdffiles/mmgautodiff.pdf">Doubly Recursive
          Multivariate Automatic Differentiation</a>, Mathematics Magazine, vol. 75, no. 3, June 2002.
          Rall's numbers only hold the first derivative with respect to one free parameter whereas Dan Kalman's
          derivative structures hold all partial derivatives up to any specified order, with respect to any
          number of free parameters. Rall's numbers therefore can be seen as derivative structures for order
          one derivative and one free parameter, and primitive real numbers can be seen as derivative structures
          with zero order derivative and no free parameters.
        </p>
        
<p>
          The workflow of computation of a derivatives of an expression <tt>y=f(x)</tt> is the following
          one. First we configure an input parameter <tt>x</tt> of type <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/DerivativeStructure.html">
          DerivativeStructure</a> so it will drive the function to compute all derivatives up to order 3 for
          example. Then we compute <tt>y=f(x)</tt> normally by passing this parameter to the f function.At
          the end, we extract from <tt>y</tt> the value and the derivatives we want. As we have specified
          3<sup>rd</sup> order when we built <tt>x</tt>, we can retrieve the derivatives up to 3<sup>rd</sup>
          order from <tt>y</tt>. The following example shows that (the 0 parameter in the DerivativeStructure
          constructor will be explained in the next paragraph):
       </p>
       
<div class="source">
<pre>int params = 1;
int order = 3;
double xRealValue = 2.5;
DerivativeStructure x = new DerivativeStructure(params, order, 0, xRealValue);
DerivativeStructure y = f(x);
System.out.println(&quot;y    = &quot; + y.getValue();
System.out.println(&quot;y'   = &quot; + y.getPartialDerivative(1);
System.out.println(&quot;y''  = &quot; + y.getPartialDerivative(2);
System.out.println(&quot;y''' = &quot; + y.getPartialDerivative(3);</pre></div>
       
<p>
         In fact, there are no notions of <i>variables</i> in the framework, so neither <tt>x</tt>
         nor <tt>y</tt> are considered to be variables per se. They are both considered to be
         <i>functions</i> and to depend on implicit free parameters which are represented only by
         indices in the framework. The <tt>x</tt> instance above is there considered by the framework
         to be a function of free parameter <tt>p0</tt> at index 0, and as <tt>y</tt> is
         computed from <tt>x</tt> it is the result of a functions composition and is therefore also
         a function of this <tt>p0</tt> free parameter. The <tt>p0</tt> is not represented by itself,
         it is simply defined implicitely by the 0 index above. This index is the third argument in the
         constructor of the <tt>x</tt> instance. What this constructor means is that we built
         <tt>x</tt> as a function that depends on one free parameter only (first constructor argument
         set to 1), that can be differentiated up to order 3 (second constructor argument set to 3), and
         which correspond to an identity function with respect to implicit free parameter number 0 (third
         constructor argument set to 0), with current value equal to 2.5 (fourth constructor argument set
         to 2.5). This specific constructor defines identity functions, and identity functions are the trick
         we use to represent variables (there are of course other constructors, for example to build constants
         or functions from all their derivatives if they are known beforehand). From the user point of view,
         the <tt>x</tt> instance can be seen as the <tt>x</tt> variable, but it is really the identity
         function applied to free parameter number 0. As the identity function, it has the same value as its
         parameter, its first derivative is 1.0 with respect to this free parameter, and all its higher order
         derivatives are 0.0. This can be checked by calling the getValue() or getPartialDerivative() methods
         on <tt>x</tt>.
       </p>
       
<p>
         When we compute <tt>y</tt> from this setting, what we really do is chain <tt>f</tt> after the
         identity function, so the net result is that the derivatives are computed with respect to the indexed
         free parameters (i.e. only free parameter number 0 here since there is only one free parameter) of the
         identity function x. Going one step further, if we compute <tt>z = g(y)</tt>, we will also compute
         <tt>z</tt> as a function of the initial free parameter. The very important consequence is that
         if we call <tt>z.getPartialDerivative(1)</tt>, we will not get the first derivative of <tt>g</tt>
         with respect to <tt>y</tt>, but with respect to the free parameter <tt>p0</tt>: the derivatives
         of g and f <i>will</i> be chained together automatically, without user intervention.
       </p>
       
<p>
         This design choice is a very classical one in many algorithmic differentiation frameworks, either
         based on operator overloading (like the one we implemented here) or based on code generation. It implies
         the user has to <i>bootstrap</i> the system by providing initial derivatives, and this is essentially
         done by setting up identity function, i.e. functions that represent the variables themselves and have
         only unit first derivative.
       </p>
       
<p>
         This design also allow a very interesting feature which can be explained with the following example.
         Suppose we have a two arguments function <tt>f</tt> and a one argument function <tt>g</tt>. If
         we compute <tt>g(f(x, y))</tt> with <tt>x</tt> and <tt>y</tt> be two variables, we
         want to be able to compute the partial derivatives <tt>dg/dx</tt>, <tt>dg/dy</tt>,
         <tt>d2g/dx2</tt> <tt>d2g/dxdy</tt> <tt>d2g/dy2</tt>. This does make sense since we combined
         the two functions, and it does make sense despite g is a one argument function only. In order to do
         this, we simply set up <tt>x</tt> as an identity function of an implicit free parameter
         <tt>p0</tt> and <tt>y</tt> as an identity function of a different implicit free parameter
         <tt>p1</tt> and compute everything directly. In order to be able to combine everything, however,
         both <tt>x</tt> and <tt>y</tt> must be built with the appropriate dimensions, so they will both
         be declared to handle two free parameters, but <tt>x</tt> will depend only on parameter 0 while
         <tt>y</tt> will depend on parameter 1. Here is how we do this (note that
         <tt>getPartialDerivative</tt> is a variable arguments method which take as arguments the derivation
         order with respect to all free parameters, i.e. the first argument is derivation order with respect to
         free parameter 0 and the second argument is derivation order with respect to free parameter 1):
       </p>
       
<div class="source">
<pre>int params = 2;
int order = 2;
double xRealValue =  2.5;
double yRealValue = -1.3;
DerivativeStructure x = new DerivativeStructure(params, order, 0, xRealValue);
DerivativeStructure y = new DerivativeStructure(params, order, 1, yRealValue);
DerivativeStructure f = DerivativeStructure.hypot(x, y);
DerivativeStructure g = f.log();
System.out.println(&quot;g        = &quot; + g.getValue();
System.out.println(&quot;dg/dx    = &quot; + g.getPartialDerivative(1, 0);
System.out.println(&quot;dg/dy    = &quot; + g.getPartialDerivative(0, 1);
System.out.println(&quot;d2g/dx2  = &quot; + g.getPartialDerivative(2, 0);
System.out.println(&quot;d2g/dxdy = &quot; + g.getPartialDerivative(1, 1);
System.out.println(&quot;d2g/dy2  = &quot; + g.getPartialDerivative(0, 2);</pre></div>
       
<p>
          There are several ways a user can create an implementation of the <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateDifferentiableFunction.html">
          UnivariateDifferentiableFunction</a> interface. The first method is to simply write it directly using
          the appropriate methods from <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/DerivativeStructure.html">
          DerivativeStructure</a> to compute addition, subtraction, sine, cosine... This is often quite
          straigthforward and there is no need to remember the rules for differentiation: the user code only
          represent the function itself, the differentials will be computed automatically under the hood. The
          second method is to write a classical <a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">UnivariateFunction</a> and to
          pass it to an existing implementation of the <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateFunctionDifferentiator.html">
          UnivariateFunctionDifferentiator</a> interface to retrieve a differentiated version of the same function.
          The first method is more suited to small functions for which user already control all the underlying code.
          The second method is more suited to either large functions that would be cumbersome to write using the
          <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/DerivativeStructure.html">
          DerivativeStructure</a> API, or functions for which user does not have control to the full underlying code
          (for example functions that call external libraries).
        </p>
        
<p>
          Apache Commons Math provides one implementation of the <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateFunctionDifferentiator.html">
          UnivariateFunctionDifferentiator</a> interface: <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/FiniteDifferencesDifferentiator.html">
          FiniteDifferencesDifferentiator</a>. This class creates a wrapper that will call the user-provided function
          on a grid sample and will use finite differences to compute the derivatives. It takes care of boundaries
          if the variable is not defined on the whole real line. It is possible to use more points than strictly
          required by the derivation order (for example one can specify an 8-points scheme to compute first
          derivative only). However, one must be aware that tuning the parameters for finite differences is
          highly problem-dependent. Choosing the wrong step size or the wrong number of sampling points can lead
          to huge errors. Finite differences are also not well suited to compute high order derivatives. Here is
          an example on how this implementation can be used:
        </p>
       
<div class="source">
<pre>// function to be differentiated
UnivariateFunction basicF = new UnivariateFunction() {
                                public double value(double x) {
                                    return x * FastMath.sin(x);
                                }
                            });

// create a differentiator using 5 points and 0.01 step
FiniteDifferencesDifferentiator differentiator =
    new FiniteDifferencesDifferentiator(5, 0.01);

// create a new function that computes both the value and the derivatives
// using DerivativeStructure
UnivariateDifferentiableFunction completeF = differentiator.differentiate(basicF);

// now we can compute display the value and its derivatives
// here we decided to display up to second order derivatives,
// because we feed completeF with order 2 DerivativeStructure instances
for (double x = -10; x &lt; 10; x += 0.1) {
    DerivativeStructure xDS = new DerivativeStructure(1, 2, 0, x);
    DerivativeStructure yDS = f.value(xDS);
    System.out.format(Locale.US, &quot;%7.3f %7.3f %7.3f%n&quot;,
                      yDS.getValue(),
                      yDS.getPartialDerivative(1),
                      yDS.getPartialDerivative(2));
}</pre></div>
        
<p>
          Note that using <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/FiniteDifferencesDifferentiator.html">
          FiniteDifferencesDifferentiator</a>a&gt; in order to have a <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateDifferentiableFunction.html">
          UnivariateDifferentiableFunction</a> that can be provided to a <a href="../apidocs/org/apache/commons/math3/analysis/solvers/NewtonRaphsonSolver.html">Newton-Raphson's</a>
          solver is a very bad idea. The reason is that finite differences are not really accurate and needs lots
          of additional calls to the basic underlying function. If user initially have only the basic function
          available and needs to find its roots, it is <i>much</i> more accurate and <i>much</i> more
          efficient to use a solver that only requires the function values and not the derivatives. A good choice is
          to use <a href="../apidocs/org/apache/commons/math3/analysis/solvers/BracketingNthOrderBrentSolver.html">bracketing
          n<sup>th</sup> order Brent</a> method, which in fact converges faster than <a href="../apidocs/org/apache/commons/math3/analysis/solvers/NewtonRaphsonSolver.html">Newton-Raphson's</a> and
          can be configured to a highere order (typically 5) than Newton-Raphson which is an order 2 method.
        </p>
        
<p>
          Another implementation of the <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/UnivariateFunctionDifferentiator.html">
          UnivariateFunctionDifferentiator</a> interface is under development in the related project
          <a class="externalLink" href="http://commons.apache.org/sandbox/nabla/">Apache Commons Nabla</a>. This implementation uses
          automatic code analysis and generation at binary level. However, at time of writing
          (end 2012), this project is not yet suitable for production use.
        </p>
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Special Functions</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!--  --><!-- Licensed to the Apache Software Foundation (ASF) under one or more --><!-- contributor license agreements.  See the NOTICE file distributed with --><!-- this work for additional information regarding copyright ownership. --><!-- The ASF licenses this file to You under the Apache License, Version 2.0 --><!-- (the "License"); you may not use this file except in compliance with --><!-- the License.  You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, software --><!-- distributed under the License is distributed on an "AS IS" BASIS, --><!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. --><!-- See the License for the specific language governing permissions and --><!-- limitations under the License. --><!--  --><div class="section">
<h2><a name="a5_Special_Functions"></a>5 Special Functions</h2>
<div class="section">
<h3><a name="a5.1_Overview"></a>5.1 Overview</h3>
<p>The <tt>special</tt> package of Commons-Math gathers several useful special functions not provided by <tt>java.lang.Math</tt>.</p></div>
<div class="section">
<h3><a name="a5.2_Erf_functions"></a>5.2 Erf functions</h3>
<p><a href="../apidocs/org/apache/commons/math3/special/Erf.html">Erf</a> contains several useful functions involving the Error Function, Erf.</p>
<table border="1" class="bodyTable">
<tr class="a">
<th align="left">Function</th>
<th align="left">Method</th>
<th align="left">Reference</th></tr>
<tr class="b">
<td align="left">Error Function</td>
<td align="left">erf</td>
<td align="left">See <a class="externalLink" href="http://mathworld.wolfram.com/Erf.html">Erf</a> from MathWorld</td></tr></table></div>
<div class="section">
<h3><a name="a5.3_Gamma_functions"></a>5.3 Gamma functions</h3>
<p>Class <a href="../apidocs/org/apache/commons/math3/special/Gamma.html"><tt>Gamma</tt></a> contains several useful functions involving the Gamma Function.</p>
<div class="section">
<h4><a name="Gamma"></a>Gamma</h4>
<p><tt>Gamma.gamma(x)</tt> computes the Gamma function, &#x393;(x) (see <a class="externalLink" href="http://mathworld.wolfram.com/GammaFunction.html">MathWorld</a>, <a class="externalLink" href="http://dlmf.nist.gov/5">DLMF</a>). The accuracy of the Commons-Math implementation is assessed by comparison with high precision values computed with the <a class="externalLink" href="http://maxima.sourceforge.net/">Maxima</a> Computer Algebra System.</p>
<table border="1" class="bodyTable">
<tr class="a">
<th align="left">Interval</th>
<th align="left">Values tested</th>
<th align="left">Average error</th>
<th align="left">Standard deviation</th>
<th align="left">Maximum error</th></tr>
<tr class="b">
<td align="left">-5 &lt; x &lt; -4</td>
<td align="left"><tt>x[i] = i / 1024, i = -5119, ..., -4097</tt></td>
<td align="left">0.49 ulps</td>
<td align="left">0.57 ulps</td>
<td align="left">3.0 ulps</td></tr>
<tr class="a">
<td align="left">-4 &lt; x &lt; -3</td>
<td align="left"><tt>x[i] = i / 1024, i = -4095, ..., -3073</tt></td>
<td align="left">0.36 ulps</td>
<td align="left">0.51 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="b">
<td align="left">-3 &lt; x &lt; -2</td>
<td align="left"><tt>x[i] = i / 1024, i = -3071, ..., -2049</tt></td>
<td align="left">0.41 ulps</td>
<td align="left">0.53 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="a">
<td align="left">-2 &lt; x &lt; -1</td>
<td align="left"><tt>x[i] = i / 1024, i = -2047, ..., -1025</tt></td>
<td align="left">0.37 ulps</td>
<td align="left">0.50 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="b">
<td align="left">-1 &lt; x &lt; 0</td>
<td align="left"><tt>x[i] = i / 1024, i = -1023, ..., -1</tt></td>
<td align="left">0.46 ulps</td>
<td align="left">0.54 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="a">
<td align="left">0 &lt; x &#x2264; 8</td>
<td align="left"><tt>x[i] = i / 1024, i = 1, ..., 8192</tt></td>
<td align="left">0.33 ulps</td>
<td align="left">0.48 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="b">
<td align="left">8 &lt; x &#x2264; 141</td>
<td align="left"><tt>x[i] = i / 64, i = 513, ..., 9024</tt></td>
<td align="left">1.32 ulps</td>
<td align="left">1.19 ulps</td>
<td align="left">7.0 ulps</td></tr></table></div>
<div class="section">
<h4><a name="Log_Gamma"></a>Log Gamma</h4>
<p><tt>Gamma.logGamma(x)</tt> computes the natural logarithm of the Gamma function, log &#x393;(x), for x &gt; 0 (see <a class="externalLink" href="http://mathworld.wolfram.com/LogGammaFunction.html">MathWorld</a>, <a class="externalLink" href="http://dlmf.nist.gov/5">DLMF</a>). The accuracy of the Commons-Math implementation is assessed by comparaison with high precision values computed with the <a class="externalLink" href="http://maxima.sourceforge.net/">Maxima</a> Computer Algebra System.</p>
<table border="1" class="bodyTable">
<tr class="a">
<th align="left">Interval</th>
<th align="left">Values tested</th>
<th align="left">Average error</th>
<th align="left">Standard deviation</th>
<th align="left">Maximum error</th></tr>
<tr class="b">
<td align="left">0 &lt; x &#x2264; 8</td>
<td align="left"><tt>x[i] = i / 1024, i = 1, ..., 8192</tt></td>
<td align="left">0.32 ulps</td>
<td align="left">0.50 ulps</td>
<td align="left">4.0 ulps</td></tr>
<tr class="a">
<td align="left">8 &lt; x &#x2264; 1024</td>
<td align="left"><tt>x[i] = i / 8, i = 65, ..., 8192</tt></td>
<td align="left">0.43 ulps</td>
<td align="left">0.53 ulps</td>
<td align="left">3.0 ulps</td></tr>
<tr class="b">
<td align="left">1024 &lt; x &#x2264; 8192</td>
<td align="left"><tt>x[i], i = 1025, ..., 8192</tt></td>
<td align="left">0.53 ulps</td>
<td align="left">0.56 ulps</td>
<td align="left">3.0 ulps</td></tr>
<tr class="a">
<td align="left">8933.439345993791 &#x2264; x &#x2264; 1.75555970201398e+305</td>
<td align="left"><tt>x[i] = 2**(i / 8), i = 105, ..., 8112</tt></td>
<td align="left">0.35 ulps</td>
<td align="left">0.49 ulps</td>
<td align="left">2.0 ulps</td></tr></table></div>
<div class="section">
<h4><a name="Regularized_Gamma"></a>Regularized Gamma</h4>
<p><tt>Gamma.regularizedGammaP(a, x)</tt> computes the value of the regularized Gamma function, P(a, x) (see <a class="externalLink" href="http://mathworld.wolfram.com/RegularizedGammaFunction.html">MathWorld</a>).</p></div></div>
<div class="section">
<h3><a name="a5.4_Beta_functions"></a>5.4 Beta functions</h3>
<p><a href="../apidocs/org/apache/commons/math3/special/Beta.html">Beta</a> contains several useful functions involving the Beta Function.</p>
<div class="section">
<h4><a name="Log_Beta"></a>Log Beta</h4>
<p><tt>Beta.logBeta(a, b)</tt> computes the value of the natural logarithm of the Beta function, log B(a, b). (see <a class="externalLink" href="http://mathworld.wolfram.com/BetaFunction.html">MathWorld</a>, <a class="externalLink" href="http://dlmf.nist.gov/5.12">DLMF</a>). The accuracy of the Commons-Math implementation is assessed by comparison with high precision values computed with the <a class="externalLink" href="http://maxima.sourceforge.net/">Maxima</a> Computer Algebra System.</p>
<table border="1" class="bodyTable">
<tr class="a">
<th align="left">Interval</th>
<th align="left">Values tested</th>
<th align="left">Average error</th>
<th align="left">Standard deviation</th>
<th align="left">Maximum error</th></tr>
<tr class="b">
<td align="left">0 &lt; x &#x2264; 8&#xa0;<br />0 &lt; y &#x2264; 8</td>
<td align="left"><tt>x[i] = i / 32, i = 1, ..., 256</tt>&#xa0;<br /><tt>y[j] = j / 32, j = 1, ..., 256</tt></td>
<td align="left">1.80 ulps</td>
<td align="left">81.08 ulps</td>
<td align="left">14031.0 ulps</td></tr>
<tr class="a">
<td align="left">0 &lt; x &#x2264; 8&#xa0;<br />8 &lt; y &#x2264; 16</td>
<td align="left"><tt>x[i] = i / 32, i = 1, ..., 256</tt>&#xa0;<br /><tt>y[j] = j / 32, j = 257, ..., 512</tt></td>
<td align="left">0.50 ulps</td>
<td align="left">3.64 ulps</td>
<td align="left">694.0 ulps</td></tr>
<tr class="b">
<td align="left">0 &lt; x &#x2264; 8&#xa0;<br />16 &lt; y &#x2264; 256</td>
<td align="left"><tt>x[i] = i / 32, i = 1, ..., 256</tt>&#xa0;<br /><tt>y[j] = j, j = 17, ..., 256</tt></td>
<td align="left">1.04 ulps</td>
<td align="left">139.32 ulps</td>
<td align="left">34509.0 ulps</td></tr>
<tr class="a">
<td align="left">8 &lt; x &#x2264; 16&#xa0;<br />8 &lt; y &#x2264; 16</td>
<td align="left"><tt>x[i] = i / 32, i = 257, ..., 512</tt>&#xa0;<br /><tt>y[j] = j / 32, j = 257, ..., 512</tt></td>
<td align="left">0.35 ulps</td>
<td align="left">0.48 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="b">
<td align="left">8 &lt; x &#x2264; 16&#xa0;<br />16 &lt; y &#x2264; 256</td>
<td align="left"><tt>x[i] = i / 32, i = 257, ..., 512</tt>&#xa0;<br /><tt>y[j] = j, j = 17, ..., 256</tt></td>
<td align="left">0.31 ulps</td>
<td align="left">0.47 ulps</td>
<td align="left">2.0 ulps</td></tr>
<tr class="a">
<td align="left">16 &lt; x &#x2264; 256&#xa0;<br />16 &lt; y &#x2264; 256</td>
<td align="left"><tt>x[i] = i, i = 17, ..., 256</tt>&#xa0;<br /><tt>y[j] = j, j = 17, ..., 256</tt></td>
<td align="left">0.35 ulps</td>
<td align="left">0.49 ulps</td>
<td align="left">2.0 ulps</td></tr></table></div>
<div class="section">
<h4><a name="Regularized_Beta"></a>Regularized Beta</h4>
<p>(see <a class="externalLink" href="http://mathworld.wolfram.com/RegularizedBetaFunction.html">MathWorld</a>)</p></div></div></div>
					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Utilites</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->



<div class="section">
<h2><a name="a6_Utilities"></a>6 Utilities</h2>


<div class="section">
<h3><a name="a6.1_Overview"></a>6.1 Overview</h3>
    
<p>
    The <a href="../apidocs/org/apache/commons/math3/util/package-summary.html">
    org.apache.commons.math3.util</a> package collects a group of array utilities,
    value transformers,  and numerical routines used by implementation classes in
    commons-math.
    </p>
</div>


<div class="section">
<h3><a name="a6.2_Double_array_utilities"></a>6.2 Double array utilities</h3>
    
<p>
    To maintain statistics based on a &quot;rolling&quot; window of values, a resizable 
    array implementation was developed and is provided for reuse in the 
    <tt>util</tt> package.  The core functionality provided is described in
    the documentation for the interface, 
    <a href="../apidocs/org/apache/commons/math3/util/DoubleArray.html">
    DoubleArray</a>.  This interface adds one method,
    <tt>addElementRolling(double)</tt> to basic list accessors. 
    The <tt>addElementRolling</tt> method adds an element 
    (the actual parameter) to the end of the list and removes the first element
     in the list.
    </p>
    
<p>
    The <a href="../apidocs/org/apache/commons/math3/util/ResizableDoubleArray.html">
    ResizableDoubleArray</a> class provides a configurable, array-backed
    implementation of the <tt>DoubleArray</tt> interface.
    When <tt>addElementRolling</tt> is invoked, the underlying
    array is expanded if necessary, the new element is added to the end of the
    array and the &quot;usable window&quot; of the array is moved forward, so that
    the first element is effectively discarded, what was the second becomes the
    first, and so on.  To efficiently manage storage, two maintenance
    operations need to be periodically performed -- orphaned elements at the
    beginning of the array need to be reclaimed and space for new elements at
    the end needs to be created.  Both of these operations are handled
    automatically, with frequency / effect driven by the configuration
    properties <tt>expansionMode</tt>, <tt>expansionFactor</tt> and
    <tt>contractionCriteria.</tt>  See 
    <a href="../apidocs/org/apache/commons/math3/util/ResizableDoubleArray.html">
    ResizableDoubleArray</a>
    for details. 
    </p>
</div>


<div class="section">
<h3><a name="a6.3_intdouble_hash_map"></a>6.3 int/double hash map</h3>
    
<p>
    The <a href="../apidocs/org/apache/commons/math3/util/OpenIntToDoubleHashMap.html">
    OpenIntToDoubleHashMap</a> class provides a specialized hash map
    implementation for int/double. This implementation has a much smaller memory
    overhead than standard <tt>java.util.HashMap</tt> class. It uses open addressing
    and primitive arrays, which greatly reduces the number of intermediate objects and
    improve data locality.
    </p>
</div>


<div class="section">
<h3><a name="a6.4_Continued_Fractions"></a>6.4 Continued Fractions</h3>
  
<p>
    The <a href="../apidocs/org/apache/commons/math3/util/ContinuedFraction.html">
    ContinuedFraction</a> class provides a generic way to create and evaluate
    continued fractions.  The easiest way to create a continued fraction is
    to subclass <tt>ContinuedFraction</tt> and override the
    <tt>getA</tt> and <tt>getB</tt> methods which return
    the continued fraction terms.  The precise definition of these terms is
    explained in <a class="externalLink" href="http://mathworld.wolfram.com/ContinuedFraction.html">
    Continued Fraction, equation (1)</a> from MathWorld.
  </p>
  
<p>
    As an example, the constant Pi can be computed using a <a class="externalLink" href="http://functions.wolfram.com/Constants/Pi/10/0002/">continued fraction</a>.  The following anonymous class
    provides the implementation:
    </p>
<div class="source">
<pre>ContinuedFraction c = new ContinuedFraction() {
    public double getA(int n, double x) {
        switch(n) {
            case 0: return 3.0;
            default: return 6.0;
        }
    }
    
    public double getB(int n, double x) {
        double y = (2.0 * n) - 1.0;
        return y * y;
    }
}</pre></div>
  
  
<p>
    Then, to evalute Pi, simply call any of the <tt>evalute</tt> methods
    (Note, the point of evalution in this example is meaningless since Pi is a
    constant).
  </p>
  
<p>
    For a more practical use of continued fractions, consider the <a class="externalLink" href="http://functions.wolfram.com/ElementaryFunctions/Exp/10/">exponential function</a>.
    The following anonymous class provides its implementation:
    </p>
<div class="source">
<pre>ContinuedFraction c = new ContinuedFraction() {
    public double getA(int n, double x) {
        if (n % 2 == 0) {
            switch(n) {
                case 0: return 1.0;
                default: return 2.0;
            }
        } else {
            return n;
        }
    }
    
    public double getB(int n, double x) {
        if (n % 2 == 0) {
            return -x;
        } else {
            return x;
        }
    }
}</pre></div>
  
  
<p>
    Then, to evalute <i>e</i><sup>x</sup> for any value x, simply call any of the
    <tt>evalute</tt> methods.
  </p>
</div>


<div class="section">
<h3><a name="a6.5_Binomial_coefficients_factorials_Stirling_numbers_and_other_common_math_functions"></a>6.5 Binomial coefficients, factorials, Stirling numbers and other common math functions</h3>
    
<p>
    A collection of reusable math functions is provided in the
    <a href="../apidocs/org/apache/commons/math3/util/ArithmeticUtils.html">ArithmeticUtils</a>
    utility class.  ArithmeticUtils currently includes methods to compute the following: </p>
<ul>
    
<li>
    Binomial coefficients -- &quot;n choose k&quot; available as an (exact) long value,  
    <tt>binomialCoefficient(int, int)</tt> for small n, k; as a double,
    <tt>binomialCoefficientDouble(int, int)</tt> for larger values; and in
    a &quot;super-sized&quot; version, <tt>binomialCoefficientLog(int, int)</tt> 
    that returns the natural logarithm of the value.</li>
    
<li>
    Stirling numbers of the second kind -- S(n,k) as an exact long value
    <tt>stirlingS2(int, int)</tt> for small n, k.</li>
    
<li>
    Factorials -- like binomial coefficients, these are available as exact long
    values, <tt>factorial(int)</tt>;  doubles, 
    <tt>factorialDouble(int)</tt>; or logs, <tt>factorialLog(int)</tt>. </li>
    
<li>
    Least common multiple and greatest common denominator functions.
    </li>
    </ul>
    
</div>


<div class="section">
<h3><a name="a6.6_Fast_mathematical_functions"></a>6.6 Fast mathematical functions</h3>
    
<p>
        Apache Commons Math provides a faster, more accurate, portable alternative
        to the regular <tt>Math</tt> and <tt>StrictMath</tt>classes for large
        scale computation.
    </p>
    
<p>
        FastMath is a drop-in replacement for both Math and StrictMath. This
        means that for any method in Math (say <tt>Math.sin(x)</tt> or
        <tt>Math.cbrt(y)</tt>), user can directly change the class and use the
        methods as is (using <tt>FastMath.sin(x)</tt> or <tt>FastMath.cbrt(y)</tt>
        in the previous example).
    </p>
    
<p>
        FastMath speed is achieved by relying heavily on optimizing compilers to
        native code present in many JVM todays and use of large tables. Precomputed
        literal arrays are provided in this class to speed up load time. These 
        precomputed tables are used in the default configuration, to improve speed
        even at first use of the class. If users prefer to compute the tables
        automatically at load time, they can change a compile-time constant. This will
        increase class load time at first use, but this overhead will occur only once
        per run, regardless of the number of subsequent calls to computation methods.
        Note that FastMath is extensively used inside Apache Commons Math, so by
        calling some algorithms, the one-shot overhead when the constant is set to
        false will occur regardless of the end-user calling FastMath methods directly
        or not. Performance figures for a specific JVM and hardware can be evaluated by
        running the FastMathTestPerformance tests in the test directory of the source
        distribution.
    </p>
    
<p>
        FastMath accuracy should be mostly independent of the JVM as it relies only
        on IEEE-754 basic operations and on embedded tables. Almost all operations
        are accurate to about 0.5 ulp throughout the domain range. This statement, of
        course is only a rough global observed behavior, it is <i>not</i> a guarantee
        for <i>every</i> double numbers input (see William Kahan's <a class="externalLink" href="http://en.wikipedia.org/wiki/Rounding#The_table-maker.27s_dilemma">Table
        Maker's Dilemma</a>).
    </p>
    
<p>
        FastMath additionally implements the following methods not found in Math/StrictMath:
        </p>
<ul>
            
<li>asinh(double)</li>
            
<li>acosh(double)</li>
            
<li>atanh(double)</li>
            
<li>pow(double,int)</li>
        </ul>
        The following methods are found in Math/StrictMath since 1.6 only, they are
        provided by FastMath even in 1.5 Java virtual machines
        
<ul>
            
<li>copySign(double, double)</li>
            
<li>getExponent(double)</li>
            
<li>nextAfter(double,double)</li>
            
<li>nextUp(double)</li>
            
<li>scalb(double, int)</li>
            
<li>copySign(float, float)</li>
            
<li>getExponent(float)</li>
            
<li>nextAfter(float,double)</li>
            
<li>nextUp(float)</li>
            
<li>scalb(float, int)</li>
        </ul>
    
</div>


<div class="section">
<h3><a name="a6.7_Miscellaneous"></a>6.7 Miscellaneous</h3>
  The <a href="../apidocs/org/apache/commons/math3/util/MultidimensionalCounter.html">
    MultidimensionalCounter</a> is a utility class that converts a set of indices
  (identifying points in a multidimensional space) to a single index (e.g. identifying
  a location in a one-dimensional array.
</div>

</div>



					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Complex Numbers</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
  
    <div class="section">
<h2><a name="a7_Complex_Numbers"></a>7 Complex Numbers</h2>
      
<div class="section">
<h3><a name="a7.1_Overview"></a>7.1 Overview</h3>
        
<p>
          The complex packages provides a complex number type as well as complex
          versions of common transcendental functions and complex number
          formatting.
        </p>
      </div>
      
<div class="section">
<h3><a name="a7.2_Complex_Numbers"></a>7.2 Complex Numbers</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/complex/Complex.html">
          Complex</a> provides a complex number type that forms the basis for
          the complex functionality found in commons-math.
         </p>  
         
<p>
           Complex functions and arithmetic operations are implemented in
           commons-math by applying standard computational formulas and
           following the rules for <tt>java.lang.Double</tt> arithmetic in 
           handling infinite and <tt>NaN</tt> values.  No attempt is made
           to comply with ANSII/IEC C99x Annex G or any other standard for
           Complex arithmetic.  See the class and method javadocs for the 
           <a href="../apidocs/org/apache/commons/math3/complex/Complex.html">
           Complex</a> and
           <a href="../apidocs/org/apache/commons/math3/complex/ComplexUtils.html">
           ComplexUtils</a> classes for details on computing formulas.
        </p>
        
<p>
          To create a complex number, simply call the constructor passing in two
          floating-point arguments, the first being the real part of the
          complex number and the second being the imaginary part:
          </p>
<div class="source">
<pre>Complex c = new Complex(1.0, 3.0); // 1 + 3i</pre></div>
        
        
<p>
          Complex numbers may also be created from polar representations
          using the <tt>polar2Complex</tt> method in 
          <tt>ComplexUtils</tt>.
        </p>
        
<p>
          The <tt>Complex</tt> class provides basic unary and binary
          complex number operations.  These operations provide the means to add,
          subtract, multiply and divide complex numbers along with other
          complex number functions similar to the real number functions found in
          <tt>java.math.BigDecimal</tt>:
          </p>
<div class="source">
<pre>Complex lhs = new Complex(1.0, 3.0);
Complex rhs = new Complex(2.0, 5.0);

Complex answer = lhs.add(rhs);       // add two complex numbers
        answer = lhs.subtract(rhs);  // subtract two complex numbers
        answer = lhs.abs();          // absolute value
        answer = lhs.conjugate(rhs); // complex conjugate</pre></div>
        
      </div>
      
<div class="section">
<h3><a name="a7.3_Complex_Transcendental_Functions"></a>7.3 Complex Transcendental Functions</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/complex/Complex.html">
          Complex</a> also provides implementations of serveral transcendental
          functions involving complex number arguments.
          These operations provide the means to compute the log, sine, tangent,
          and other complex values :
          </p>
<div class="source">
<pre>Complex first  = new Complex(1.0, 3.0);
Complex second = new Complex(2.0, 5.0);

Complex answer = first.log();        // natural logarithm.
        answer = first.cos();        // cosine
        answer = first.pow(second);  // first raised to the power of second</pre></div>
        
      </div>
      
<div class="section">
<h3><a name="a7.4_Complex_Formatting_and_Parsing"></a>7.4 Complex Formatting and Parsing</h3>
        
<p>
          <tt>Complex</tt> instances can be converted to and from strings
          using the<a href="../apidocs/org/apache/commons/math3/complex/ComplexFormat.html">
          ComplexFormat</a> class.
          <tt>ComplexFormat</tt> is a <tt>java.text.Format</tt>
          extension and, as such, is used like other formatting objects (e.g.
          <tt>java.text.SimpleDateFormat</tt>):
          </p>
<div class="source">
<pre>ComplexFormat format = new ComplexFormat(); // default format
Complex c = new Complex(1.1111, 2.2222);
String s = format.format(c); // s contains &quot;1.11 + 2.22i&quot;</pre></div>
        
        
<p>
          To customize the formatting output, one or two
          <tt>java.text.NumberFormat</tt> instances can be used to construct
          a <tt>ComplexFormat</tt>.  These number formats control the
          formatting of the real and imaginary values of the complex number:
          </p>
<div class="source">
<pre>NumberFormat nf = NumberFormat.getInstance();
nf.setMinimumFractionDigits(3);
nf.setMaximumFractionDigits(3);

// create complex format with custom number format
// when one number format is used, both real and
// imaginary parts are formatted the same
ComplexFormat cf = new ComplexFormat(nf);
Complex c = new Complex(1.11, 2.2222);
String s = format.format(c); // s contains &quot;1.110 + 2.222i&quot;

NumberFormat nf2 = NumberFormat.getInstance();
nf.setMinimumFractionDigits(1);
nf.setMaximumFractionDigits(1);

// create complex format with custom number formats
cf = new ComplexFormat(nf, nf2);
s = format.format(c); // s contains &quot;1.110 + 2.2i&quot;</pre></div>
        
        
<p>
          Another formatting customization provided by
          <tt>ComplexFormat</tt> is the text used for the imaginary
          designation.  By default, the imaginary notation is &quot;i&quot; but, it can be
          manipulated using the <tt>setImaginaryCharacter</tt> method.
        </p>
        
<p>
          Formatting inverse operation, parsing, can also be performed by
          <tt>ComplexFormat</tt>.  Parse a complex number from a string,
          simply call the <tt>parse</tt> method:
          </p>
<div class="source">
<pre>ComplexFormat cf = new ComplexFormat();
Complex c = cf.parse(&quot;1.110 + 2.222i&quot;);</pre></div>
        
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Distributions</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
  
    <div class="section">
<h2><a name="a8_Probability_Distributions"></a>8 Probability Distributions</h2>
      
<div class="section">
<h3><a name="a8.1_Overview"></a>8.1 Overview</h3>
        
<p>
          The distributions package provides a framework and implementations for some commonly used
          probability distributions. Continuous univariate distributions are represented by implementations of
          the <a href="../apidocs/org/apache/commons/math3/distribution/RealDistribution.html">RealDistribution</a>
          interface.  Discrete distributions implement
          <a href="../apidocs/org/apache/commons/math3/distribution/IntegerDistribution.html">IntegerDistribution</a>
          (values must be mapped to integers) and there is an
          <a href="../apidocs/org/apache/commons/math3/distribution/EnumeratedDistribution.html">EnumeratedDistribution</a>
          class representing discrete distributions with a finite, enumerated set of values.  Finally, multivariate
          real-valued distributions can be represented via the 
          <a href="../apidocs/org/apache/commons/math3/distribution/MultiVariateRealDistribution.html">MultivariateRealDistribution</a>
          interface.
        </p>
        
<p>
          An overview of available continuous distributions:<br />
          <img src="../images/userguide/real_distribution_examples.png" alt="Overview of continuous distributions" />
        </p>
      </div>
      
<div class="section">
<h3><a name="a8.2_Distribution_Framework"></a>8.2 Distribution Framework</h3>
        
<p>
          The distribution framework provides the means to compute probability density
          functions (<tt>density(&#xb7;)</tt>), probability mass functions
          (<tt>probability(&#xb7;)</tt>) and distribution functions
          (<tt>cumulativeProbability(&#xb7;)</tt>) for both
          discrete (integer-valued) and continuous probability distributions.
          The framework also allows for the computation of inverse cumulative probabilities
          and sampling from distributions.
        </p>
        
<p>
          For an instance <tt>f</tt> of a distribution <tt>F</tt>,
          and a domain value, <tt>x</tt>, <tt>f.cumulativeProbability(x)</tt>
          computes <tt>P(X &lt;= x)</tt> where <tt>X</tt> is a random variable distributed
          as <tt>f</tt>, i.e., <tt>f.cumulativeProbability(&#xb7;)</tt> represents
          the distribution function of <tt>f</tt>. If <tt>f</tt> is continuous,
          (implementing the <tt>RealDistribution</tt> interface) the probability density
          function of <tt>f</tt> is represented by <tt>f.density(&#xb7;)</tt>.
          For discrete <tt>f</tt> (implementing <tt>IntegerDistribution</tt>), the probability
          mass function is represented by <tt>f.probability(&#xb7;)</tt>.  Continuous
          distributions also implement <tt>probability(&#xb7;)</tt> with the same
          definition (<tt>f.probability(x)</tt> represents <tt>P(X = x)</tt>
          where <tt>X</tt> is distributed as <tt>f</tt>), though in the continuous
          case, this will usually be identically 0. 
        </p>

<div class="source">
<pre>TDistribution t = new TDistribution(29);
double lowerTail = t.cumulativeProbability(-2.656);     // P(T(29) &lt;= -2.656)
double upperTail = 1.0 - t.cumulativeProbability(2.75); // P(T(29) &gt;= 2.75)</pre></div>
        
<p>
          All distributions implement a <tt>sample()</tt> method to support random sampling from the
          distribution. Implementation classes expose constructors allowing the default 
          <a href="../apidocs/org/apache/commons/math3/random/RandomGenerator.html">RandomGenerator</a>
          used by the sampling algorithm to be overridden.  If sampling is not going to be used, providing
          a null <tt>RandomGenerator</tt> constructor argument will avoid the overhead of initializing
          the default generator.
        </p>
        
<p>
          Inverse distribution functions can be computed using the
          <tt>inverseCumulativeProbability</tt> methods.  For continuous <tt>f</tt>
          and <tt>p</tt> a probability, <tt>f.inverseCumulativeProbability(p)</tt> returns
          <tt></p>
<ul>
            
<li>inf{x in R | P(X&#x2264;x) &#x2265; p} for 0 &lt; p &lt; 1},</li>
            
<li>inf{x in R | P(X&#x2264;x) &gt; 0} for p = 0}.</li>
          </ul></tt> where <tt>X</tt> is distributed as <tt>f</tt>.<br />
          For discrete <tt>f</tt>, the definition is the same, with <tt>Z</tt> (the integers)
          in place of <tt>R</tt>.  Note that in the discrete case, the &#x2265; in the definition
          can make a difference when <tt>p</tt> is an attained value of the distribution.
        
      </div>
      <!-- TODO: add section on multivariate distributions -->
      
<div class="section">
<h3><a name="a8.3_User_Defined_Distributions"></a>8.3 User Defined Distributions</h3>
        
<p>
        User-defined distributions can be implemented using
        <a href="../apidocs/org/apache/commons/math3/distribution/RealDistribution.html">RealDistribution</a>,
        <a href="../apidocs/org/apache/commons/math3/distribution/IntegerDistribution.html">IntegerDistribution</a> and
        <a href="../apidocs/org/apache/commons/math3/distribution/MultivariateRealDistribution.html">MultivariateRealDistribution</a>
        interfaces serve as base types.  These serve as the basis for all the distributions directly supported by
        Apache Commons Math.  To aid in implementing distributions,
        the <a href="../apidocs/org/apache/commons/math3/distribution/AbstractRealDistribution.html">AbstractRealDistribution</a>,
        <a href="../apidocs/org/apache/commons/math3/distribution/AbstractIntegerDistribution.html">AbstractIntegerDistribution</a> and 
        <a href="../apidocs/org/apache/commons/math3/distribution/AbstractMultivariateRealDistribution.html">AbstractMultivariateRealDistribution</a>
        provide implementation building blocks and offer basic distribution functionality.
        By extending these abstract classes directly, much of the repetitive distribution
        implementation is already developed and should save time and effort in developing
        user-defined distributions.
        </p>
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Fractions</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
   
         http://www.apache.org/licenses/LICENSE-2.0
   
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
  
    <div class="section">
<h2><a name="a9_Fractions"></a>9 Fractions</h2>
      
<div class="section">
<h3><a name="a9.1_Overview"></a>9.1 Overview</h3>
        
<p>
          The fraction packages provides a fraction number type as well as
          fraction number formatting.
        </p>
      </div>
      
<div class="section">
<h3><a name="a9.2_Fraction_Numbers"></a>9.2 Fraction Numbers</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/fraction/Fraction.html">
          Fraction</a> and <a href="../apidocs/org/apache/commons/math3/fraction/BigFraction.html">
          BigFraction</a> provide fraction number type that forms the basis for
          the fraction functionality found in Commons-Math. The former one can be
          used for fractions whose numerators and denominators are small enough
          to fit in an int (taking care of intermediate values) while the second
          class should be used when there is a risk the numerator and denominator
          grow very large.
        </p>
        
<p>
          A fraction number, can be built from two integer arguments representing numerator
          and denominator or from a double which will be approximated:
          </p>
<div class="source">
<pre>Fraction f = new Fraction(1, 3); // 1 / 3
Fraction g = new Fraction(0.25); // 1 / 4</pre></div>
        
        
<p>
          Of special note with fraction construction, when a fraction is created it is always reduced to lowest terms.
        </p>
        
<p>
          The <tt>Fraction</tt> class provides many unary and binary
          fraction operations.  These operations provide the means to add,
          subtract, multiple and, divide fractions along with other functions similar to the real number functions found in
          <tt>java.math.BigDecimal</tt>:
          </p>
<div class="source">
<pre>Fraction lhs = new Fraction(1, 3);
Fraction rhs = new Fraction(2, 5);

Fraction answer = lhs.add(rhs);     // add two fractions
        answer = lhs.subtract(rhs); // subtract two fractions
        answer = lhs.abs();         // absolute value
        answer = lhs.reciprocal();  // reciprocal of lhs</pre></div>
        
        
<p>
          Like fraction construction, for each of the fraction functions, the resulting fraction is reduced to lowest terms.
        </p>
      </div>
      
<div class="section">
<h3><a name="a9.3_Fraction_Formatting_and_Parsing"></a>9.3 Fraction Formatting and Parsing</h3>
        
<p>
          <tt>Fraction</tt> instances can be converted to and from strings
          using the<a href="../apidocs/org/apache/commons/math3/fraction/FractionFormat.html">
          FractionFormat</a> class. <tt>FractionFormat</tt> is a
          <tt>java.text.Format</tt> extension and, as such, is used like other
          formatting objects (e.g. <tt>java.text.SimpleDateFormat</tt>):
          </p>
<div class="source">
<pre>FractionFormat format = new FractionFormat(); // default format
Fraction f = new Fraction(2, 4);
String s = format.format(f); // s contains &quot;1 / 2&quot;, note the reduced fraction</pre></div>
        
        
<p>
          To customize the formatting output, one or two
          <tt>java.text.NumberFormat</tt> instances can be used to construct
          a <tt>FractionFormat</tt>.  These number formats control the
          formatting of the numerator and denominator of the fraction:
          </p>
<div class="source">
<pre>NumberFormat nf = NumberFormat.getInstance(Locale.FRANCE);
// create fraction format with custom number format
// when one number format is used, both numerator and
// denominator are formatted the same
FractionFormat format = new FractionFormat(nf);
Fraction f = new Fraction(2000, 3333);
String s = format.format(c); // s contains &quot;2.000 / 3.333&quot;

NumberFormat nf2 = NumberFormat.getInstance(Locale.US);
// create fraction format with custom number formats
format = new FractionFormat(nf, nf2);
s = format.format(f); // s contains &quot;2.000 / 3,333&quot;</pre></div>
        
        
<p>
          Formatting's inverse operation, parsing, can also be performed by
          <tt>FractionFormat</tt>.  To parse a fraction from a string,
          simply call the <tt>parse</tt> method:
          </p>
<div class="source">
<pre>FractionFormat ff = new FractionFormat();
Fraction f = ff.parse(&quot;-10 / 21&quot;);</pre></div>
        
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Transform methods</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a10_Transform_methods"></a>10 Transform methods</h2>
      
<p>
         This package provides a few transformers for signal analysis. All transformers
         provide both direct and inverse transforms.
         </p>
<ul>
           
<li><a href="../apidocs/org/apache/commons/math3/transform/FastFourierTransformer.html">
            FastFourierTransformer</a> (produces <tt>Complex</tt> results)</li>
           
<li><a href="../apidocs/org/apache/commons/math3/transform/FastCosineTransformer.html">
           FastCosineTransformer</a> (produces real results)</li>
           
<li><a href="../apidocs/org/apache/commons/math3/transform/FastSineTransformer.html">
           FastSineTransformer</a> (produces real results)</li>
           
<li><a href="../apidocs/org/apache/commons/math3/transform/FastHadamardTransformer.html">
           FastHadamardTransformer</a> (produces real results)</li>
         </ul>
      
     </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Geometry</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a11_Geometry"></a>11 Geometry</h2>
      
<div class="section">
<h3><a name="a11.1_Overview"></a>11.1 Overview</h3>
        
<p>
           The geometry package provides classes useful for many physical simulations
           in Euclidean spaces, like vectors and rotations in 3D, as well as on the
           sphere. It also provides a general implementation of Binary Space Partitioning
           Trees (BSP trees).
        </p>
        
<p>
           All supported type of spaces (Euclidean 3D, Euclidean 2D, Euclidean 1D, 2-Sphere
           and 1-Sphere) provide dedicated classes that represent complex regions of the
           space as shown in the following table:
        </p>
        
<p>
          </p>
<table class="bodyTable" border="1" align="center">
          
<tr class="a">
<td colspan="2"><font size="+1">Regions</font></td></tr>
          
<tr class="b"><font size="+1">
<td>Space</td>
<td>Region</td></font></tr>
          
<tr class="a">
<td>Euclidean 1D</td>
<td><a href="../apidocs/org/apache/commons/math3/geometry/euclidean/oned/IntervalsSet.html">IntervalsSet</a></td></tr>
          
<tr class="b">
<td>Euclidean 2D</td>
<td><a href="../apidocs/org/apache/commons/math3/geometry/euclidean/twod/PolygonsSet.html">PolygonsSet</a></td></tr>
          
<tr class="a">
<td>Euclidean 3D</td>
<td><a href="../apidocs/org/apache/commons/math3/geometry/euclidean/threed/PolyhedronsSet.html">PolyhedronsSet</a></td></tr>
          
<tr class="b">
<td>1-Sphere</td>
<td><a href="../apidocs/org/apache/commons/math3/geometry/spherical/oned/ArcsSet.html">ArcsSet</a></td></tr>
          
<tr class="a">
<td>2-Sphere</td>
<td><a href="../apidocs/org/apache/commons/math3/geometry/spherical/twod/SphericalPolygonsSet.html">SphericalPolygonsSet</a></td></tr>
          </table>
        
        
<p>
          All these regions share common features. Regions can be defined from several non-connected parts.
          As an example, one PolygonsSet instance in Euclidean 2D (i.e. the plane) can represent a region composed
          of several separated polygons separate from each other. They also support regions containing holes. As an example
          a SphericalPolygonsSet on the 2-Sphere can represent a land mass on the Earth with an interior sea, where points
          on this sea would not be considered to belong to the land mass. Of course more complex models can also be represented
          and it is possible to define for example one region composed of several continents, with interior sea containing
          separate islands, some of which having lakes, which may have smaller island ... In the infinite Euclidean spaces,
          regions can have infinite parts. for example in 1D (i.e. along a line), one can define an interval starting at
          abscissa 3 and extending up to infinity. This is also possible in 2D and 3D. For all spaces, regions without any
          boundaries are also possible so one can define the whole space or the empty region.
        </p>
        
<p>
          The classical set operations are available in all cases: union, intersection, symmetric difference (exclusive or),
          difference, complement. There are also region predicates (point inside/outside/on boundary, emptiness,
          other region contained). Some geometric properties like size, or boundary size
          can be computed, as well as barycenters on the Euclidean space. Another important feature available for all these
          regions is the projection of a point to the closest region boundary (if there is a boundary). The projection provides
          both the projected point and the signed distance between the point and its projection, with the convention distance
          to boundary is considered negative if the point is inside the region, positive if the point is outside the region
          and of course 0 if the point is already on the boundary. This feature can be used for example as the value of a
          function in a root solver to determine when a moving point crosses the region boundary.
        </p>
      </div>

      
<div class="section">
<h3><a name="a11.2_Euclidean_spaces"></a>11.2 Euclidean spaces</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/oned/Vector1D.html">
          Vector1D</a>, <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/twod/Vector2D.html">
          Vector2D</a> and <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/threed/Vector3D.html">
          Vector3D</a> provide simple vector types. One important feature is
          that instances of these classes are guaranteed
          to be immutable, this greatly simplifies modeling dynamical systems
          with changing states: once a vector has been computed, a reference to it
          is known to preserve its state as long as the reference itself is preserved.
        </p>
        
<p>
          Numerous constructors are available to create vectors. In addition to the
          straightforward Cartesian coordinates constructor, a constructor using
          azimuthal coordinates can build normalized vectors and linear constructors
          from one, two, three or four base vectors are also available. Constants have
          been defined for the most commons vectors (plus and minus canonical axes,
          null vector, and special vectors with infinite or NaN coordinates).
        </p>
        
<p>
          The generic vectorial space operations are available including dot product,
          normalization, orthogonal vector finding and angular separation computation
          which have a specific meaning in 3D. The 3D geometry specific cross product
          is of course also implemented.
        </p>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/oned/Vector1DFormat.html">
          Vector1DFormat</a>, <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/twod/Vector2DFormat.html">
          Vector2DFormat</a> and <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/threed/Vector3DFormat.html">
          Vector3DFormat</a> are specialized classes for formatting output or parsing
          input with text representation of vectors.
        </p>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/threed/Rotation.html">
          Rotation</a> represents 3D rotations.
          Rotation instances are also immutable objects, as Vector3D instances.
        </p>
        
<p>
          Rotations can be represented by several different mathematical
          entities (matrices, axe and angle, Cardan or Euler angles,
          quaternions). This class presents a higher level abstraction, more
          user-oriented and hiding implementation details. Well, for the
          curious, we use quaternions for the internal representation. The user
          can build a rotation from any of these representations, and any of
          these representations can be retrieved from a <tt>Rotation</tt>
          instance (see the various constructors and getters). In addition, a
          rotation can also be built implicitly from a set of vectors and their
          image.
        </p>
        
<p>
          This implies that this class can be used to convert from one
          representation to another one. For example, converting a rotation
          matrix into a set of Cardan angles can be done using the
          following single line of code:
        </p>
        
<div class="source">
<pre>double[] angles = new Rotation(matrix, 1.0e-10).getAngles(RotationOrder.XYZ, RotationConvention.FRAME_TRANSFORM);</pre></div>
        
<p>
          Focus is oriented on what a rotation <i>does</i> rather than on its
          underlying representation. Once it has been built, and regardless of
          its internal representation, a rotation is an <i>operator</i> which
          basically transforms three dimensional vectors into other three
          dimensional vectors. Depending on the application, the meaning of
          these vectors may vary as well as the semantics of the rotation.
        </p>
        
<p>
          For example in a spacecraft attitude simulation tool, users will
          often consider the vectors are fixed (say the Earth direction for
          example) and the rotation transforms the coordinates coordinates of
          this vector in inertial frame into the coordinates of the same vector
          in satellite frame. In this case, the rotation implicitly defines the
          relation between the two frames (we have fixed vectors and moving frame).
          Another example could be a telescope control application, where the
          rotation would transform the sighting direction at rest into the desired
          observing direction when the telescope is pointed towards an object of
          interest. In this case the rotation transforms the direction at rest in
          a topocentric frame into the sighting direction in the same topocentric
          frame (we have moving vectors in fixed frame). In many case, both
          approaches will be combined, in our telescope example, we will probably
          also need to transform the observing direction in the topocentric frame
          into the observing direction in inertial frame taking into account the
          observatory location and the Earth rotation.
        </p>
        
<p>
          In order to support naturally both views, the enumerate RotationConvention
          has been introduced in version 3.6. This enumerate can take two values:
          <tt>VECTOR_OPERATOR</tt> or <tt>FRAME_TRANSFORM</tt>. This
          enumerate must be passed as an argument to the few methods that depend
          on an interpretation of the semantics of the angle/axis. The value
          <tt>VECTOR_OPERATOR</tt> corresponds to rotations that are
          considered to move vectors within a fixed frame. The value
          <tt>FRAME_TRANSFORM</tt> corresponds to rotations that are
          considered to represent frame rotations, so fixed vectors coordinates
          change as their reference frame changes.
        </p>
        
<p>
          These examples show that a rotation means what the user wants it to
          mean, so this class does not push the user towards one specific
          definition and hence does not provide methods like
          <tt>projectVectorIntoDestinationFrame</tt> or
          <tt>computeTransformedDirection</tt>. It provides simpler and more
          generic methods: <tt>applyTo(Vector3D)</tt> and
          <tt>applyInverseTo(Vector3D)</tt>.
        </p>
        
<p>
          Since a rotation is basically a vectorial operator, several
          rotations can be composed together and the composite operation
          <tt>r = r<sub>1</sub> o r<sub>2</sub></tt> (which means that for each
          vector <tt>u</tt>, <tt>r(u) = r<sub>1</sub>(r<sub>2</sub>(u))</tt>)
          is also a rotation. Hence we can consider that in addition to vectors, a
          rotation can be applied to other rotations as well (or to itself). With our
          previous notations, we would say we can apply <tt>r<sub>1</sub></tt> to
          <tt>r<sub>2</sub></tt> and the result we get is <tt>r =
          r<sub>1</sub> o r<sub>2</sub></tt>. For this purpose, the class
          provides the methods: <tt>compose(Rotation, RotationConvention)</tt> and
          <tt>composeInverse(Rotation, RotationConvention)</tt>. There are also
          shortcuts <tt>applyTo(Rotation)</tt> which is equivalent to
          <tt>compose(Rotation, RotationConvention.VECTOR_OPERATOR)</tt> and
          <tt>applyInverseTo(Rotation)</tt> which is equivalent to
          <tt>composeInverse(Rotation, RotationConvention.VECTOR_OPERATOR)</tt>.
        </p>
      </div>
      
<div class="section">
<h3><a name="a11.3_n-Sphere"></a>11.3 n-Sphere</h3>
        
<p>
          The Apache Commons Math library provides a few classes dealing with geometry
          on the 1-sphere (i.e. the one dimensional circle corresponding to the boundary of
          a two-dimensional disc) and the 2-sphere (i.e. the two dimensional sphere surface
          corresponding to the boundary of a three-dimensional ball). The main classes in
          this package correspond to the region explained above, i.e.
          <a href="../apidocs/org/apache/commons/math3/geometry/spherical/oned/ArcsSet.html">ArcsSet</a>
          and <a href="../apidocs/org/apache/commons/math3/geometry/spherical/twod/SphericalPolygonsSet.html">SphericalPolygonsSet</a>.
        </p>
      </div>
      
<div class="section">
<h3><a name="a11.4_Binary_Space_Partitioning"></a>11.4 Binary Space Partitioning</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/geometry/partitioning/BSPTree.html">
          BSP trees</a> are an efficient way to represent space partitions and
          to associate attributes with each cell. Each node in a BSP tree
          represents a convex region which is partitioned in two convex
          sub-regions at each side of a cut hyperplane. The root tree
          contains the complete space.
        </p>

        
<p>
          The main use of such partitions is to use a boolean attribute to
          define an inside/outside property, hence representing arbitrary
          polytopes (line segments in 1D, polygons in 2D and polyhedrons in
          3D) and to operate on them. This is how the regions explained above in the Euclidean
          and Sphere spaces are implemented. The partitioning package provides the engine to do the
          computation, but not the dimension-specific implementations. The
          various interfaces in this package (hyperplane, sub-hyperplane, embedding,
          and even region) are therefore not considered to be reusable public
          interface, they are private interface. They may change and users are not expected to
          rely directly on them. What users can rely on is the BSP tree class itself, and the
          space-specific implementations of the interfaces (i.e. Plane in 3D as the implementation
          of hyperplane, or S2Point on the 2-Sphere as the implementation of Point).
        </p>

        
<p>
          Another example of BST tree use would be to represent Voronoi tesselations, the
          attribute of each cell holding the defining point of the cell. This is not
          available yet.
        </p>

        
<p>
          The application-defined attributes are shared among copied
          instances and propagated to split parts. These attributes are not
          used by the BSP-tree algorithms themselves, so the application can
          use them for any purpose. Since the tree visiting method holds
          internal and leaf nodes differently, it is possible to use
          different classes for internal nodes attributes and leaf nodes
          attributes. This should be used with care, though, because if the
          tree is modified in any way after attributes have been set, some
          internal nodes may become leaf nodes and some leaf nodes may become
          internal nodes.
        </p>
      </div>
      
<div class="section">
<h3><a name="a11.5_Regions"></a>11.5 Regions</h3>
        
<p>
          The regions in all Euclidean and spherical spaces are based on BSP-tree using a <tt>Boolean</tt>
          attribute in the leaf cells representing the inside status of the corresponding cell
          (true for inside cells, false for outside cells). They all need a <tt>tolerance</tt> setting that
          is either provided at construction when the region is built from scratch or inherited from the input
          regions when a region is build by set operations applied to other regions. This setting is used when
          the region itself will be used later in another set operation or when points are tested against the
          region to compute inside/outside/on boundary status. This tolerance is the <i>thickness</i>
          of the hyperplane. Points closer than this value to a boundary hyperplane will be considered
          <i>on boundary</i>. There are no default values anymore for this setting (there was one when
          BSP-tree support was introduced, but it created more problems than it solved, so it has been intentionally
          removed). Setting this tolerance really depends on the expected values for the various coordinates. If for
          example the region is used to model a geological structure with a scale of a few thousand meters, the expected
          coordinates order of magnitude will be about 10<sup>3</sup> and the tolerance could be set to 10<sup>-7</sup>
          (i.e.  0.1 micrometer) or above. If very thin triangles or nearly parallel lines occur, it may be safer to use
          a larger value like 10<sup>-3</sup> for example. Of course if the BSP-tree is used to model a crystal at
          atomic level with coordinates of the order of magnitude about 10<sup>-9</sup> the tolerance should be
          drastically reduced (perhaps down to 10<sup>-20</sup> or so).
        </p>
        
<p>
          The recommended way to build regions is to start from basic shapes built from their boundary representation
          and to use the set operations to combine these basic shapes into more complex shapes. The basic shapes
          that can be constructed from boundary representations must have a closed boundary and be in one part
          without holes. Regions in several non-connected parts or with holes must be built by building the parts
          beforehand and combining them. All regions (<tt>IntervalsSet</tt>, <tt>PolygonsSet</tt>,
          <tt>PolyhedronsSet</tt>, <tt>ArcsSet</tt>, <tt>SphericalPolygonsSet</tt>) provide a dedicated
          constructor using only the mandatory tolerance distance without any other parameters that always create
          the region covering the full space. The empty region case, can be built by building first the full space
          region and applying the <tt>RegionFactory.getComplement()</tt> method to it to get the corresponding
          empty region, it can also be built directly for a one-cell BSP-tree as explained below.
        </p>
        
<p>
          Another way to build regions is to create directly the underlying BSP-tree. All regions (<tt>IntervalsSet</tt>,
          <tt>PolygonsSet</tt>, <tt>PolyhedronsSet</tt>, <tt>ArcsSet</tt>, <tt>SphericalPolygonsSet</tt>)
          provide a dedicated constructor that accepts a BSP-tree and a tolerance. This way to build regions should be
          reserved to dimple cases like the full space, the empty space of regions with only one or two cut hyperplances.
          It is not recommended in the general case and is considered expert use. The leaf nodes of the BSP-tree
          <i>must</i> have a <tt>Boolean</tt> attribute representing the inside status of the corresponding cell
          (true for inside cells, false for outside cells). In order to avoid building too many small objects, it is
          recommended to use the predefined constants <tt>Boolean.TRUE</tt> and <tt>Boolean.FALSE</tt>. Using
          this method, one way to build directly an empty region without complementing the full region is as follows
          (note the tolerance parameter which must be present even for the empty region):
        </p>
        
<div class="source">
<pre>
PolygonsSet empty = new PolygonsSet(new BSPTree&lt;Euclidean2D&gt;(false), tolerance);
        </pre></div>
        
<p>
         In the Euclidean 3D case, the <a href="../apidocs/org/apache/commons/math3/geometry/euclidean/threed/PolyhedronsSet.html">PolyhedronsSet</a>
         class has another specific constructor to build regions from vertices and facets. The signature of this
         constructor is:
        </p>
        
<div class="source">
<pre>
PolyhedronsSet(List&lt;Vector3D&gt; vertices, List&lt;int[]&gt; facets, double tolerance);
        </pre></div>
        
<p>
          The vertices list contains all the vertices of the polyhedrons, the facets list defines the facets,
          as an indirection in the vertices list. Each facet is a short integer array and each element in a
          facet array is the index of one vertex in the list. So in our cube example, the vertices list would
          contain 8 points corresponding to the cube vertices, the facets list would contain 6 facets (the sides
          of the cube) and each facet would contain 4 integers corresponding to the indices of the 4 vertices
          defining one side. Of course, each vertex would be referenced once in three different facets.
        </p>
        
<p>
          Beware that despite some basic consistency checks are performed in the constructor, not everything
          is checked, so it remains under caller responsibility to ensure the vertices and facets are consistent
          and properly define a polyhedrons set. One particular trick is that when defining a facet, the vertices
          <i>must</i> be provided as walking the polygons boundary in <i>trigonometric</i> order (i.e.
          counterclockwise) as seen from the *external* side of the facet. The reason for this is that the walking
          order does define the orientation of the inside and outside parts, so walking the boundary on the wrong
          order would reverse the facet and the polyhedrons would not be the one you intended to define. Coming
          back to our cube example, a logical orientation of the facets would define the polyhedrons as the finite
          volume within the cube to be the inside and the infinite space surrounding the cube as the outside, but
          reversing all facets would also define a perfectly well behaved polyhedrons which would have the infinite
          space surrounding the cube as its inside and the finite volume within the cube as its outside!
        </p>
        
<p>
          If one wants to further look at how it works, there is a test parser for PLY file formats in the unit tests
          section of the library and some basic ply files for a simple geometric shape (the N pentomino) in the test
          resources. This parser uses the constructor defined above as the PLY file format uses vertices and facets
          to represent 3D shapes.
        </p>
       </div>
     </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Optimization</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a12_Optimization"></a>12 Optimization</h2>
      
<p><i>The contents of this section currently describes deprecated classes.</i>
        Please refer to the new <a href="../apidocs/org/apache/commons/math3/optim/package-summary.html">API
        description</a>.
      </p>
      
<p>Least squares optimizers are not in this package anymore, they have been moved
        in a dedicated least-squares sub-package described in the <a href="./leastsquares.html">least squares</a>
        section.
      </p>

      
<div class="section">
<h3><a name="a12.1_Overview"></a>12.1 Overview</h3>
        
<p>
          The optimization package provides algorithms to optimize (i.e. either minimize
          or maximize) some objective or cost function. The package is split in several
          sub-packages dedicated to different kind of functions or algorithms.
          </p>
<ul>
            
<li>the univariate package handles univariate scalar functions,</li>
            
<li>the linear package handles multivariate vector linear functions
                with linear constraints,</li>
            
<li>the direct package handles multivariate scalar functions
            using direct search methods (i.e. not using derivatives),</li>
            
<li>the general package handles multivariate scalar or vector functions
            using derivatives.</li>
            
<li>the fitting package handles curve fitting by univariate real functions</li>
          </ul>
        
        
<p>
        The top level optimization package provides common interfaces for the optimization
        algorithms provided in sub-packages. The main interfaces defines defines optimizers
        and convergence checkers. The functions that are optimized by the algorithms provided
        by this package and its sub-packages are a subset of the one defined in the
        <tt>analysis</tt> package, namely the real and vector valued functions. These
        functions are called objective function here. When the goal is to minimize, the
        functions are often called cost function, this name is not used in this package.
        </p>
        
<p>
        The type of goal, i.e. minimization or maximization, is defined by the enumerated
        <a href="../apidocs/org/apache/commons/math3/optimization/GoalType.html">
        GoalType</a> which has only two values: <tt>MAXIMIZE</tt> and <tt>MINIMIZE</tt>.
        </p>
        
<p>
        Optimizers are the algorithms that will either minimize or maximize, the objective
        function by changing its input variables set until an optimal set is found. There
        are only four interfaces defining the common behavior of optimizers, one for each
        supported type of objective function:
        </p>
<ul>
          
<li><a href="../apidocs/org/apache/commons/math3/optimization/univariate/UnivariateOptimizer.html">
              UnivariateOptimizer</a> for <a href="../apidocs/org/apache/commons/math3/analysis/UnivariateFunction.html">
              univariate real functions</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/optimization/MultivariateOptimizer.html">
              MultivariateOptimizer</a> for <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateFunction.html">
              multivariate real functions</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/optimization/DifferentiableMultivariateOptimizer.html">
              DifferentiableMultivariateOptimizer</a> for <a href="../apidocs/org/apache/commons/math3/analysis/DifferentiableMultivariateFunction.html">
              differentiable multivariate real functions</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/optimization/DifferentiableMultivariateVectorOptimizer.html">
              DifferentiableMultivariateVectorOptimizer</a> for <a href="../apidocs/org/apache/commons/math3/analysis/DifferentiableMultivariateVectorFunction.html">
              differentiable multivariate vectorial functions</a></li>
        </ul>
        

        
<p>
        Despite there are only four types of supported optimizers, it is possible to optimize
        a transform a <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateVectorFunction.html">
        non-differentiable multivariate vectorial function</a> by converting it to a <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateFunction.html">
        non-differentiable multivariate real function</a> thanks to the <a href="../apidocs/org/apache/commons/math3/optimization/LeastSquaresConverter.html">
        LeastSquaresConverter</a> helper class. The transformed function can be optimized using
        any implementation of the <a href="../apidocs/org/apache/commons/math3/optimization/MultivariateOptimizer.html">
        MultivariateOptimizer</a> interface.
        </p>

        
<p>
        For each of the four types of supported optimizers, there is a special implementation
        which wraps a classical optimizer in order to add it a multi-start feature. This feature
        call the underlying optimizer several times in sequence with different starting points
        and returns the best optimum found or all optima if desired. This is a classical way to
        prevent being trapped into a local extremum when looking for a global one.
        </p>
      </div>
      
<div class="section">
<h3><a name="a12.2_Univariate_Functions"></a>12.2 Univariate Functions</h3>
        
<p>
          A <a href="../apidocs/org/apache/commons/math3/optimization/univariate/UnivariateOptimizer.html">
          UnivariateOptimizer</a> is used to find the minimal values of a univariate real-valued
          function <tt>f</tt>.
        </p>
        
<p>
          These algorithms usage is very similar to root-finding algorithms usage explained
          in the analysis package. The main difference is that the <tt>solve</tt> methods in root
          finding algorithms is replaced by <tt>optimize</tt> methods.
        </p>
      </div>
      
<div class="section">
<h3><a name="a12.3_Linear_Programming"></a>12.3 Linear Programming</h3>
        
<p>
          This package provides an implementation of George Dantzig's simplex algorithm
          for solving linear optimization problems with linear equality and inequality
          constraints.
        </p>
      </div>
      
<div class="section">
<h3><a name="a12.4_Direct_Methods"></a>12.4 Direct Methods</h3>
        
<p>
          Direct search methods only use cost function values, they don't
          need derivatives and don't either try to compute approximation of
          the derivatives. According to a 1996 paper by Margaret H. Wright
          (<a class="externalLink" href="http://cm.bell-labs.com/cm/cs/doc/96/4-02.ps.gz">Direct
          Search Methods: Once Scorned, Now Respectable</a>), they are used
          when either the computation of the derivative is impossible (noisy
          functions, unpredictable discontinuities) or difficult (complexity,
          computation cost). In the first cases, rather than an optimum, a
          <i>not too bad</i> point is desired. In the latter cases, an
          optimum is desired but cannot be reasonably found. In all cases
          direct search methods can be useful.
        </p>
        
<p>
          Simplex-based direct search methods are based on comparison of
          the cost function values at the vertices of a simplex (which is a
          set of n+1 points in dimension n) that is updated by the algorithms
          steps.
        </p>
        
<p>
          The instances can be built either in single-start or in
          multi-start mode. Multi-start is a traditional way to try to avoid
          being trapped in a local minimum and miss the global minimum of a
          function. It can also be used to verify the convergence of an
          algorithm. In multi-start mode, the <tt>minimizes</tt>method
          returns the best minimum found after all starts, and the <tt>etMinima</tt>
          method can be used to retrieve all minima from all starts (including the one
          already provided by the <tt>minimizes</tt> method).
        </p>
        
<p>
          The <tt>direct</tt> package provides four solvers:
          </p>
<ul>
            
<li>the classical <a href="../apidocs/org/apache/commons/math3/optimization/direct/NelderMeadSimplex.html">
                Nelder-Mead</a> method,</li>
            
<li>Virginia Torczon's <a href="../apidocs/org/apache/commons/math3/optimization/direct/MultiDirectionalSimplex.html">
                multi-directional</a> method,</li>
            
<li>Nikolaus Hansen's <a href="../apidocs/org/apache/commons/math3/optimization/direct/CMAESOptimizer.html">
               </a>Covariance Matrix Adaptation Evolution Strategy (CMA-ES),</li>
            
<li>Mike Powell's <a href="../apidocs/org/apache/commons/math3/optimization/direct/BOBYQAOptimizer.html">
               BOBYQA</a> method.
            </li>
          </ul>
        
        
<p>
          The first two simplex-based methods do not handle simple bounds constraints by themselves.
          However there are two adapters(<a href="../apidocs/org/apache/commons/math3/optimization/direct/MultivariateFunctionMappingAdapter.html">
          MultivariateFunctionMappingAdapter</a> and <a href="../apidocs/org/apache/commons/math3/optimization/direct/MultivariateFunctionPenaltyAdapter.html">
          MultivariateFunctionPenaltyAdapter</a>) that can be used to wrap the user function in
          such a way the wrapped function is unbounded and can be used with these optimizers, despite
          the fact the underlying function is still bounded and will be called only with feasible
          points that fulfill the constraints. Note however that using these adapters are only a
          poor man solutions to simple bounds optimization constraints. Better solutions are to use an
          optimizer that directly supports simple bounds. Some caveats of the mapping adapter
          solution are that
          </p>
<ul>
            
<li>behavior near the bounds may be numerically unstable as bounds are mapped from
                infinite values,</li>
            
<li>start value is evaluated by the optimizer as an unbounded variable,
                so it must be converted from bounded to unbounded by user,</li>
            
<li>optimum result is evaluated by the optimizer as an unbounded variable,
                so it must be converted from unbounded to bounded by user,</li>
            
<li>convergence values are evaluated by the optimizer as unbounded variables,
                so there will be scales differences when converted to bounded variables,</li>
            
<li>in the case of simplex based solvers, the initial simplex should be set up
                as delta in unbounded variables.</li>
          </ul>
          One caveat of penalty adapter is that if start point or start simplex is outside of the allowed
          range, only the penalty function is used, and the optimizer may converge without ever entering
          the allowed range.
        
        
<p>
          The last methods do handle simple bounds constraints directly, so the adapters are not needed
          with them.
        </p>
      </div>
      
<div class="section">
<h3><a name="a12.5_General_Case"></a>12.5 General Case</h3>
        
<p>
          The general package deals with non-linear vectorial optimization problems when
          the partial derivatives of the objective function are available.
        </p>
        
<p>
          One important class of estimation problems is weighted least
          squares problems. They basically consist in finding the values
          for some parameters p<sub>k</sub> such that a cost function
          J = sum(w<sub>i</sub>(mes<sub>i</sub> - mod<sub>i</sub>)<sup>2</sup>) is
          minimized. The various (target<sub>i</sub> - model<sub>i</sub>(p<sub>k</sub>))
          terms are called residuals. They represent the deviation between a set of
          target values target<sub>i</sub> and theoretical values computed from
          models model<sub>i</sub> depending on free parameters p<sub>k</sub>.
          The w<sub>i</sub> factors are weights. One classical use case is when the
          target values are experimental observations or measurements.
        </p>
        
<p>
          Solving a least-squares problem is finding the free parameters p<sub>k</sub>
          of the theoretical models such that they are close to the target values, i.e.
          when the residual are small.
        </p>
        
<p>
          Two optimizers are available in the general package, both devoted to least-squares
          problems. The first one is based on the <a href="../apidocs/org/apache/commons/math3/optimization/general/GaussNewtonOptimizer.html">
          Gauss-Newton</a> method. The second one is the <a href="../apidocs/org/apache/commons/math3/optimization/general/LevenbergMarquardtOptimizer.html">
          Levenberg-Marquardt</a> method.
        </p>
        
<p>
          In order to solve a vectorial optimization problem, the user must provide it as
          an object implementing the <a href="../apidocs/org/apache/commons/math3/analysis/DifferentiableMultivariateVectorFunction.html">
          DifferentiableMultivariateVectorFunction</a> interface. The object will be provided to
          the <tt>estimate</tt> method of the optimizer, along with the target and weight arrays,
          thus allowing the optimizer to compute the residuals at will. The last parameter to the
          <tt>estimate</tt> method is the point from which the optimizer will start its
          search for the optimal point.
        </p>

    
<dl>
    
<dt>Quadratic Problem Example</dt>
    
<dd>


    We are looking to find the best parameters [a, b, c] for the quadratic function
    <b><tt>f(x) = a x<sup>2</sup> + b x + c</tt></b>.
    The data set below was generated using [a = 8, b = 10, c = 16]. 
    A random number between zero and one was added to each y value calculated.

    
<table border="0" class="bodyTable" cellspacing="0" cellpadding="3">

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;"><b>X</b></td>

<td valign="bottom" align="center" style=" font-size:10pt;"><b>Y</b></td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>

<td valign="bottom" align="center" style=" font-size:10pt;">34.234064369</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">2</td>

<td valign="bottom" align="center" style=" font-size:10pt;">68.2681162306108</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">3</td>

<td valign="bottom" align="center" style=" font-size:10pt;">118.615899084602</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">4</td>

<td valign="bottom" align="center" style=" font-size:10pt;">184.138197238557</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">5</td>

<td valign="bottom" align="center" style=" font-size:10pt;">266.599877916276</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">6</td>

<td valign="bottom" align="center" style=" font-size:10pt;">364.147735251579</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">7</td>

<td valign="bottom" align="center" style=" font-size:10pt;">478.019226091914</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">8</td>

<td valign="bottom" align="center" style=" font-size:10pt;">608.140949270688</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">9</td>

<td valign="bottom" align="center" style=" font-size:10pt;">754.598868667148</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">10</td>

<td valign="bottom" align="center" style=" font-size:10pt;">916.128818085883</td>
</tr>
</table>


<p>
First we need to implement the interface <a href="../apidocs/org/apache/commons/math3/analysis/DifferentiableMultivariateVectorFunction.html">DifferentiableMultivariateVectorFunction</a>.
This requires the implementation of the method signatures:
</p>



<ul>

<li><b>MultivariateMatrixFunction jacobian()</b></li>

<li><b>double[] value(double[] point)</b></li>
</ul>


<p>
We'll tackle the implementation of the <tt>MultivariateMatrixFunction jacobian()</tt> method first.  You may wish to familiarize yourself with what a <a class="externalLink" href="http://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant"> Jacobian Matrix</a> is.
In this case the Jacobian is the partial derivative of the function with respect
to the parameters a, b and c.  These derivatives are computed as follows:
</p>
<ul>
    
<li>d(ax<sup>2</sup> + bx + c)/da = x<sup>2</sup></li>
    
<li>d(ax<sup>2</sup> + bx + c)/db = x</li>
    
<li>d(ax<sup>2</sup> + bx + c)/dc = 1</li>
</ul>



<p>
For a quadratic which has three variables the Jacobian Matrix will have three columns, one for each variable, and the number
of rows will equal the number of rows in our data set, which in this case is ten.  So for example for <tt>[a = 1, b = 1, c = 1]</tt>, the Jacobian Matrix is (excluding the first column which shows the value of x):
</p>


<table border="0" class="bodyTable" cellspacing="0" cellpadding="3">

<tr class="a">

<td valign="bottom" align="left" style=" font-size:10pt;"><b>x</b></td>

<td valign="bottom" align="left" style=" font-size:10pt;"><b>d(ax<sup>2</sup> + bx + c)/da</b></td>

<td valign="bottom" align="left" style=" font-size:10pt;"><b>d(ax<sup>2</sup> + bx + c)/db</b></td>

<td valign="bottom" align="left" style=" font-size:10pt;"><b>d(ax<sup>2</sup> + bx + c)/dc</b></td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">2</td>

<td valign="bottom" align="center" style=" font-size:10pt;">4</td>

<td valign="bottom" align="center" style=" font-size:10pt;">2</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">3</td>

<td valign="bottom" align="center" style=" font-size:10pt;">9</td>

<td valign="bottom" align="center" style=" font-size:10pt;">3</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">4</td>

<td valign="bottom" align="center" style=" font-size:10pt;">16</td>

<td valign="bottom" align="center" style=" font-size:10pt;">4</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">5</td>

<td valign="bottom" align="center" style=" font-size:10pt;">25</td>

<td valign="bottom" align="center" style=" font-size:10pt;">5</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">6</td>

<td valign="bottom" align="center" style=" font-size:10pt;">36</td>

<td valign="bottom" align="center" style=" font-size:10pt;">6</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">7</td>

<td valign="bottom" align="center" style=" font-size:10pt;">49</td>

<td valign="bottom" align="center" style=" font-size:10pt;">7</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">8</td>

<td valign="bottom" align="center" style=" font-size:10pt;">64</td>

<td valign="bottom" align="center" style=" font-size:10pt;">8</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="b">

<td valign="bottom" align="center" style=" font-size:10pt;">9</td>

<td valign="bottom" align="center" style=" font-size:10pt;">81</td>

<td valign="bottom" align="center" style=" font-size:10pt;">9</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>

<tr class="a">

<td valign="bottom" align="center" style=" font-size:10pt;">10</td>

<td valign="bottom" align="center" style=" font-size:10pt;">100</td>

<td valign="bottom" align="center" style=" font-size:10pt;">10</td>

<td valign="bottom" align="center" style=" font-size:10pt;">1</td>
</tr>
</table>


<p>
The implementation of the <tt>MultivariateMatrixFunction jacobian()</tt> for this problem looks like this (The <tt>x</tt>
parameter is an ArrayList containing the independent values of the data set):
</p>


<div class="source">
<pre>
 private double[][] jacobian(double[] variables) {
     double[][] jacobian = new double[x.size()][3];
     for (int i = 0; i &lt; jacobian.length; ++i) {
         jacobian[i][0] = x.get(i) * x.get(i);
         jacobian[i][1] = x.get(i);
         jacobian[i][2] = 1.0;
     }
     return jacobian;
 }

 public MultivariateMatrixFunction jacobian() {
     return new MultivariateMatrixFunction() {
         private static final long serialVersionUID = -8673650298627399464L;
         public double[][] value(double[] point) {
             return jacobian(point);
         }
     };
 }
</pre></div>


<p>
Note that if for some reason the derivative of the objective function with respect
to its variables is difficult to obtain,
<a class="externalLink" href="http://en.wikipedia.org/wiki/Numerical_differentiation">Numerical differentiation</a> can be used.
</p>



<p>
The implementation of the <tt>double[] value(double[] point)</tt> method, which returns
 a <tt>double</tt> array containing the
values the objective function returns per given independent value
and the current set of variables or parameters,
can be seen below:
</p>


<div class="source">
<pre>
    public double[] value(double[] variables) {
        double[] values = new double[x.size()];
        for (int i = 0; i &lt; values.length; ++i) {
            values[i] = (variables[0] * x.get(i) + variables[1]) * x.get(i) + variables[2];
        }
        return values;
    }
</pre></div>


<p>
Below is the the class containing all the implementation details
(Taken from the Apache Commons Math <b>org.apache.commons.math3.optimization.general.LevenbergMarquardtOptimizerTest</b>):
</p>


<div class="source">
<pre>
private static class QuadraticProblem
    implements DifferentiableMultivariateVectorFunction, Serializable {

    private static final long serialVersionUID = 7072187082052755854L;
    private List&lt;Double&gt; x;
    private List&lt;Double&gt; y;

    public QuadraticProblem() {
        x = new ArrayList&lt;Double&gt;();
        y = new ArrayList&lt;Double&gt;();
    }

    public void addPoint(double x, double y) {
        this.x.add(x);
        this.y.add(y);
    }

    public double[] calculateTarget() {
        double[] target = new double[y.size()];
        for (int i = 0; i &lt; y.size(); i++) {
            target[i] = y.get(i).doubleValue();
        }
        return target;
    }

    private double[][] jacobian(double[] variables) {
        double[][] jacobian = new double[x.size()][3];
        for (int i = 0; i &lt; jacobian.length; ++i) {
            jacobian[i][0] = x.get(i) * x.get(i);
            jacobian[i][1] = x.get(i);
            jacobian[i][2] = 1.0;
        }
        return jacobian;
    }

    public double[] value(double[] variables) {
        double[] values = new double[x.size()];
        for (int i = 0; i &lt; values.length; ++i) {
            values[i] = (variables[0] * x.get(i) + variables[1]) * x.get(i) + variables[2];
        }
        return values;
    }

    public MultivariateMatrixFunction jacobian() {
        return new MultivariateMatrixFunction() {
            private static final long serialVersionUID = -8673650298627399464L;
            public double[][] value(double[] point) {
                return jacobian(point);
            }
        };
    }
}
</pre></div>


<p>
The below code shows how to go about using the above class
and a LevenbergMarquardtOptimizer instance to produce an
optimal set of quadratic curve fitting parameters:
</p>

    
<div class="source">
<pre>
 QuadraticProblem problem = new QuadraticProblem();

 problem.addPoint(1, 34.234064369);
 problem.addPoint(2, 68.2681162306);
 problem.addPoint(3, 118.6158990846);
 problem.addPoint(4, 184.1381972386);
 problem.addPoint(5, 266.5998779163);
 problem.addPoint(6, 364.1477352516);
 problem.addPoint(7, 478.0192260919);
 problem.addPoint(8, 608.1409492707);
 problem.addPoint(9, 754.5988686671);
 problem.addPoint(10, 916.1288180859);

 LevenbergMarquardtOptimizer optimizer = new LevenbergMarquardtOptimizer();

 final double[] weights = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 };

 final double[] initialSolution = {1, 1, 1};

 PointVectorValuePair optimum = optimizer.optimize(100,
                                                   problem,
                                                   problem.calculateTarget(),
                                                   weights,
                                                   initialSolution);

 final double[] optimalValues = optimum.getPoint();

 System.out.println(&quot;A: &quot; + optimalValues[0]);
 System.out.println(&quot;B: &quot; + optimalValues[1]);
 System.out.println(&quot;C: &quot; + optimalValues[2]);

    </pre></div>


<p>
If you run the above sample you will see
the following printed by the console:
</p>


<div>
<pre>
A: 7.998832172372726
B: 10.001841530162448
C: 16.324008168386605
</pre></div>

    </dd></dl>
        
<p>
          In addition to least squares solving, the <a href="../apidocs/org/apache/commons/math3/optimization/general/NonLinearConjugateGradientOptimizer.html">
          NonLinearConjugateGradientOptimizer</a> class provides a non-linear conjugate gradient algorithm
          to optimize <a href="../apidocs/org/apache/commons/math3/analysis/DifferentiableMultivariateFunction.html">
          DifferentiableMultivariateFunction</a>. Both the Fletcher-Reeves and the Polak-Ribi&#xe8;re
          search direction update methods are supported. It is also possible to set up a preconditioner
          or to change the line-search algorithm of the inner loop if desired (the default one is a Brent
          solver).
        </p>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/optimization/direct/PowellOptimizer.html">
          PowellOptimizer</a> provides an optimization method for non-differentiable functions.
        </p>
      </div>
     </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Curve Fitting</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a13_Curve_Fitting"></a>13 Curve Fitting</h2>
      
<div class="section">
<h3><a name="a13.1_Overview"></a>13.1 Overview</h3>
        
<p>
          The fitting package deals with curve fitting for univariate real functions.
          When a univariate real function y = f(x) does depend on some unknown parameters
          p<sub>0</sub>, p<sub>1</sub> ... p<sub>n-1</sub>, curve fitting can be used to
          find these parameters. It does this by <i>fitting</i> the curve so it remains
          very close to a set of observed points (x<sub>0</sub>, y<sub>0</sub>),
          (x<sub>1</sub>, y<sub>1</sub>) ... (x<sub>k-1</sub>, y<sub>k-1</sub>). This
          fitting is done by finding the parameters values that minimizes the objective
          function &#x3a3;(y<sub>i</sub> - f(x<sub>i</sub>))<sup>2</sup>. This is actually a
          least-squares problem.
        </p>
        
<p>
          For all provided curve fitters, the operating principle is the same.
          Users must
          </p>
<ul>
            
<li>
              create an instance of the fitter using the <tt>create</tt> factory method of the
              appropriate class,
            </li>
            
<li>
              call the <a href="../apidocs/org/apache/commons/math3/fitting/AbstractCurveFitter">fit</a>
              with a <tt>Collection</tt> of <a href="../apidocs/org/apache/commons/math3/fitting/WeightedObservedPoint.html">
                observed data points</a> as argument, which will return an array with the parameters that
              best fit the given data points.
            </li>
          </ul>

          The list of observed data points to be passed to <tt>fit</tt> can be built by incrementally
          adding instances to an instance of <a href="../apidocs/org/apache/commons/math3/fitting/WeightedObservedPoints.html">WeightedObservedPoints</a>,
          and then retrieve the list of <tt>WeightedObservedPoint</tt> by calling the <tt>toList</tt>
          method on that container.
          A weight can be associated with each observed point; it allows to take into account uncertainty
          on some points when they come from noisy measurements for example. If no such information exist and
          all points should be treated the same, it is safe to put 1.0 as the weight for all points (and this
          is the default when no weight is passed to the <tt>add</tt>.
        

        
<p>
          Some fitters require that initial values for the parameters are provided by the user,
          through the <tt>withStartPoint</tt> method, before attempting to perform the fit.
          When that's the case the fitter class usually defines a guessing procedure within a
          <tt>ParameterGuesser</tt> inner class, that attempts to provide appropriate initial
          values based on the user-supplied data.
          When initial values are required but are not provided, the <tt>fit</tt> method will
          internally call the guessing procedure.
        </p>

      </div>

      
<div class="section">
<h3><a name="a13.2_Implemented_Functions"></a>13.2 Implemented Functions</h3>

        
<p>
          Fitting of specific functions are provided through the following classes:
          </p>
<ul>
            
<li>
              <a href="../apidocs/org/apache/commons/math3/fitting/PolynomialCurveFitter.html">
                PolynomialFitter</a> fits a
              <a href="../apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialFunction.Parametric.html">
                polynomial</a> function.
            </li>
            
<li>
              <a href="../apidocs/org/apache/commons/math3/fitting/HarmonicCurveFitter.html">
                HarmonicFitter</a> fits a
              <a href="../apidocs/org/apache/commons/math3/analysis/function/HarmonicOscillator.Parametric.html">
                harmonic</a> function.
              An instance of the inner class <a href="../apidocs/org/apache/commons/math3/fitting/HarmonicCurveFitter.ParameterGuesser.html">
                ParameterGuesser</a> can be used to retrieve initial values for the fitting procedure.
            </li>
            
<li>
              <a href="../apidocs/org/apache/commons/math3/fitting/GaussianCurveFitter.html">
                GaussianFitter</a> fits a
              <a href="../apidocs/org/apache/commons/math3/analysis/function/Gaussian.Parametric.html">
                Gaussian</a> function.
              An instance of the inner class <a href="../apidocs/org/apache/commons/math3/fitting/GaussianCurveFitter.ParameterGuesser.html">
                ParameterGuesser</a> can be used to retrieve initial values for the fitting procedure.
            </li>
          </ul>
        

        
<p>
          The following example shows how to fit data with a polynomial function.
        </p>

        
<div class="source">
<pre>// Collect data.
final WeightedObservedPoints obs = new WeightedObservedPoints();
obs.add(-1.00, 2.021170021833143);
obs.add(-0.99, 2.221135431136975);
obs.add(-0.98, 2.09985277659314);
obs.add(-0.97, 2.0211192647627025);
// ... Lots of lines omitted ...
obs.addt(0.99, -2.4345814727089854);

// Instantiate a third-degree polynomial fitter.
final PolynomialCurveFitter fitter = PolynomialCurveFitter.create(3);

// Retrieve fitted parameters (coefficients of the polynomial function).
final double[] coeff = fitter.fit(obs.toList());
        </pre></div>

      </div>

      
<div class="section">
<h3><a name="a13.3_General_Case"></a>13.3 General Case</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/fitting/AbstractCurveFitter.html">
            AbstractCurveFitter</a> class provides the basic functionality for implementing other
          curve fitting classes.
          Users must provide their own implementation of the curve template as a class that implements
          the <a href="../apidocs/org/apache/commons/math3/analysis/ParametricUnivariateFunction.html">
            ParametricUnivariateFunction</a> interface.
        </p>
      </div>

     </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Least squares</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a14_Least_squares"></a>14 Least squares</h2>
      
<div class="section">
<h3><a name="a14.1_Overview"></a>14.1 Overview</h3>
        
<p>
          The least squares package fits a parametric model to a set of observed
          values by minimizing a cost function with a specific form.
          The fitting basically consists in finding the values
          for some parameters p<sub>k</sub> such that a cost function
          J = sum(w<sub>i</sub>(target<sub>i</sub> - model<sub>i</sub>)<sup>2</sup>) is
          minimized. The various (target<sub>i</sub> - model<sub>i</sub>(p<sub>k</sub>))
          terms are called residuals. They represent the deviation between a set of
          target values target<sub>i</sub> and theoretical values computed from
          models model<sub>i</sub> depending on free parameters p<sub>k</sub>.
          The w<sub>i</sub> factors are weights. One classical use case is when the
          target values are experimental observations or measurements.
        </p>
        
<p>
          Two engines devoted to least-squares problems are available. The first one is
          based on the <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/GaussNewtonOptimizer.html">
          Gauss-Newton</a> method. The second one is the <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LevenbergMarquardtOptimizer.html">
          Levenberg-Marquardt</a> method.
        </p>
      </div>

      
<div class="section">
<h3><a name="a14.2_LeastSquaresBuilder_and_LeastSquaresFactory"></a>14.2 LeastSquaresBuilder and LeastSquaresFactory</h3>

        
<p>
          In order to solve a least-squares fitting problem, the user must provide the following elements:
          </p>
<ul>
           
<li>a mean to evaluate all the components of the model for a given set of parameters:
               model<sub>i</sub> = f<sub>i</sub>(p<sub>1</sub>, p<sub>2</sub>, ... p<sub>k</sub>),
               this is code</li>
           
<li>the target (or observed) components: target<sub>i</sub>, this is data</li>
           
<li>the start values for all p<sub>k</sub> parameters: s<sub>k</sub>, this is data</li>
           
<li>optionally a validator for the p<sub>k</sub> parameters, this is code</li>
           
<li>optionally the weight for sample point i: w<sub>i</sub>, this is data and defaults to 1.0 if not provided</li>
           
<li>a maximum number of iterations, this is data</li>
           
<li>a maximum number of evaluations, this is data</li>
           
<li>a convergence criterion, this is code</li>
          </ul>
        
        
<p>
          The elements of the list above can be provided as an implementation of the
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresProblem.html">
          LeastSquaresProblem</a> interface. However, this is cumbersome to do directly, so some helper
          classes are available. The first helper is a mutable builder:
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresBuilder.html">
          LeastSquaresBuilder</a>. The second helper is an utility factory:
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresFactory.html">
          LeastSquaresFactory</a>.
        </p>
        
<p>
          The builder class is better suited when setting the various elements of the least squares
          problem is done progressively in different places in the user code. In this case, the user
          would create first an empty builder andconfigure it progressively by calling its methods
          (<tt>start</tt>, <tt>target</tt>, <tt>model</tt>, ...). Once the configuration
          is complete, calling the <tt>build</tt> method would create the least squares problem.
        </p>
        
<p>
          The factory utility is better suited when the various elements of the least squares
          problem are all known at one place and the problem can be built in just one sweep, calling
          to one of the static <tt>LeastSquaresFactory.create</tt> method.
        </p>
      </div>

      
<div class="section">
<h3><a name="a14.3_Model_Function"></a>14.3 Model Function</h3>
        
<p>
          The model function is used by the least squares engine to evaluate the model components
          model<sub>i</sub> given some test parameters p<sub>k</sub>. It is therefore a multivariate
          function (it depends on the various p<sub>k</sub>) and it is vector-valued (it has several
          components model<sub>i</sub>). There must be exactly one component model<sub>i</sub> for
          each target (or observed) component target<sub>i</sub>, otherwise some residuals to be
          squared and summed could not be computed. In order for the problem to be well defined, the
          number of parameters p<sub>k</sub> must be less than the number of components model<sub>i</sub>.
          Failing to ensure this may lead to the engine throwing an exception as the underlying linear
          algebra operations may encounter singular matrices. It is not unusual to have a large number
          of components (several thousands) and only a dozen parameters. There are no limitations on these
          numbers, though.
        </p>
        
<p>
          As the least squares engine needs to create Jacobians matrices for the model function, both
          its value and its derivatives <i>with respect to the p<sub>k</sub> parameters</i> must
          be available. There are two ways to provide this:
          </p>
<ul>
            
<li>provide one
            <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateVectorFunction.html">MultivariateVectorFunction</a>
            instance for computing the components values and one
            <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateMatrixFunction.html">MultivariateMatrixFunction</a>
            instance for computing the components derivatives (i.e. the Jacobian matrix) with
            respect to the parameters,</li>
            
<li>or provide one
            <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/MultivariateJacobianFunction.html">MultivariateJacobianFunction</a>
            instance for computing both the components values and their derivatives simultaneously.</li>
          </ul>
          The first alternative is best suited for models which are not computationally intensive
          as it allows more modularized code with one method for each type of computation. The second
          alternative is best suited for models which are computationally intensive and evaluating
          both the values and derivatives in one sweep saves a lot of work.
        
        
<p>
          The <tt>point</tt> parameter of the <tt>value</tt> methods in the
          <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateVectorFunction.html">MultivariateVectorFunction</a>,
          <a href="../apidocs/org/apache/commons/math3/analysis/MultivariateMatrixFunction.html">MultivariateMatrixFunction</a>,
          or <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/MultivariateJacobianFunction.html">MultivariateJacobianFunction</a>
          interfaces will contain the parameters p<sub>k</sub>. The values will be the model components
          model<sub>i</sub> and the derivatives will be the derivatives of the model components
          with respect to the parameters dmodel<sub>i</sub>/dp<sub>k</sub>.
        </p>
        
<p>
          There are no requirements on how to compute value and derivatives. The
          <a href="../apidocs/org/apache/commons/math3/analysis/differentiation/DerivativeStructure.html">
          DerivativeStructure</a> class may be useful to compute analytically derivatives in
          difficult cases, but this class is not mandated by the API which only expects the derivatives
          as a Jacobian matrix containing primitive double entries.
        </p>
        
<p>
          One non-obvious feature provided by both the builder and the factory is lazy evaluation. This feature
          allows to defer calls to the model functions until they are really needed by the engine. This
          can save some calls for engines that evaluate the value and the Jacobians in different loops
          (this is the case for Levenberg-Marquardt). However, lazy evaluation is possible <i>only</i>
          if the model functions are themselves separated, i.e. it can be used only with the first
          alternative above. Setting up the <tt>lazyEvaluation</tt> flag to <tt>true</tt> in the builder
          or factory and setting up the model function as one
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/MultivariateJacobianFunction.html">MultivariateJacobianFunction</a>
          instance at the same time will trigger an illegal state exception telling that the model function
          misses required functionality.
        </p>
      </div>

      
<div class="section">
<h3><a name="a14.4_Parameters_Validation"></a>14.4 Parameters Validation</h3>
       
<p>
         In some cases, the model function requires parameters to lie within a specific domain. For example
         a parameter may be used in a square root and needs to be positive, or another parameter represents
         the sine of an angle and should be within -1 and +1, or several parameters may need to remain in
         the unit circle and the sum of their squares must be smaller than 1. The least square solvers available
         in Apache Commons Math currently don't allow to set up constraints on the parameters. This is a
         known missing feature. There are two ways to circumvent this.
       </p>
       
<p>
         Both ways are achieved by setting up a
         <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/ParameterValidator.html">ParameterValidator</a>
         instance. The input of the value and jacobian model functions will always be the output of
         the parameter validator if one exists.
       </p>
       
<p>
         One way to constrain parameters is to use a continuous mapping between the parameters that the
         least squares solver will handle and the real parameters of the mathematical model. Using mapping
         functions like <tt>logit</tt> and <tt>sigmoid</tt>, one can map a finite range to the
         infinite real line. Using mapping functions based on <tt>log</tt> and <tt>exp</tt>, one
         can map a semi-infinite range to the infinite real line. It is possible to use such a mapping so
         that the engine will always see unbounded parameters, whereas on the other side of the mapping the
         mathematical model will always see parameters mapped correctly to the expected range. Care must be
         taken with derivatives as one must remember that the parameters have been mapped. Care must also
         be taken with convergence status. This may be tricky.
       </p>
       
<p>
         Another way to constrain parameters is to simply truncate the parameters back to the domain when
         one search point escapes from it and not care about derivatives. This works <i>only</i> if the
         solution is expected to be inside the domain and not at the boundary, as points out of the domain
         will only be temporary test points with a cost function higher than the real solution and will soon
         be dropped by the underlying engine. As a rule of thumb, these conditions are met only when the
         domain boundaries correspond to unrealistic values that will never be achieved (null distances,
         negative masses, ...) but they will not be met when the domain boundaries are more operational
         limits (a maximum weight that can be handled by a device, a minimum temperature that can be
         sustained by an instrument, ...).
       </p>
      </div>

      
<div class="section">
<h3><a name="a14.5_Tuning"></a>14.5 Tuning</h3>
        
<p>
          Among the elements to be provided to the least squares problem builder or factory
          are some tuning parameters for the solver.
        </p>
        
<p>
          The maximum number of iterations refers to the engine algorithm main loop, whereas the
          maximum number of iterations refers to the number of calls to the model method. Some
          algorithms (like Levenberg-Marquardt) have two embedded loops, with iteration number
          being incremented at outer loop level, but a new evaluation being done at each inner
          loop. In this case, the number of evaluations will be greater than the number of iterations.
          Other algorithms (like Gauss-Newton) have only one level of loops. In this case, the
          number of evaluations will equal to the number of iterations. In any case, the maximum
          numbers are really only intended as safeguard to prevent infinite loops, so the exact
          value of the limit is not important so it is common to select some almost arbitrary number
          much larger than the expected number of evaluations and use it for both
          <tt>maxIterations</tt> and <tt>maxEvaluations</tt>. As an example, if the least
          squares solver usually finds a solution in 50 iterations, setting a maximum value to 1000
          is probably safe and prevents infinite loops. If the least squares solver needs several
          hundreds of evaluations, it would probably be safer to set the maximum value to 10000 or
          even 1000000 to avoid failures in slightly more demanding cases. Very fine tuning of
          these maximum numbers is often worthless, they are only intended as safeguards.
        </p>
        
<p>
          Convergence checking is delegated to a dedicated interface from the <tt>optim</tt>
          package: <a href="../apidocs/org/apache/commons/math3/optim/ConvergenceChecker.html">
          ConvergenceChecker</a>, parameterized with either the specific
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresProblem.Evaluation.html">Evaluation</a>
          class used for least squares problems or the general
          <a href="../apidocs/org/apache/commons/math3/optim/PointVectorValuePair.html">PointVectorValuePair</a>.
          Each time convergence is checked, both the previous
          and the current evaluations of the least squares problem are provided, so the checker can
          compare them and decide whereas convergence has been reached or not. The predefined convergence
          checker implementations that can be useful for least squares fitting are:
          </p>
<ul>
            
<li><a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/EvaluationRmsChecker.html">EvaluationRmsChecker</a>,
            which uses only the normalized cost (square-root of the sum of squared of the residuals,
            divided by the number of measurements),</li>
            
<li><a href="../apidocs/org/apache/commons/math3/optim/SimpleVectorValueChecker.html">SimpleVectorValueChecker</a>,
            which uses the model components themselves (<i>not</i> the residuals),</li>
            
<li><a href="../apidocs/org/apache/commons/math3/optim/SimplePointChecker.html">SimplePointChecker&lt;PointVectorValuePair&gt;</a>,
            which uses the parameters.</li>
          </ul>
          Of course, users can also provide their own implementation of the
          <a href="../apidocs/org/apache/commons/math3/optim/ConvergenceChecker.html">ConvergenceChecker</a>
          interface.
        
      </div>

      
<div class="section">
<h3><a name="a14.6_Optimization_Engine"></a>14.6 Optimization Engine</h3>
        
<p>
          Once the least squares problem has been created, using either the builder or the factory,
          it is passed to an optimization engine for solving. Two engines devoted to least-squares
          problems are available. The first one is
          based on the <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/GaussNewtonOptimizer.html">
          Gauss-Newton</a> method. The second one is the <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LevenbergMarquardtOptimizer.html">
          Levenberg-Marquardt</a> method. For both increased readability and in order to leverage
          possible future changes in the configuration, it is recommended to use the fluent-style API to
          build and configure the optimizers. This means creating a first temporary version of the optimizer
          with a default parameterless constructor, and then to set up the various configuration parameters
          using the available <tt>withXxx</tt> methods that all return a new optimizer instance. Only the
          final fully configured instance is used. As an example, setting up a Levenberg-Marquardt with
          all configuration set to default except the cost relative tolerance and parameter relative tolerance
          would be done as follows:
        </p>
        
<div class="source">
<pre>
  LeastSquaresOptimizer optimizer = new LevenbergMarquardtOptimizer().
                                    withCostRelativeTolerance(1.0e-12).
                                    withParameterRelativeTolerance(1.0e-12);
        </pre></div>

        
<p>
        As another example, setting up a Gauss-Newton optimizer and forcing the decomposition to SVD (the
        default is QR decomposition) would be done as follows:
        </p>
        
<div class="source">
<pre>
  LeastSquaresOptimizer optimizer = new GaussNewtonOptimizer().
                                    withwithDecomposition(GaussNewtonOptimizer.Decomposition.QR);
        </pre></div>

      </div>

      
<div class="section">
<h3><a name="a14.7_Solving"></a>14.7 Solving</h3>
        
<p>
        Solving the least squares problem is done by calling the <tt>optimize</tt> method of the
        optimizer and passing the least squares problem as the single parameter:
        </p>
        
<div class="source">
<pre>
  LeastSquaresOptimizer.Optimum optimum = optimizer.optimize(leastSquaresProblem);
        </pre></div>

        
<p>
          The <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresOptimizer.Optimum.html">
          LeastSquaresOptimizer.Optimum</a> class is a specialized
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresProblem.Evaluation.html">Evaluation</a>
          with additional methods te retrieve the number of evaluations and number of iterations performed.
          The most important methods are inherited from the
          <a href="../apidocs/org/apache/commons/math3/fitting/leastsquares/LeastSquaresProblem.Evaluation.html">Evaluation</a>
          class and correspond to the point (i.e. the parameters), cost, Jacobian, RMS, covariance ...
        </p>
      </div>

      
<div class="section">
<h3><a name="a14.8_Example"></a>14.8 Example</h3>
        
<p>
          The following simple example shows how to find the center of a circle of known radius to
          to best fit observed 2D points. It is a simplified version of one of the JUnit test cases.
          In the complete test case, both the circle center and its radius are fitted, here the
          radius is fixed.
        </p>
        
<div class="source">
<pre>
  final double radius = 70.0;
  final Vector2D[] observedPoints = new Vector2D[] {
      new Vector2D( 30.0,  68.0),
      new Vector2D( 50.0,  -6.0),
      new Vector2D(110.0, -20.0),
      new Vector2D( 35.0,  15.0),
      new Vector2D( 45.0,  97.0)
  };

  // the model function components are the distances to current estimated center,
  // they should be as close as possible to the specified radius
  MultivariateJacobianFunction distancesToCurrentCenter = new MultivariateJacobianFunction() {
      public Pair&lt;RealVector, RealMatrix&gt; value(final RealVector point) {

          Vector2D center = new Vector2D(point.getEntry(0), point.getEntry(1));

          RealVector value = new ArrayRealVector(observedPoints.length);
          RealMatrix jacobian = new Array2DRowRealMatrix(observedPoints.length, 2);

          for (int i = 0; i &lt; observedPoints.length; ++i) {
              Vector2D o = observedPoints[i];
              double modelI = Vector2D.distance(o, center);
              value.setEntry(i, modelI);
              // derivative with respect to p0 = x center
              jacobian.setEntry(i, 0, (center.getX() - o.getX()) / modelI);
              // derivative with respect to p1 = y center
              jacobian.setEntry(i, 1, (center.getX() - o.getX()) / modelI);
          }

          return new Pair&lt;RealVector, RealMatrix&gt;(value, jacobian);

      }
  };

  // the target is to have all points at the specified radius from the center
  double[] prescribedDistances = new double[observedPoints.length];
  Arrays.fill(prescribedDistances, radius);

  // least squares problem to solve : modeled radius should be close to target radius
  LeastSquaresProblem problem = new LeastSquaresBuilder().
                                start(new double[] { 100.0, 50.0 }).
                                model(distancesToCurrentCenter).
                                target(prescribedDistances).
                                lazyEvaluation(false).
                                maxEvaluations(1000).
                                maxIterations(1000).
                                build();
  LeastSquaresOptimizer.Optimum optimum = new LevenbergMarquardtOptimizer().optimize(problem);
  Vector2D fittedCenter = new Vector2D(optimum.getPoint().getEntry(0), optimum.getPoint().getEntry(1));
  System.out.println(&quot;fitted center: &quot; + fittedCenter.getX() + &quot; &quot; + fittedCenter.getY());
  System.out.println(&quot;RMS: &quot;           + optimum.getRMS());
  System.out.println(&quot;evaluations: &quot;   + optimum.getEvaluations());
  System.out.println(&quot;iterations: &quot;    + optimum.getIterations());
        </pre></div>
      </div>

     </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Ordinary Differential Equations Integration</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a15_Ordinary_Differential_Equations_Integration"></a>15 Ordinary Differential Equations Integration</h2>
      
<div class="section">
<h3><a name="a15.1_Overview"></a>15.1 Overview</h3>
        
<p>
          The ode package provides classes to solve Ordinary Differential Equations problems.
        </p>
        
<p>
          This package solves Initial Value Problems of the form y'=f(t,y) with t<sub>0</sub>
          and y(t<sub>0</sub>)=y<sub>0</sub> known. The provided integrators compute an estimate
          of y(t) from t=t<sub>0</sub> to t=t<sub>1</sub>.
        </p>
        
<p>
          All integrators provide dense output. This means that besides computing the state vector
          at discrete times, they also provide a cheap mean to get both the state and its derivative
          between the time steps. They do so through classes extending the
          <a href="../apidocs/org/apache/commons/math3/ode/sampling/StepInterpolator.html">StepInterpolator</a>
          abstract class, which are made available to the user at the end of each step.
        </p>
        
<p>
          All integrators handle multiple discrete events detection based on switching
          functions. This means that the integrator can be driven by user specified discrete events
          (occurring when the sign of user-supplied <i>switching function</i> changes). The steps are
          shortened as needed to ensure the events occur at step boundaries (even if the integrator
          is a fixed-step integrator). When the events are triggered, integration can
          be stopped (this is called a G-stop facility), the state vector can be changed, or integration
          can simply go on. The latter case is useful to handle discontinuities in the differential
          equations gracefully and get accurate dense output even close to the discontinuity.
        </p>
        
<p>
          All integrators support setting a maximal number of evaluations of differential
          equations function. If this number is exceeded, an exception will be thrown during
          integration. This can be used to prevent infinite loops if for example error control or
          discrete events create a really large number of extremely small steps. By default, the
          maximal number of evaluation is set to <tt>Integer.MAX_VALUE</tt> (i.e. 2<sup>31</sup>-1
          or 2147483647). It is recommended to set this maximal number to a value suited to the ODE
          problem, integration range, and step size or error control settings.
        </p>
        
<p>
          All integrators support expanding the main ODE with one or more secondary ODE to manage
          additional state that will be integrated together with the main state. This can be used
          for example to integrate variational equations and compute not only the main state but also
          its partial derivatives with respect to either the initial state or some parameters, these
          derivatives being handled be secondary ODE (see below for an example).
        </p>
        
<p>
         Two parallel APIs are available. The first is devoted to solve ode for which the integration free
         variable t and the state y(t) are primitive double and primitive double array respectively. Starting
         with version 3.6, a second API is devoted to solve ode for which the integration free
         variable t and the state y(t) are <tt>RealFieldElement</tt> and <tt>RealFieldElement</tt>
         array respectively. This allow for example users to integrate ode where the computation values
         are for example <tt>DerivativeStructure</tt> elements, hence automatically computing
         partial derivatives with respect to some equations parameters without a need to set up the
         variational equations. Another example is to use <tt>Dfp</tt> elements in order to solve
         ode with extended precision. As of 3.6, the API are slightly different, mainly in the way they
         handle arrays. Both API will become more similar in 4.0 and future versions as the older
         primitive double API will be modified to match the newer field API. This cannot be done in
         3.6 for compatibility reasons.
        </p>
        
<p>
          The user should describe his problem in his own classes which should implement the
          <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderDifferentialEquations.html">FirstOrderDifferentialEquations</a>
          interface (or  <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderFieldDifferentialEquations.html">FirstOrderFieldDifferentialEquations</a>
          interface). Then he should pass it to the integrator he prefers among all the classes that implement
          the <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderIntegrator.html">FirstOrderIntegrator</a>
          interface (or the <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderFieldIntegrator.html">FirstOrderFieldIntegrator</a>
          interface). The following example shows how to implement the simple two-dimensional problem using double primitives:
          </p>
<ul>
            
<li>y'<sub>0</sub>(t) = &#x3c9; &#xd7; (c<sub>1</sub> - y<sub>1</sub>(t))</li>
            
<li>y'<sub>1</sub>(t) = &#x3c9; &#xd7; (y<sub>0</sub>(t) - c<sub>0</sub>)</li>
          </ul>
          with some initial state y(t<sub>0</sub>) = (y<sub>0</sub>(t<sub>0</sub>), y<sub>1</sub>(t<sub>0</sub>)).
          In fact, the exact solution of this problem is that y(t) moves along a circle
          centered at c = (c<sub>0</sub>, c<sub>1</sub>) with constant angular rate &#x3c9;.
        
        
<div class="source">
<pre>
private static class CircleODE implements FirstOrderDifferentialEquations {

    private double[] c;
    private double omega;

    public CircleODE(double[] c, double omega) {
        this.c     = c;
        this.omega = omega;
    }

    public int getDimension() {
        return 2;
    }

    public void computeDerivatives(double t, double[] y, double[] yDot) {
        yDot[0] = omega * (c[1] - y[1]);
        yDot[1] = omega * (y[0] - c[0]);
    }

}
        </pre></div>
        
<p>
          Computing the state y(16.0) starting from y(0.0) = (0.0, 1.0) and integrating the ODE
          is done as follows (using Dormand-Prince 8(5,3) integrator as an example):
        </p>
        
<div class="source">
<pre>
FirstOrderIntegrator dp853 = new DormandPrince853Integrator(1.0e-8, 100.0, 1.0e-10, 1.0e-10);
FirstOrderDifferentialEquations ode = new CircleODE(new double[] { 1.0, 1.0 }, 0.1);
double[] y = new double[] { 0.0, 1.0 }; // initial state
dp853.integrate(ode, 0.0, y, 16.0, y); // now y contains final state at time t=16.0
        </pre></div>
      </div>
      
<div class="section">
<h3><a name="a15.2_Continuous_Output"></a>15.2 Continuous Output</h3>
        
<p>
          The solution of the integration problem is provided by two means. The first one is aimed towards
          simple use: the state vector at the end of the integration process is copied in the y array of the
          <tt>FirstOrderIntegrator.integrate</tt> method, as shown by previous example. The second one
          should be used when more in-depth information is needed throughout the integration process. The user
          can register an object implementing the
          <a href="../apidocs/org/apache/commons/math3/ode/sampling/StepHandler.html">StepHandler</a> interface or a
          <a href="../apidocs/org/apache/commons/math3/ode/sampling/StepNormalizer.html">StepNormalizer</a> object wrapping
          a user-specified object implementing the
          <a href="../apidocs/org/apache/commons/math3/ode/sampling/FixedStepHandler.html">FixedStepHandler</a> interface
          into the integrator before calling the <tt>FirstOrderIntegrator.integrate</tt> method. The user object
          will be called appropriately during the integration process, allowing the user to process intermediate
          results. The default step handler does nothing. Considering again the previous example, we want to print the
          trajectory of the point to check it really is a circle arc. We simply add the following before the call
          to integrator.integrate:
        </p>
        
<div class="source">
<pre>
StepHandler stepHandler = new StepHandler() {
    public void init(double t0, double[] y0, double t) {
    }
            
    public void handleStep(StepInterpolator interpolator, boolean isLast) {
        double   t = interpolator.getCurrentTime();
        double[] y = interpolator.getInterpolatedState();
        System.out.println(t + &quot; &quot; + y[0] + &quot; &quot; + y[1]);
    }
};
integrator.addStepHandler(stepHandler);
        </pre></div>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/ode/ContinuousOutputModel.html">ContinuousOutputModel</a>
          is a special-purpose step handler that is able to store all steps and to provide transparent access to
          any intermediate result once the integration is over. An important feature of this class is that it
          implements the <tt>Serializable</tt> interface. This means that a complete continuous model of the
          integrated function throughout the integration range can be serialized and reused later (if stored into
          a persistent medium like a file system or a database) or elsewhere (if sent to another application).
          Only the result of the integration is stored, there is no reference to the integrated problem by itself.
        </p>
        
<p>
          Other default implementations of the <a href="../apidocs/org/apache/commons/math3/ode/sampling/StepHandler.html">StepHandler</a>
          interface are available for general needs
          (<a href="../apidocs/org/apache/commons/math3/ode/sampling/DummyStepHandler.html">DummyStepHandler</a>,
          <a href="../apidocs/org/apache/commons/math3/ode/sampling/StepNormalizer.html">StepNormalizer</a>) and custom
          implementations can be developed for specific needs. As an example, if an application is to be
          completely driven by the integration process, then most of the application code will be run inside a
          step handler specific to this application.
        </p>
        
<p>
          Some integrators (the simple ones) use fixed steps that are set at creation time. The more efficient
          integrators use variable steps that are handled internally in order to control the integration error
          of the main state with respect to a specified accuracy (these integrators extend the
          <a href="../apidocs/org/apache/commons/math3/ode/AdaptiveStepsizeIntegrator.html">AdaptiveStepsizeIntegrator</a>
          abstract class). The secondary equations are explicitly ignored for step size control, in order to get reproducible
          results regardless of the secondary equations being integrated or not. The step handler which is called after each
          successful step shows up the variable stepsize. The <a href="../apidocs/org/apache/commons/math3/ode/sampling/StepNormalizer.html">StepNormalizer</a>
          class can be used to convert the variable stepsize into a fixed stepsize that can be handled by classes
          implementing the <a href="../apidocs/org/apache/commons/math3/ode/sampling/FixedStepHandler.html">FixedStepHandler</a>
          interface. Adaptive stepsize integrators can automatically compute the initial stepsize by themselves,
          however the user can specify it if he prefers to retain full control over the integration or if the
          automatic guess is wrong.
        </p>
      </div>
      
<div class="section">
<h3><a name="a15.3_Discrete_Events_Handling"></a>15.3 Discrete Events Handling</h3>
        
<p>
          ODE problems are continuous ones. However, sometimes discrete events must be
          taken into account. The most frequent case is the stop condition of the integrator
          is not defined by the time t but by a target condition on state y (say y[0] = 1.0
          for example).
        </p>
        
<p>
          Discrete events detection is based on switching functions. The user provides
          a simple <a href="../apidocs/org/apache/commons/math3/ode/events/EventHandler.html">g(t, y)</a>
          function depending on the current time and state. The integrator will monitor
          the value of the function throughout integration range and will trigger the
          event when its sign changes. The magnitude of the value is almost irrelevant.
          For the sake of root finding, it should however be continuous (but not necessarily smooth)
          at least in the roots vicinity. The steps are shortened as needed to ensure the events occur
          at step boundaries (even if the integrator is a fixed-step integrator).
        </p>
        
<p>
          When an event is triggered, the event time, current state and an indicator
          whether the switching function was increasing or decreasing at event time
          are provided to the user. Several different options are available to him:
        </p>
        
<ul>
          
<li>integration can be stopped (this is called a G-stop facility),</li>
          
<li>the state vector or the derivatives can be changed,</li>
          
<li>or integration can simply go on.</li>
        </ul>

        
<p>
          The first case, G-stop, is the most common one. A typical use case is when an
          ODE must be solved up to some target state is reached, with a known value of
          the state but an unknown occurrence time. As an example, if we want to monitor
          a chemical reaction up to some predefined concentration for the first substance,
          we can use the following switching function setting:
        </p>
        
<div class="source">
<pre>
public double g(double t, double[] y) {
  return y[0] - targetConcentration;
}

public int eventOccurred(double t, double[] y, boolean increasing) {
  return STOP;
}
       </pre></div>

       
<p>
         The second case, change state vector or derivatives is encountered when dealing
         with discontinuous dynamical models. A typical case would be the motion of a
         spacecraft when thrusters are fired for orbital maneuvers. The acceleration is
         smooth as long as no maneuvers are performed, depending only on gravity, drag,
         third body attraction, radiation pressure. Firing a thruster introduces a
         discontinuity that must be handled appropriately by the integrator. In such a case,
         we would use a switching function setting similar to this:
       </p>
       
<div class="source">
<pre>
public double g(double t, double[] y) {
  return (t - tManeuverStart) * (t - tManeuverStop);
}

public int eventOccurred(double t, double[] y, boolean increasing) {
  return RESET_DERIVATIVES;
}
        </pre></div>

        
<p>
          The third case is useful mainly for monitoring purposes, a simple example is:
        </p>
        
<div class="source">
<pre>
public double g(double t, double[] y) {
  return y[0] - y[1];
}

public int eventOccurred(double t, double[] y, boolean increasing) {
  logger.log(&quot;y0(t) and y1(t) curves cross at t = &quot; + t);
  return CONTINUE;
}
        </pre></div>
      </div>
      
<div class="section">
<h3><a name="a15.4_Available_Integrators"></a>15.4 Available Integrators</h3>
        
<p>
          The tables below show the various integrators available for non-stiff problems. Note that the
          implementations of Adams-Bashforth and Adams-Moulton are adaptive stepsize, not fixed stepsize
          as is usual for these multi-step integrators. This is due to the fact the implementation relies
          on the Nordsieck vector representation of the state.
        </p>
        
<p>
          </p>
<table class="bodyTable" border="1" align="center">
          
<tr class="a">
<td colspan="2"><font size="+1">Fixed Step Integrators</font></td></tr>
          
<tr class="b"><font size="+1">
<td>Name</td>
<td>Order</td></font></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/EulerIntegrator.html">Euler</a></td>
<td>1</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/MidpointIntegrator.html">Midpoint</a></td>
<td>2</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/ClassicalRungeKuttaIntegrator.html">Classical Runge-Kutta</a></td>
<td>4</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/GillIntegrator.html">Gill</a></td>
<td>4</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/ThreeEighthesIntegrator.html">3/8</a></td>
<td>4</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/LutherIntegrator.html">Luther</a></td>
<td>6</td></tr>
          </table>
        
        
<p>
          </p>
<table class="bodyTable" border="1" align="center">
          
<tr class="a">
<td colspan="3"><font size="+1">Adaptive Stepsize Integrators</font></td></tr>
          
<tr class="b"><font size="+1">
<td>Name</td>
<td>Integration Order</td>
<td>Error Estimation Order</td></font></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/HighamHall54Integrator.html">Higham and Hall</a></td>
<td>5</td>
<td>4</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/DormandPrince54Integrator.html">Dormand-Prince 5(4)</a></td>
<td>5</td>
<td>4</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/DormandPrince853Integrator.html">Dormand-Prince 8(5,3)</a></td>
<td>8</td>
<td>5 and 3</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/GraggBulirschStoerIntegrator.html">Gragg-Bulirsch-Stoer</a></td>
<td>variable (up to 18 by default)</td>
<td>variable</td></tr>
          
<tr class="a">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/AdamsBashforthIntegrator.html">Adams-Bashforth</a></td>
<td>variable</td>
<td>variable</td></tr>
          
<tr class="b">
<td><a href="../apidocs/org/apache/commons/math3/ode/nonstiff/AdamsMoultonIntegrator.html">Adams-Moulton</a></td>
<td>variable</td>
<td>variable</td></tr>
          </table>
        
      </div>
      
<div class="section">
<h3><a name="a15.5_Derivatives"></a>15.5 Derivatives</h3>
        
<p>
          If in addition to state y(t) the user needs to compute the sensitivity of the final state with respect to
          the initial state (dy/dy<sub>0</sub>) or the sensitivity of the final state with respect to some parameters
          of the ODE (dy/dp<sub>k</sub>), he needs to register the variational equations as a set of secondary equations
          appended to the main state before the integration starts. Then the integration will propagate the compound
          state composed of both the main state and its partial derivatives. At the end of the integration, the Jacobian
          matrices are extracted from the integrated secondary state. The <a href="../apidocs/org/apache/commons/math3/ode/JacobianMatrices.html">JacobianMatrices</a> class can do most of
          this as long as the local derivatives are provided to it. It will set up the variational equations, register
          them as secondary equations into the ODE, and it will set up the initial values and retrieve the intermediate
          and final values as Jacobian matrices.
        </p>
        
<p>
          If for example the original state dimension is 6 and there are 3 parameters, the compound state will be a 60
          elements array. The first 6 elements will be the original state, the next 36 elements will represent the 6x6
          Jacobian matrix of the final state with respect to the initial state, and the remaining 18 elements will
          represent the 6x3 Jacobian matrix of the final state with respect to the 3 parameters. The <a href="../apidocs/org/apache/commons/math3/ode/JacobianMatrices.html">JacobianMatrices</a> class does the mapping
          between the 60 elements compound state and the Jacobian matrices and sets up the correcsponding secondary equations.
        </p>
        
<p>
          As the variational equations are considered to be secondary equations here, variable step integrators ignore
          them for step size control: they rely only on the main state. This feature is a design choice. The rationale is
          to get exactly the same steps, regardless of the Jacobians being computed or not, hence ensuring reproducible
          results in both cases.
        </p>
        
<p>
          What remains of user responsibility is to provide the local Jacobians df(t, y, p)/dy and df(t, y, p)/dp<sub>k</sub>
          corresponding the the main ODE y'=f(t, y, p). The main ODE is as usual provided by the user as a class implementing
          the <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderDifferentialEquations.html">FirstOrderDifferentialEquations</a>
          interface or a sub-interface.
        </p>
        
<p>
          If the ODE is simple enough that the user can implement df(t, y, p)/dy directly, then instead of providing an
          implementation of the <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderDifferentialEquations.html">FirstOrderDifferentialEquations</a>
          interface only, the user should rather provide an implementation of the <a href="../apidocs/org/apache/commons/math3/ode/MainStateJacobianProvider.html">MainStateJacobianProvider</a> interface,
          which extends the previous interface by adding a method to compute df(t, y, p)/dy. The user class is used as a
          constructor parameter of the <a href="../apidocs/org/apache/commons/math3/ode/JacobianMatrices.html">JacobianMatrices</a>
          class. If the ODE is too complex or the user simply does not bother implementing df(t, y, p)/dy directly, then
          the ODE can still be implemented using the simple <a href="../apidocs/org/apache/commons/math3/ode/FirstOrderDifferentialEquations.html">FirstOrderDifferentialEquations</a>
          interface and given as such to another constructor of the <a href="../apidocs/org/apache/commons/math3/ode/JacobianMatrices.html">JacobianMatrices</a> class, but in this case an array
          hy must also be provided that will contain the step size to use form each component of the main state vector y, and
          the Jacobian f(t, y, p)/dy will be computed internally using finite differences. This will of course trigger more evaluations
          of the ODE at each step and will suffer from finite differences errors, but it is much simpler to implement from a user
          point of view.
        </p>
        
<p>
          The parameters are identified by a name (a simple user defined string), which are also specified at <a href="../apidocs/org/apache/commons/math3/ode/JacobianMatrices.html">JacobianMatrices</a> class construction. If the ODE
          is simple enough that the user can implement df(t, y, p)/dp<sub>k</sub> directly for some of the parameters p<sub>k</sub>,
          then he can provide one or more classes implementing the <a href="../apidocs/org/apache/commons/math3/ode/ParameterJacobianProvider.html">ParameterJacobianProvider</a> interface by
          calling the JacobianMatrices.addParameterJacobianProvide method. The parameters are handled one at a time, but all the calls to
          ParameterJacobianProvider.computeParameterJacobian will be grouped in one sequence after the call to MainStateJacobianProvider.computeMainStateJacobian
          This feature can be used when all the derivatives share a lot of costly computation. In this case, the user
          is advised to compute all the needed derivatives at once during the call to computeMainStateJacobian, including the
          partial derivatives with respect to the parameters and to store the derivatives temporary. Then when the next calls to
          computeParameterJacobian will be triggerred, it will be sufficient to return the already computed derivatives. With this
          architecture, many computation can be saved. This of course implies that the classes implementing both interfaces know
          each other (they can even be the same class if desired, but it is not required). If the ODE is too complex or the user
          simply does not bother implementing df(t, y, p)/dp<sub>k</sub> directly for some k, then
          the JacobianMatrices.setParameterStep method should be called so finite differences are used to compute the derivatives
          for this parameter. It is possible to have some parameters for which derivatives are provided by a direct implementation
          while other parameters are computed using finite differences during the same integration.
        </p>
        
<p>
          The following example corresponds to a simple case where all derivatives can be computed analytically. The state is
          a 2D point travelling along a circle. There are three parameters : the two coordinates of the center and the
          angular velocity.
        </p>
        
<div class="source">
<pre>
public class CircleODE implements MainStateJacobianProvider, ParameterJacobianProvider {

    public static final String CENTER_X = &quot;cx&quot;;
    public static final String CENTER_Y = &quot;cy&quot;;
    public static final String OMEGA    = &quot;omega&quot;;

    private double[] c;
    private double omega;
    private double[][] savedDfDp;

    public CircleODE(double[] c, double omega) {
        this.c     = c;
        this.omega = omega;
        this.savedDfDp = new double[2][3];
    }

    public int getDimension() {
        return 2;
    }

    public void computeDerivatives(double t, double[] y, double[] yDot) {
        // the state is a 2D point, the ODE therefore corresponds to the velocity
        yDot[0] = omega * (c[1] - y[1]);
        yDot[1] = omega * (y[0] - c[0]);
    }

    public Collection&lt;String&gt; getParametersNames() {
        return Arrays.asList(CENTER_X, CENTER_Y, OMEGA);
    }

    public boolean isSupported(String name) {
        return CENTER_X.equals(name) || CENTER_Y.equals(name) || OMEGA.equals(name);
    }

    public void computeMainStateJacobian(double t, double[] y, double[] yDot, double[][] dFdY) {

        // compute the Jacobian of the main state
        dFdY[0][0] = 0;
        dFdY[0][1] = -omega;
        dFdY[1][0] = omega;
        dFdY[1][1] = 0;

        // precompute the derivatives with respect to the parameters,
        // they will be provided back when computeParameterJacobian are called later on
        savedDfDp[0][0] = 0;
        savedDfDp[0][1] = omega;
        savedDfDp[0][2] = c[1] - y[1];
        savedDfDp[1][0] = -omega;
        savedDfDp[1][1] = 0;
        savedDfDp[1][2] = y[0] - c[0];

    }

    public void computeParameterJacobian(double t, double[] y, double[] yDot,
                                         String paramName, double[] dFdP) {
        // we simply return the derivatives precomputed earlier
        if (CENTER_X.equals(paramName)) {
            dFdP[0] = savedDfDp[0][0];
            dFdP[1] = savedDfDp[1][0];
        } else if (CENTER_Y.equals(paramName)) {
            dFdP[0] = savedDfDp[0][1];
            dFdP[1] = savedDfDp[1][1];
        } else {
            dFdP[0] = savedDfDp[0][2];
            dFdP[1] = savedDfDp[1][2];
        }
     }

}
        </pre></div>
        
<p>
          This ODE is integrated as follows:
        </p>
        
<div class="source">
<pre>
        CircleODE circle = new CircleODE(new double[] {1.0,  1.0 }, 0.1);

        // here, we could select only a subset of the parameters, or use another order
        JacobianMatrices jm = new JacobianMatrices(circle, CircleODE.CENTER_X, CircleODE.CENTER_Y, CircleODE.OMEGA);
        jm.addParameterJacobianProvider(circle);

        ExpandableStatefulODE efode = new ExpandableStatefulODE(circle);
        efode.setTime(0);
        double[] y = { 1.0, 0.0 };
        efode.setPrimaryState(y);

        // create the variational equations and append them to the main equations, as secondary equations
        jm.registerVariationalEquations(efode);

        // integrate the compound state, with both main and additional equations
        DormandPrince853Integrator integrator = new DormandPrince853Integrator(1.0e-6, 1.0e3, 1.0e-10, 1.0e-12);
        integrator.setMaxEvaluations(5000);
        integrator.integrate(efode, 20.0);

        // retrieve the Jacobian of the final state with respect to initial state
        double[][] dYdY0 = new double[2][2];
        jm.getCurrentMainSetJacobian(dYdY0);

        // retrieve the Jacobians of the final state with resepct to the various parameters
        double[]   dYdCx = new double[2];
        double[]   dYdCy = new double[2];
        double[]   dYdOm = new double[2];
        jm.getCurrentParameterJacobian(CircleODE.CENTER_X, dYdCx);
        jm.getCurrentParameterJacobian(CircleODE.CENTER_Y, dYdCy);
        jm.getCurrentParameterJacobian(CircleODE.OMEGA,    dYdOm);
        </pre></div>
      </div>
     </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Genetic Algorithms</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
   
         http://www.apache.org/licenses/LICENSE-2.0
   
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
  
    <div class="section">
<h2><a name="a16_Genetic_Algorithms"></a>16 Genetic Algorithms</h2>
      
<div class="section">
<h3><a name="a16.1_Overview"></a>16.1 Overview</h3>
        
<p>
          The genetics package provides a framework and implementations for 
          genetic algorithms.
        </p>
      </div>
      
<div class="section">
<h3><a name="a16.2_GA_Framework"></a>16.2 GA Framework</h3>
      
<p>
      <a href="../apidocs/org/apache/commons/math3/genetics/GeneticAlgorithm.html">
      GeneticAlgorithm</a> provides an execution framework for Genetic Algorithms (GA).  
      <a href="../apidocs/org/apache/commons/math3/genetics/Population.html">
      Populations,</a> consisting of <a href="../apidocs/org/apache/commons/math3/genetics/Chromosome.html">
      Chromosomes</a> are evolved by the <tt>GeneticAlgorithm</tt> until a 
      <a href="../apidocs/org/apache/commons/math3/genetics/StoppingCondition.html">
      StoppingCondition</a> is reached. Evolution is determined by <a href="../apidocs/org/apache/commons/math3/genetics/SelectionPolicy.html">
      SelectionPolicy</a>, <a href="../apidocs/org/apache/commons/math3/genetics/MutationPolicy.html">
      MutationPolicy</a> and <a href="../apidocs/org/apache/commons/math3/genetics/Fitness.html">
      Fitness</a>.
      </p>
      
<p>
      The GA itself is implemented by the <tt>evolve</tt> method of the
      <tt>GeneticAlgorithm</tt> class,
      which looks like this:
      </p>
<div class="source">
<pre>public Population evolve(Population initial, StoppingCondition condition) {
    Population current = initial;
    while (!condition.isSatisfied(current)) {
        current = nextGeneration(current);
    }
    return current;
}
          </pre></div>
          The <tt>nextGeneration</tt> method implements the following algorithm:
          
<ol style="list-style-type: decimal">
          
<li>Get nextGeneration population to fill from <tt>current</tt>
             generation, using its nextGeneration method</li>
          
<li>Loop until new generation is filled:</li>
          
<ul>
<li>Apply configured <tt>SelectionPolicy</tt> to select a pair of parents
                 from <tt>current</tt></li>
             
<li>With probability = 
                 <a href="../apidocs/org/apache/commons/math3/genetics/GeneticAlgorithm.html#getCrossoverRate">
                 getCrossoverRate()</a>, apply configured <tt>CrossoverPolicy</tt> to parents</li>
             
<li>With probability = 
                 <a href="../apidocs/org/apache/commons/math3/genetics/GeneticAlgorithm.html#getMutationRate">
                 getMutationRate()</a>,
                 apply configured <tt>MutationPolicy</tt> to each of the offspring</li>
             
<li>Add offspring individually to nextGeneration,
                 space permitting</li>
          </ul>
          
<li>Return nextGeneration</li>
         </ol>  
      
      </div>
      
<div class="section">
<h3><a name="a16.3_Implementation"></a>16.3 Implementation</h3>
      
<p>
      Here is an example GA execution:
      </p>
<div class="source">
<pre>
// initialize a new genetic algorithm
GeneticAlgorithm ga = new GeneticAlgorithm(
    new OnePointCrossover&lt;Integer&gt;(),
    1,
    new RandomKeyMutation(),
    0.10,
    new TournamentSelection(TOURNAMENT_ARITY)
);
        
// initial population
Population initial = getInitialPopulation();
        
// stopping condition
StoppingCondition stopCond = new FixedGenerationCount(NUM_GENERATIONS);
        
// run the algorithm
Population finalPopulation = ga.evolve(initial, stopCond);
        
// best chromosome from the final population
Chromosome bestFinal = finalPopulation.getFittestChromosome();
        </pre></div>
        The arguments to the <tt>GeneticAlgorithm</tt> constructor above are: <br />
        
<table border="0" class="bodyTable">
        
<tr class="a">
<th>Parameter</th>
<th>value in example</th>
<th>meaning</th></tr>
        
<tr class="b">
<td>crossoverPolicy</td>
        
<td><a href="../apidocs/org/apache/commons/math3/genetics/OnePointCrossover.html">OnePointCrossover</a></td>
        
<td>A random crossover point is selected and the first part from each parent is copied to the corresponding
        child, and the second parts are copied crosswise.</td></tr>
        
<tr class="a">
<td>crossoverRate</td>
        
<td>1</td>
        
<td>Always apply crossover</td></tr>
        
<tr class="b">
<td>mutationPolicy</td>
        
<td><a href="../apidocs/org/apache/commons/math3/genetics/RandomKeyMutation.html">RandomKeyMutation</a></td>
        
<td>Changes a randomly chosen element of the array representation to a random value uniformly distributed in [0,1].</td></tr>
        
<tr class="a">
<td>mutationRate</td>
        
<td>.1</td>
        
<td>Apply mutation with probability 0.1 - that is, 10% of the time.</td></tr>
        
<tr class="b">
<td>selectionPolicy</td>
        
<td><a href="../apidocs/org/apache/commons/math3/genetics/TournamentSelection.html">TournamentSelection</a></td>
        
<td>Each of the two selected chromosomes is selected based on an n-ary tournament -- this is done by drawing
        n random chromosomes without replacement from the population, and then selecting the fittest chromosome among them.</td></tr>
        </table><br />
        The algorithm starts with an <tt>initial</tt> population of <tt>Chromosomes.</tt> and executes until 
        the specified <a href="../apidocs/org/apache/commons/math3/genetics/StoppingCondition.html">StoppingCondition</a>
        is reached.  In the example above, a
        <a href="../apidocs/org/apache/commons/math3/genetics/FixedGenerationCount.html">FixedGenerationCount</a>
        stopping condition is used, which means the algorithm proceeds through a fixed number of generations.
      
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Filters</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
   
         http://www.apache.org/licenses/LICENSE-2.0
   
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
  
    <div class="section">
<h2><a name="a17_Filters"></a>17 Filters</h2>
      
<div class="section">
<h3><a name="a17.1_Overview"></a>17.1 Overview</h3>
        
<p>
          The filter package currently provides only an implementation of a Kalman filter.
        </p>
      </div>
      
<div class="section">
<h3><a name="a17.2_Kalman_Filter"></a>17.2 Kalman Filter</h3>
        
<p>
          <a href="../apidocs/org/apache/commons/math3/filter/KalmanFilter.html">
          KalmanFilter</a> provides a discrete-time filter to estimate
          a stochastic linear process.</p>
          
        
<p>A Kalman filter is initialized with a <a href="../apidocs/org/apache/commons/math3/filter/ProcessModel.html">
          ProcessModel</a> and a <a href="../apidocs/org/apache/commons/math3/filter/MeasurementModel.html">
          MeasurementModel</a>, which contain the corresponding transformation and noise covariance matrices. 
          The parameter names used in the respective models correspond to the following names commonly used 
          in the mathematical literature:
        </p>
<ul>
             
<li>A - state transition matrix</li>
             
<li>B - control input matrix</li>
             
<li>H - measurement matrix</li>
             
<li>Q - process noise covariance matrix</li>
             
<li>R - measurement noise covariance matrix</li>
             
<li>P - error covariance matrix</li>
         </ul>
         
        
<p>
        </p>
<dl>
          
<dt>Initialization</dt>
          
<dd> The following code will create a Kalman filter using the provided 
          DefaultMeasurementModel and DefaultProcessModel classes. To support dynamically changing
          process and measurement noises, simply implement your own models.
            
<div class="source">
<pre>
// A = [ 1 ]
RealMatrix A = new Array2DRowRealMatrix(new double[] { 1d });
// no control input
RealMatrix B = null;
// H = [ 1 ]
RealMatrix H = new Array2DRowRealMatrix(new double[] { 1d });
// Q = [ 0 ]
RealMatrix Q = new Array2DRowRealMatrix(new double[] { 0 });
// R = [ 0 ]
RealMatrix R = new Array2DRowRealMatrix(new double[] { 0 });

ProcessModel pm
   = new DefaultProcessModel(A, B, Q, new ArrayRealVector(new double[] { 0 }), null);
MeasurementModel mm = new DefaultMeasurementModel(H, R);
KalmanFilter filter = new KalmanFilter(pm, mm);
            </pre></div>
          </dd>
          
<dt>Iteration</dt>
          
<dd>The following code illustrates how to perform the predict/correct cycle:  
          
<div class="source">
<pre>
for (;;) {
   // predict the state estimate one time-step ahead
   // optionally provide some control input
   filter.predict();

   // obtain measurement vector z
   RealVector z = getMeasurement();

   // correct the state estimate with the latest measurement
   filter.correct(z);
   
   double[] stateEstimate = filter.getStateEstimation();
   // do something with it
}
          </pre></div>
          </dd>
          
<dt>Constant Voltage Example</dt>
          
<dd>The following example creates a Kalman filter for a static process: a system with a 
          constant voltage as internal state. We observe this process with an artificially 
          imposed measurement noise of 0.1V and assume an internal process noise of 1e-5V.
          
<div class="source">
<pre>
double constantVoltage = 10d;
double measurementNoise = 0.1d;
double processNoise = 1e-5d;

// A = [ 1 ]
RealMatrix A = new Array2DRowRealMatrix(new double[] { 1d });
// B = null
RealMatrix B = null;
// H = [ 1 ]
RealMatrix H = new Array2DRowRealMatrix(new double[] { 1d });
// x = [ 10 ]
RealVector x = new ArrayRealVector(new double[] { constantVoltage });
// Q = [ 1e-5 ]
RealMatrix Q = new Array2DRowRealMatrix(new double[] { processNoise });
// P = [ 1 ]
RealMatrix P0 = new Array2DRowRealMatrix(new double[] { 1d });
// R = [ 0.1 ]
RealMatrix R = new Array2DRowRealMatrix(new double[] { measurementNoise });

ProcessModel pm = new DefaultProcessModel(A, B, Q, x, P0);
MeasurementModel mm = new DefaultMeasurementModel(H, R);
KalmanFilter filter = new KalmanFilter(pm, mm);  

// process and measurement noise vectors
RealVector pNoise = new ArrayRealVector(1);
RealVector mNoise = new ArrayRealVector(1);

RandomGenerator rand = new JDKRandomGenerator();
// iterate 60 steps
for (int i = 0; i &lt; 60; i++) {
    filter.predict();

    // simulate the process
    pNoise.setEntry(0, processNoise * rand.nextGaussian());

    // x = A * x + p_noise
    x = A.operate(x).add(pNoise);

    // simulate the measurement
    mNoise.setEntry(0, measurementNoise * rand.nextGaussian());

    // z = H * x + m_noise
    RealVector z = H.operate(x).add(mNoise);

    filter.correct(z);

    double voltage = filter.getStateEstimation()[0];
}
          </pre></div>
          </dd>
          
<dt>Increasing Speed Vehicle Example</dt>
          
<dd>The following example creates a Kalman filter for a simple linear process: a 
          vehicle driving along a street with a velocity increasing at a constant rate. The process
          state is modeled as (position, velocity) and we only observe the position. A measurement
          noise of 10m is imposed on the simulated measurement.
          
<div class="source">
<pre>
// discrete time interval
double dt = 0.1d;
// position measurement noise (meter)
double measurementNoise = 10d;
// acceleration noise (meter/sec^2)
double accelNoise = 0.2d;

// A = [ 1 dt ]
//     [ 0  1 ]
RealMatrix A = new Array2DRowRealMatrix(new double[][] { { 1, dt }, { 0, 1 } });
// B = [ dt^2/2 ]
//     [ dt     ]
RealMatrix B = new Array2DRowRealMatrix(new double[][] { { Math.pow(dt, 2d) / 2d }, { dt } });
// H = [ 1 0 ]
RealMatrix H = new Array2DRowRealMatrix(new double[][] { { 1d, 0d } });
// x = [ 0 0 ]
RealVector x = new ArrayRealVector(new double[] { 0, 0 });

RealMatrix tmp = new Array2DRowRealMatrix(new double[][] {
    { Math.pow(dt, 4d) / 4d, Math.pow(dt, 3d) / 2d },
    { Math.pow(dt, 3d) / 2d, Math.pow(dt, 2d) } });
// Q = [ dt^4/4 dt^3/2 ]
//     [ dt^3/2 dt^2   ]
RealMatrix Q = tmp.scalarMultiply(Math.pow(accelNoise, 2));
// P0 = [ 1 1 ]
//      [ 1 1 ]
RealMatrix P0 = new Array2DRowRealMatrix(new double[][] { { 1, 1 }, { 1, 1 } });
// R = [ measurementNoise^2 ]
RealMatrix R = new Array2DRowRealMatrix(new double[] { Math.pow(measurementNoise, 2) });

// constant control input, increase velocity by 0.1 m/s per cycle
RealVector u = new ArrayRealVector(new double[] { 0.1d });

ProcessModel pm = new DefaultProcessModel(A, B, Q, x, P0);
MeasurementModel mm = new DefaultMeasurementModel(H, R);
KalmanFilter filter = new KalmanFilter(pm, mm);

RandomGenerator rand = new JDKRandomGenerator();

RealVector tmpPNoise = new ArrayRealVector(new double[] { Math.pow(dt, 2d) / 2d, dt });
RealVector mNoise = new ArrayRealVector(1);

// iterate 60 steps
for (int i = 0; i &lt; 60; i++) {
    filter.predict(u);

    // simulate the process
    RealVector pNoise = tmpPNoise.mapMultiply(accelNoise * rand.nextGaussian());

    // x = A * x + B * u + pNoise
    x = A.operate(x).add(B.operate(u)).add(pNoise);

    // simulate the measurement
    mNoise.setEntry(0, measurementNoise * rand.nextGaussian());

    // z = H * x + m_noise
    RealVector z = H.operate(x).add(mNoise);

    filter.correct(z);

    double position = filter.getStateEstimation()[0];
    double velocity = filter.getStateEstimation()[1];
}
          </pre></div>
          </dd>          
        </dl>
                
      </div>
    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Machine Learning</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->

  
    <div class="section">
<h2><a name="a16_Machine_Learning"></a>16 Machine Learning</h2>
      
<div class="section">
<h3><a name="a16.1_Overview"></a>16.1 Overview</h3>
        
<p>
           Machine learning support in commons-math currently provides operations to cluster
           data sets based on a distance measure.
        </p>
      </div>
      
<div class="section">
<h3><a name="a16.2_Clustering_algorithms_and_distance_measures"></a>16.2 Clustering algorithms and distance measures</h3>
        
<p>
          The <a href="../apidocs/org/apache/commons/math3/ml/clustering/Clusterer.html">
          Clusterer</a> class represents a clustering algorithm.
          The following algorithms are available:
          </p>
<ul>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/clustering/KMeansPlusPlusClusterer.html">KMeans++</a>:
          It is based on the well-known kMeans algorithm, but uses a different method for 
          choosing the initial values (or &quot;seeds&quot;) and thus avoids cases where KMeans sometimes 
          results in poor clusterings. KMeans/KMeans++ clustering aims to partition n observations 
          into k clusters in such that each point belongs to the cluster with the nearest center. 
          </li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/clustering/FuzzyKMeansClusterer.html">Fuzzy-KMeans</a>:
          A variation of the classical K-Means algorithm, with the major difference that a single
          data point is not uniquely assigned to a single cluster. Instead, each point i has a set
          of weights u<sub>ij</sub> which indicate the degree of membership to the cluster j. The fuzzy
          variant does not require initial values for the cluster centers and is thus more robust, although
          slower than the original kMeans algorithm.
          </li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/clustering/DBSCANClusterer.html">DBSCAN</a>:
          Density-based spatial clustering of applications with noise (DBSCAN) finds a number of 
          clusters starting from the estimated density distribution of corresponding nodes. The
          main advantages over KMeans/KMeans++ are that DBSCAN does not require the specification
          of an initial number of clusters and can find arbitrarily shaped clusters.
          </li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/clustering/MultiKMeansPlusPlusClusterer.html">Multi-KMeans++</a>:
          Multi-KMeans++ is a meta algorithm that basically performs n runs using KMeans++ and then
          chooses the best clustering (i.e., the one with the lowest distance variance over all clusters)
          from those runs.
          </li>
          </ul>
        
        
<p>
          An comparison of the available clustering algorithms:<br />
          <img src="../images/userguide/cluster_comparison.png" alt="Comparison of clustering algorithms" />
        </p>
      </div>
      
<div class="section">
<h3><a name="a16.3_Distance_measures"></a>16.3 Distance measures</h3>
        
<p>
          Each clustering algorithm requires a distance measure to determine the distance
          between two points (either data points or cluster centers).
          The following distance measures are available:
          </p>
<ul>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/distance/CanberraDistance.html">Canberra distance</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/distance/ChebyshevDistance.html">ChebyshevDistance distance</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/distance/EuclideanDistance.html">EuclideanDistance distance</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/distance/ManhattanDistance.html">ManhattanDistance distance</a></li>
          
<li><a href="../apidocs/org/apache/commons/math3/ml/distance/EarthMoversDistance.html">Earth Mover's distance</a></li>
          </ul>
        
      </div>
      
<div class="section">
<h3><a name="a16.3_Example"></a>16.3 Example</h3>
        
<p>
        Here is an example of a clustering execution. Let us assume we have a set of locations from our domain model,
        where each location has a method <tt>double getX()</tt> and <tt>double getY()</tt>
        representing their current coordinates in a 2-dimensional space. We want to cluster the locations into
        10 different clusters based on their euclidean distance.
        </p>
        
<p>
        The cluster algorithms expect a list of <a href="../apidocs/org/apache/commons/math3/ml/cluster/Clusterable.html">Clusterable</a>
        as input. Typically, we don't want to pollute our domain objects with interfaces from helper APIs.
        Hence, we first create a wrapper object:
        </p>
<div class="source">
<pre>
// wrapper class
public static class LocationWrapper implements Clusterable {
    private double[] points;
    private Location location;

    public LocationWrapper(Location location) {
        this.location = location;
        this.points = new double[] { location.getX(), location.getY() }
    }

    public Location getLocation() {
        return location;
    }

    public double[] getPoint() {
        return points;
    }
}
        </pre></div>
        Now we will create a list of these wrapper objects (one for each location), 
        which serves as input to our clustering algorithm. 
        
<div class="source">
<pre>
// we have a list of our locations we want to cluster. create a      
List&lt;Location&gt; locations = ...;
List&lt;LocationWrapper&gt; clusterInput = new ArrayList&lt;LocationWrapper&gt;(locations.size());
for (Location location : locations)
    clusterInput.add(new LocationWrapper(location));
        </pre></div>
        Finally, we can apply our clustering algorithm and output the found clusters.
        
<div class="source">
<pre>       
// initialize a new clustering algorithm. 
// we use KMeans++ with 10 clusters and 10000 iterations maximum.
// we did not specify a distance measure; the default (euclidean distance) is used.
KMeansPlusPlusClusterer&lt;LocationWrapper&gt; clusterer = new KMeansPlusPlusClusterer&lt;LocationWrapper&gt;(10, 10000);
List&lt;CentroidCluster&lt;LocationWrapper&gt;&gt; clusterResults = clusterer.cluster(clusterInput);

// output the clusters
for (int i=0; i&lt;clusterResults.size(); i++) {
    System.out.println(&quot;Cluster &quot; + i);
    for (LocationWrapper locationWrapper : clusterResults.get(i).getPoints())
        System.out.println(locationWrapper.getLocation());
    System.out.println();
}
        </pre></div>
        
      </div>
  </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>


<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 March 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160317" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Math &#x2013; The Commons Math User Guide - Exceptions</title>

	<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/prettify.min.js"></script>
	<script type="text/javascript" src="../js/site.js"></script>

                            
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>                                
<link rel="stylesheet" type="text/css" href="../css/prettify.css" media="all"/>                  
      </head>

	<body class="composite">
                          <a href="http://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="../images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="../index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="../images/math.gif"  alt="Commons Math"/>
                </a>
      		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commons.apache.org/proper/commons-math/">Apache Commons Math &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 March 2016</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 3.6.1</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="../../../" title="Commons">
    Commons</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Math</li>
																				<li class="none">
		              <a href="../index.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/download_math.cgi" title="Downloads">
    Downloads</a>
  				</li>
 														<li class="none">
		              <a href="../apidocs/index.html" title="Latest API docs (development)">
    Latest API docs (development)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6.1/index.html" title="Javadoc (3.6.1 release)">
    Javadoc (3.6.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.6/index.html" title="Javadoc (3.6 release)">
    Javadoc (3.6 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.5/index.html" title="Javadoc (3.5 release)">
    Javadoc (3.5 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4.1/index.html" title="Javadoc (3.4.1 release)">
    Javadoc (3.4.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.4/index.html" title="Javadoc (3.4 release)">
    Javadoc (3.4 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.3/index.html" title="Javadoc (3.3 release)">
    Javadoc (3.3 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.2/index.html" title="Javadoc (3.2 release)">
    Javadoc (3.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1.1/index.html" title="Javadoc (3.1.1 release)">
    Javadoc (3.1.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.1/index.html" title="Javadoc (3.1 release)">
    Javadoc (3.1 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-3.0/index.html" title="Javadoc (3.0 release)">
    Javadoc (3.0 release)</a>
  				</li>
 														<li class="none">
		              <a href="../../../math/javadocs/api-2.2/index.html" title="Javadoc (2.2 release)">
    Javadoc (2.2 release)</a>
  				</li>
 														<li class="none">
		              <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
  				</li>
 														<li class="none">
		              <a href="http://git-wip-us.apache.org/repos/asf/commons-math.git" class="externalLink" title="Source Repository (current)">
    Source Repository (current)</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 														<li class="none">
		              <a href="../developers.html" title="Developers Guide">
    Developers Guide</a>
  				</li>
 														<li class="none">
		              <a href="../proposal.html" title="Proposal">
    Proposal</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-book"></i>User Guide</li>
																				<li class="none">
		              <a href="../userguide/index.html" title="Contents">
    Contents</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/overview.html" title="Overview">
    Overview</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/stat.html" title="Statistics">
    Statistics</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/random.html" title="Data Generation">
    Data Generation</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/linear.html" title="Linear Algebra">
    Linear Algebra</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/analysis.html" title="Numerical Analysis">
    Numerical Analysis</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/special.html" title="Special Functions">
    Special Functions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/utilities.html" title="Utilities">
    Utilities</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/complex.html" title="Complex Numbers">
    Complex Numbers</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/distribution.html" title="Distributions">
    Distributions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fraction.html" title="Fractions">
    Fractions</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/transform.html" title="Transform Methods">
    Transform Methods</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/geometry.html" title="Geometry">
    Geometry</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/optimization.html" title="Optimization">
    Optimization</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/fitting.html" title="Curve Fitting">
    Curve Fitting</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/leastsquares.html" title="Least Squares">
    Least Squares</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ode.html" title="Ordinary Differential Equations">
    Ordinary Differential Equations</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/genetics.html" title="Genetic Algorithms">
    Genetic Algorithms</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/filter.html" title="Filters">
    Filters</a>
  				</li>
 														<li class="none">
		              <a href="../userguide/ml.html" title="Machine Learning">
    Machine Learning</a>
  				</li>
 															<li class="none active">
		              <a href="../userguide/exceptions.html" title="Exceptions">
    Exceptions</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                                                                                                                                                                              								<li class="collapsed">
		              <a href="../project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 																		                                                                                                                                                                                                                                                  								<li class="collapsed">
		              <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="../../../" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="../../../components.html" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="../../../security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="../../../building.html" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="../../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
  
    <div class="section">
<h2><a name="a19_Exceptions"></a>19 Exceptions</h2>

      
<div class="section">
<h3><a name="a19.1_Overview"></a>19.1 Overview</h3>
        Commons Math defines a set of exceptions in order to convey the
        precise low-level cause of failure.
      </div>

      
<div class="section">
<h3><a name="a19.2_Unchecked_Exceptions"></a>19.2 Unchecked Exceptions</h3>
        
<p>
          Starting from version 3.0, all exceptions generated by the
          Commons Math code are <i>unchecked</i> (i.e. they inherit from
          the standard <tt>RuntimeException</tt> class).
          The main rationale supporting this design decision is that the
          exceptions generated in the library are not recoverable: They most
          of the time result from bad input parameters or some failure due to
          numerical problems.
          A thorough discussion of the pros and cons of checked and unchecked
          exceptions can be read in
          <a class="externalLink" href="http://www.mindview.net/Etc/Discussions/CheckedExceptions">
            this post</a> by Bruce Eckel.
        </p>
      </div>

      
<div class="section">
<h3><a name="a19.3_Hierarchies"></a>19.3 Hierarchies</h3>
        
<p>
          The exceptions defined by Commons Math follow the Java standard
          hierarchies:
          </p>
<ul>
            
<li>
              <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html">
                <tt>IllegalArgumentException</tt></a>:
              A <a href="../apidocs/org/apache/commons/math3/exception/MathIllegalArgumentException.html">
                <tt>MathIllegalArgumentException</tt></a> is thrown when some input
              parameter fails a precondition check.
            </li>
            
<li>
              <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html">
                <tt>IllegalStateException</tt></a>:
              A <a href="../apidocs/org/apache/commons/math3/exception/MathIllegalStateException.html">
                <tt>MathIllegalStateException</tt></a> is thrown when some inconsistency
              has been detected.
            </li>
            
<li>
              <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/lang/MathArithmeticException.html">
                <tt>ArithmeticException</tt></a>:
              A <a href="../apidocs/org/apache/commons/math3/exception/MathArithmeticException.html">
                <tt>MathArithmeticException</tt></a> is thrown when conditions such as
              &quot;division by zero&quot; or &quot;overflow&quot; are encountered.
            </li>
            
<li>
              <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/lang/MathUnsupportedOperationException.html">
                <tt>UnsupportedOperationException</tt></a>:
              A <a href="../apidocs/org/apache/commons/math3/exception/MathUnsupportedOperationException.html">
                <tt>MathUnsupportedOperationException</tt></a> indicates that a feature
              is missing or does not make sense in the given context.
            </li>
          </ul>
        

        
<p>
          In all of the above exception hierarchies, several subclasses can
          exist, each conveying a specific underlying cause of the problem.
        </p>
      </div>

      
<div class="section">
<h3><a name="a19.4_Features"></a>19.4 Features</h3>
        
<ul>
          
<li>Localization
            
<p>
              The detailed error messages (i.e. the string returned by the
              <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getLocalizedMessage()">
                getLocalizedMessage</a> method) can be localized.
              However, besides the American/English default, French is the only language
              for which a translation resource is available.
            </p>
          </li>
          
<li>Exception &quot;context&quot;
            
<p>
              Every exception generated by Commons Math implements the
              <a href="../apidocs/org/apache/commons/math3/exception/util/ExceptionContextProvider.html">
                ExceptionContextProvider</a> interface. A call to the
              <a href="../apidocs/org/apache/commons/math3/exception/util/ExceptionContextProvider.html#getContext">
                getContext</a> method will return the
              <a href="../apidocs/org/apache/commons/math3/exception/util/ExceptionContext.html">
                ExceptionContext</a> instance stored in the exception, which the
              user can further customize by adding messages and/or any object.
            </p>
          </li>
        </ul>
      </div>

    </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2003-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>

</html>
